import { __decorate, __metadata } from "tslib";
import { Directive, ElementRef, HostListener } from '@angular/core';
let SprkFormatterSsnDirective = class SprkFormatterSsnDirective {
    constructor(ref) {
        this.ref = ref;
    }
    onFocus(value) {
        this.ref.nativeElement.value = this.formatSSN(value);
    }
    formatSSN(value) {
        const m = value.match(/(^(?!666|000|9\d{2})\d{3}([-]{0,1})(?!00)\d{2}\1(?!0{4})\2\d{4}$)|^$/);
        if (m) {
            let val = value.trim().replace(/[ -]/g, '');
            let newVal = '';
            const sizes = [3, 2, 4];
            sizes.forEach(size => {
                if (val.length > size) {
                    newVal += `${val.substr(0, size)}-`;
                    val = val.substr(size);
                }
            });
            newVal += val;
            return newVal;
        }
        return value;
    }
};
SprkFormatterSsnDirective.ctorParameters = () => [
    { type: ElementRef }
];
__decorate([
    HostListener('input', ['$event.target.value']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", void 0)
], SprkFormatterSsnDirective.prototype, "onFocus", null);
SprkFormatterSsnDirective = __decorate([
    Directive({
        selector: '[sprkFormatterSsn]'
    }),
    __metadata("design:paramtypes", [ElementRef])
], SprkFormatterSsnDirective);
export { SprkFormatterSsnDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Byay1mb3JtYXR0ZXItc3NuLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BzcGFya2Rlc2lnbnN5c3RlbS9zcGFyay1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL2RpcmVjdGl2ZXMvaW5wdXRzL2Zvcm1hdHRlcnMvc3Byay1mb3JtYXR0ZXItc3NuL3NwcmstZm9ybWF0dGVyLXNzbi5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUtwRSxJQUFhLHlCQUF5QixHQUF0QyxNQUFhLHlCQUF5QjtJQUNwQyxZQUFtQixHQUFlO1FBQWYsUUFBRyxHQUFILEdBQUcsQ0FBWTtJQUFHLENBQUM7SUFHdEMsT0FBTyxDQUFDLEtBQUs7UUFDWCxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsU0FBUyxDQUFDLEtBQUs7UUFDYixNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUNuQixzRUFBc0UsQ0FDdkUsQ0FBQztRQUNGLElBQUksQ0FBQyxFQUFFO1lBQ0wsSUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDNUMsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO1lBQ2hCLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUV4QixLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNuQixJQUFJLEdBQUcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxFQUFFO29CQUNyQixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDO29CQUNwQyxHQUFHLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDeEI7WUFDSCxDQUFDLENBQUMsQ0FBQztZQUVILE1BQU0sSUFBSSxHQUFHLENBQUM7WUFDZCxPQUFPLE1BQU0sQ0FBQztTQUNmO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0NBQ0YsQ0FBQTs7WUE1QnlCLFVBQVU7O0FBR2xDO0lBREMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDLHFCQUFxQixDQUFDLENBQUM7Ozs7d0RBRzlDO0FBTlUseUJBQXlCO0lBSHJDLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSxvQkFBb0I7S0FDL0IsQ0FBQztxQ0FFd0IsVUFBVTtHQUR2Qix5QkFBeUIsQ0E2QnJDO1NBN0JZLHlCQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgSG9zdExpc3RlbmVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tzcHJrRm9ybWF0dGVyU3NuXSdcbn0pXG5leHBvcnQgY2xhc3MgU3Bya0Zvcm1hdHRlclNzbkRpcmVjdGl2ZSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWY6IEVsZW1lbnRSZWYpIHt9XG5cbiAgQEhvc3RMaXN0ZW5lcignaW5wdXQnLCBbJyRldmVudC50YXJnZXQudmFsdWUnXSlcbiAgb25Gb2N1cyh2YWx1ZSkge1xuICAgIHRoaXMucmVmLm5hdGl2ZUVsZW1lbnQudmFsdWUgPSB0aGlzLmZvcm1hdFNTTih2YWx1ZSk7XG4gIH1cblxuICBmb3JtYXRTU04odmFsdWUpOiBzdHJpbmcge1xuICAgIGNvbnN0IG0gPSB2YWx1ZS5tYXRjaChcbiAgICAgIC8oXig/ITY2NnwwMDB8OVxcZHsyfSlcXGR7M30oWy1dezAsMX0pKD8hMDApXFxkezJ9XFwxKD8hMHs0fSlcXDJcXGR7NH0kKXxeJC9cbiAgICApO1xuICAgIGlmIChtKSB7XG4gICAgICBsZXQgdmFsID0gdmFsdWUudHJpbSgpLnJlcGxhY2UoL1sgLV0vZywgJycpO1xuICAgICAgbGV0IG5ld1ZhbCA9ICcnO1xuICAgICAgY29uc3Qgc2l6ZXMgPSBbMywgMiwgNF07XG5cbiAgICAgIHNpemVzLmZvckVhY2goc2l6ZSA9PiB7XG4gICAgICAgIGlmICh2YWwubGVuZ3RoID4gc2l6ZSkge1xuICAgICAgICAgIG5ld1ZhbCArPSBgJHt2YWwuc3Vic3RyKDAsIHNpemUpfS1gO1xuICAgICAgICAgIHZhbCA9IHZhbC5zdWJzdHIoc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBuZXdWYWwgKz0gdmFsO1xuICAgICAgcmV0dXJuIG5ld1ZhbDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG4iXX0=