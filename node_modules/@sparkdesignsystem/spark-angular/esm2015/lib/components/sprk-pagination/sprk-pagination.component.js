import { __decorate, __metadata } from "tslib";
import { Component, EventEmitter, Input, Output } from '@angular/core';
let SprkPaginationComponent = class SprkPaginationComponent {
    constructor() {
        /**
         * If set to `pager`, the component will render
         * in the Pager variant with no visible number
         * links. Otherwise, the component will render in
         * the Default variant if there three or fewer
         * pages or in the Long variant if there are
         * more than three pages.
         */
        this.paginationType = 'default';
        /**
         * Screen reader text for the "Next Page" icon.
         */
        this.nextLinkText = 'Next';
        /**
         * Screen reader text for the "Previous Page"
         * icon.
         */
        this.prevLinkText = 'Prev';
        /**
         * @ignore
         */
        this._currentPage = 1;
        /**
         * Accepts a function to run when the
         * previous link is clicked.
         * On click, `previousClick`
         * will emit the click event and current page.
         */
        this.previousClick = new EventEmitter();
        /**
         * Accepts a function
         * to run when the next link is clicked.
         * On click, `nextClick` will emit the click event and current page.
         */
        this.nextClick = new EventEmitter();
        /**
         * Accepts a function to run when the individual page
         * links are clicked. On click, `pageClick` will
         * emit the click event and current page.
         */
        this.pageClick = new EventEmitter();
    }
    /**
     * The current page number.
     * In the Default and Long variants,
     * this value corresponds to the active page link.
     */
    set currentPage(value) {
        if (value > this.totalPages()) {
            value = this.totalPages();
        }
        else if (value < 1) {
            value = 1;
        }
        this._currentPage = value;
    }
    get currentPage() {
        return this._currentPage;
    }
    /**
     * @ignore
     */
    goToPage(event, page) {
        event.preventDefault();
        this.currentPage = page;
        this.pageClick.emit({ event, page });
    }
    /**
     * @ignore
     */
    goBack(event, page) {
        event.preventDefault();
        let newPage = page;
        if (this.currentPage > 1) {
            newPage = this.currentPage - 1;
            this.currentPage = newPage;
        }
        // Page is still returning the old page. This allows us to
        // close Issue 1401 without introducing a breaking change.
        this.previousClick.emit({ event, page, newPage });
    }
    /**
     * @ignore
     */
    goForward(event, page) {
        event.preventDefault();
        let newPage = page;
        if (this.currentPage < this.totalPages()) {
            newPage = this.currentPage + 1;
            this.currentPage = newPage;
        }
        // Page is still returning the old page. This allows us to
        // close Issue 1401 without introducing a breaking change.
        this.nextClick.emit({ event, page, newPage });
    }
    /**
     * @ignore
     * @returns total number of pages based on total
     * number of items and the desired number of
     * items to show per page.
     */
    totalPages() {
        return Math.ceil(this.totalItems / this.itemsPerPage);
    }
    /**
     * @ignore
     * @returns true if currently on the last page.
     */
    isLastPage() {
        return this.currentPage === this.totalPages();
    }
    /**
     * @ignore
     * @returns true if the component is in
     * either the default or long variant.
     */
    showNumbers() {
        return this.paginationType !== 'pager';
    }
    /**
     * @ignore
     */
    getClasses() {
        const classArray = [''];
        if (this.additionalClasses) {
            this.additionalClasses.split(' ').forEach(className => {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    }
};
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkPaginationComponent.prototype, "paginationType", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], SprkPaginationComponent.prototype, "totalItems", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], SprkPaginationComponent.prototype, "itemsPerPage", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkPaginationComponent.prototype, "additionalClasses", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkPaginationComponent.prototype, "nextLinkText", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkPaginationComponent.prototype, "prevLinkText", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkPaginationComponent.prototype, "analyticsStringFirstLink", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkPaginationComponent.prototype, "analyticsStringSecondLink", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkPaginationComponent.prototype, "analyticsStringThirdLink", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkPaginationComponent.prototype, "analyticsStringLinkNext", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkPaginationComponent.prototype, "analyticsStringLinkPrev", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkPaginationComponent.prototype, "idString", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number),
    __metadata("design:paramtypes", [Number])
], SprkPaginationComponent.prototype, "currentPage", null);
__decorate([
    Output(),
    __metadata("design:type", Object)
], SprkPaginationComponent.prototype, "previousClick", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], SprkPaginationComponent.prototype, "nextClick", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], SprkPaginationComponent.prototype, "pageClick", void 0);
SprkPaginationComponent = __decorate([
    Component({
        selector: 'sprk-pagination',
        template: `
    <nav
      aria-label="Pagination Navigation"
      [ngClass]="getClasses()"
      [attr.data-id]="idString"
    >
      <sprk-unordered-list
        listType="horizontal"
        additionalClasses="sprk-c-Pagination sprk-o-HorizontalList--spacing-medium"
      >
        <sprk-list-item>
          <a
            sprkLink
            variant="plain"
            (click)="goBack($event, currentPage)"
            [isDisabled]="currentPage === 1"
            class="sprk-c-Pagination__icon"
            [analyticsString]="analyticsStringLinkPrev"
            aria-label="Previous Page"
            href="#"
          >
            <span class="sprk-u-ScreenReaderText">{{ prevLinkText }}</span>
            <sprk-icon
              additionalClasses="sprk-c-Icon--stroke-current-color"
              iconType="chevron-left"
            ></sprk-icon>
          </a>
        </sprk-list-item>

        <sprk-list-item *ngIf="showNumbers()">
          <a
            sprkLink
            href="#"
            (click)="goToPage($event, 1)"
            [ngClass]="{
              'sprk-c-Pagination__link': true,
              'sprk-c-Pagination__link--current': currentPage === 1
            }"
            [analyticsString]="analyticsStringFirstLink"
            [attr.aria-current]="currentPage === 1"
            aria-label="Page 1"
          >
            1
          </a>
        </sprk-list-item>

        <sprk-list-item
          *ngIf="showNumbers() && currentPage !== 2 && totalPages() === 3"
        >
          <a
            sprkLink
            href="#"
            (click)="goToPage($event, 2)"
            class="sprk-c-Pagination__link"
            [attr.aria-current]="false"
            aria-label="Page 2"
          >
            2
          </a>
        </sprk-list-item>

        <sprk-list-item
          *ngIf="showNumbers() && currentPage > 2 && totalPages() > 3"
        >
          ...
        </sprk-list-item>

        <sprk-list-item
          *ngIf="showNumbers() && currentPage > 1 && currentPage < totalPages()"
        >
          <a
            sprkLink
            href="#"
            (click)="goToPage($event, currentPage)"
            class="sprk-c-Pagination__link sprk-c-Pagination__link--current"
            aria-current="true"
            [analyticsString]="analyticsStringSecondLink"
            attr.aria-label="Page {{ currentPage }}"
          >
            {{ currentPage }}
          </a>
        </sprk-list-item>

        <sprk-list-item
          *ngIf="
            showNumbers() && currentPage < totalPages() - 1 && totalPages() > 3
          "
        >
          ...
        </sprk-list-item>

        <sprk-list-item *ngIf="showNumbers() && totalPages() > 1">
          <a
            sprkLink
            href="#"
            (click)="goToPage($event, totalPages())"
            [ngClass]="{
              'sprk-c-Pagination__link': true,
              'sprk-c-Pagination__link--current': currentPage === totalPages()
            }"
            attr.aria-label="Page {{ totalPages() }}"
            [analyticsString]="analyticsStringThirdLink"
            [attr.aria-current]="currentPage === totalPages()"
          >
            {{ totalPages() }}
          </a>
        </sprk-list-item>

        <sprk-list-item>
          <a
            sprkLink
            href="#"
            variant="plain"
            [isDisabled]="isLastPage()"
            (click)="goForward($event, currentPage)"
            class="sprk-c-Pagination__icon"
            [analyticsString]="analyticsStringLinkNext"
            aria-label="Next Page"
          >
            <span class="sprk-u-ScreenReaderText">{{ nextLinkText }}</span>
            <sprk-icon
              additionalClasses="sprk-c-Icon--stroke-current-color"
              iconType="chevron-right"
            ></sprk-icon>
          </a>
        </sprk-list-item>
      </sprk-unordered-list>
    </nav>
  `
    }),
    __metadata("design:paramtypes", [])
], SprkPaginationComponent);
export { SprkPaginationComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Byay1wYWdpbmF0aW9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BzcGFya2Rlc2lnbnN5c3RlbS9zcGFyay1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvc3Byay1wYWdpbmF0aW9uL3NwcmstcGFnaW5hdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFzSXZFLElBQWEsdUJBQXVCLEdBQXBDLE1BQWEsdUJBQXVCO0lBaU9sQztRQWhPQTs7Ozs7OztXQU9HO1FBRUgsbUJBQWMsR0FBRyxTQUFTLENBQUM7UUFzQjNCOztXQUVHO1FBRUgsaUJBQVksR0FBRyxNQUFNLENBQUM7UUFDdEI7OztXQUdHO1FBRUgsaUJBQVksR0FBRyxNQUFNLENBQUM7UUFvRHRCOztXQUVHO1FBQ0ssaUJBQVksR0FBRyxDQUFDLENBQUM7UUFxQnpCOzs7OztXQUtHO1FBRUgsa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ25DOzs7O1dBSUc7UUFFSCxjQUFTLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUMvQjs7OztXQUlHO1FBRUgsY0FBUyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7SUFzRmhCLENBQUM7SUE5SGhCOzs7O09BSUc7SUFFSCxJQUFJLFdBQVcsQ0FBQyxLQUFhO1FBQzNCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsRUFBRTtZQUM3QixLQUFLLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQzNCO2FBQU0sSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO1lBQ3BCLEtBQUssR0FBRyxDQUFDLENBQUM7U0FDWDtRQUVELElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO0lBQzVCLENBQUM7SUFDRCxJQUFJLFdBQVc7UUFDYixP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d0I7QUFRaEM7SUFEQyxLQUFLLEVBQUU7O3dFQUN3QjtBQVVoQztJQURDLEtBQUssRUFBRTs7eURBQ1M7QUFhakI7SUFEQyxLQUFLLEVBQUU7OzswREFTUDtBQVlEO0lBREMsTUFBTSxFQUFFOzs4REFDMEI7QUFPbkM7SUFEQyxNQUFNLEVBQUU7OzBEQUNzQjtBQU8vQjtJQURDLE1BQU0sRUFBRTs7MERBQ3NCO0FBM0lwQix1QkFBdUI7SUFwSW5DLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSxpQkFBaUI7UUFDM0IsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWdJVDtLQUNGLENBQUM7O0dBQ1csdUJBQXVCLENBa09uQztTQWxPWSx1QkFBdUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzcHJrLXBhZ2luYXRpb24nLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxuYXZcbiAgICAgIGFyaWEtbGFiZWw9XCJQYWdpbmF0aW9uIE5hdmlnYXRpb25cIlxuICAgICAgW25nQ2xhc3NdPVwiZ2V0Q2xhc3NlcygpXCJcbiAgICAgIFthdHRyLmRhdGEtaWRdPVwiaWRTdHJpbmdcIlxuICAgID5cbiAgICAgIDxzcHJrLXVub3JkZXJlZC1saXN0XG4gICAgICAgIGxpc3RUeXBlPVwiaG9yaXpvbnRhbFwiXG4gICAgICAgIGFkZGl0aW9uYWxDbGFzc2VzPVwic3Byay1jLVBhZ2luYXRpb24gc3Byay1vLUhvcml6b250YWxMaXN0LS1zcGFjaW5nLW1lZGl1bVwiXG4gICAgICA+XG4gICAgICAgIDxzcHJrLWxpc3QtaXRlbT5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgc3Bya0xpbmtcbiAgICAgICAgICAgIHZhcmlhbnQ9XCJwbGFpblwiXG4gICAgICAgICAgICAoY2xpY2spPVwiZ29CYWNrKCRldmVudCwgY3VycmVudFBhZ2UpXCJcbiAgICAgICAgICAgIFtpc0Rpc2FibGVkXT1cImN1cnJlbnRQYWdlID09PSAxXCJcbiAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLVBhZ2luYXRpb25fX2ljb25cIlxuICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJhbmFseXRpY3NTdHJpbmdMaW5rUHJldlwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiUHJldmlvdXMgUGFnZVwiXG4gICAgICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzcHJrLXUtU2NyZWVuUmVhZGVyVGV4dFwiPnt7IHByZXZMaW5rVGV4dCB9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcHJrLWljb25cbiAgICAgICAgICAgICAgYWRkaXRpb25hbENsYXNzZXM9XCJzcHJrLWMtSWNvbi0tc3Ryb2tlLWN1cnJlbnQtY29sb3JcIlxuICAgICAgICAgICAgICBpY29uVHlwZT1cImNoZXZyb24tbGVmdFwiXG4gICAgICAgICAgICA+PC9zcHJrLWljb24+XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L3NwcmstbGlzdC1pdGVtPlxuXG4gICAgICAgIDxzcHJrLWxpc3QtaXRlbSAqbmdJZj1cInNob3dOdW1iZXJzKClcIj5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgc3Bya0xpbmtcbiAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICAgIChjbGljayk9XCJnb1RvUGFnZSgkZXZlbnQsIDEpXCJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgJ3NwcmstYy1QYWdpbmF0aW9uX19saW5rJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ3NwcmstYy1QYWdpbmF0aW9uX19saW5rLS1jdXJyZW50JzogY3VycmVudFBhZ2UgPT09IDFcbiAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJhbmFseXRpY3NTdHJpbmdGaXJzdExpbmtcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1jdXJyZW50XT1cImN1cnJlbnRQYWdlID09PSAxXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJQYWdlIDFcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDFcbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvc3Byay1saXN0LWl0ZW0+XG5cbiAgICAgICAgPHNwcmstbGlzdC1pdGVtXG4gICAgICAgICAgKm5nSWY9XCJzaG93TnVtYmVycygpICYmIGN1cnJlbnRQYWdlICE9PSAyICYmIHRvdGFsUGFnZXMoKSA9PT0gM1wiXG4gICAgICAgID5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgc3Bya0xpbmtcbiAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICAgIChjbGljayk9XCJnb1RvUGFnZSgkZXZlbnQsIDIpXCJcbiAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLVBhZ2luYXRpb25fX2xpbmtcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1jdXJyZW50XT1cImZhbHNlXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJQYWdlIDJcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDJcbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvc3Byay1saXN0LWl0ZW0+XG5cbiAgICAgICAgPHNwcmstbGlzdC1pdGVtXG4gICAgICAgICAgKm5nSWY9XCJzaG93TnVtYmVycygpICYmIGN1cnJlbnRQYWdlID4gMiAmJiB0b3RhbFBhZ2VzKCkgPiAzXCJcbiAgICAgICAgPlxuICAgICAgICAgIC4uLlxuICAgICAgICA8L3NwcmstbGlzdC1pdGVtPlxuXG4gICAgICAgIDxzcHJrLWxpc3QtaXRlbVxuICAgICAgICAgICpuZ0lmPVwic2hvd051bWJlcnMoKSAmJiBjdXJyZW50UGFnZSA+IDEgJiYgY3VycmVudFBhZ2UgPCB0b3RhbFBhZ2VzKClcIlxuICAgICAgICA+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIHNwcmtMaW5rXG4gICAgICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgICAgICAoY2xpY2spPVwiZ29Ub1BhZ2UoJGV2ZW50LCBjdXJyZW50UGFnZSlcIlxuICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWMtUGFnaW5hdGlvbl9fbGluayBzcHJrLWMtUGFnaW5hdGlvbl9fbGluay0tY3VycmVudFwiXG4gICAgICAgICAgICBhcmlhLWN1cnJlbnQ9XCJ0cnVlXCJcbiAgICAgICAgICAgIFthbmFseXRpY3NTdHJpbmddPVwiYW5hbHl0aWNzU3RyaW5nU2Vjb25kTGlua1wiXG4gICAgICAgICAgICBhdHRyLmFyaWEtbGFiZWw9XCJQYWdlIHt7IGN1cnJlbnRQYWdlIH19XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7eyBjdXJyZW50UGFnZSB9fVxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9zcHJrLWxpc3QtaXRlbT5cblxuICAgICAgICA8c3Byay1saXN0LWl0ZW1cbiAgICAgICAgICAqbmdJZj1cIlxuICAgICAgICAgICAgc2hvd051bWJlcnMoKSAmJiBjdXJyZW50UGFnZSA8IHRvdGFsUGFnZXMoKSAtIDEgJiYgdG90YWxQYWdlcygpID4gM1xuICAgICAgICAgIFwiXG4gICAgICAgID5cbiAgICAgICAgICAuLi5cbiAgICAgICAgPC9zcHJrLWxpc3QtaXRlbT5cblxuICAgICAgICA8c3Byay1saXN0LWl0ZW0gKm5nSWY9XCJzaG93TnVtYmVycygpICYmIHRvdGFsUGFnZXMoKSA+IDFcIj5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgc3Bya0xpbmtcbiAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICAgIChjbGljayk9XCJnb1RvUGFnZSgkZXZlbnQsIHRvdGFsUGFnZXMoKSlcIlxuICAgICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICAgICAnc3Byay1jLVBhZ2luYXRpb25fX2xpbmsnOiB0cnVlLFxuICAgICAgICAgICAgICAnc3Byay1jLVBhZ2luYXRpb25fX2xpbmstLWN1cnJlbnQnOiBjdXJyZW50UGFnZSA9PT0gdG90YWxQYWdlcygpXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICAgIGF0dHIuYXJpYS1sYWJlbD1cIlBhZ2Uge3sgdG90YWxQYWdlcygpIH19XCJcbiAgICAgICAgICAgIFthbmFseXRpY3NTdHJpbmddPVwiYW5hbHl0aWNzU3RyaW5nVGhpcmRMaW5rXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtY3VycmVudF09XCJjdXJyZW50UGFnZSA9PT0gdG90YWxQYWdlcygpXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7eyB0b3RhbFBhZ2VzKCkgfX1cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvc3Byay1saXN0LWl0ZW0+XG5cbiAgICAgICAgPHNwcmstbGlzdC1pdGVtPlxuICAgICAgICAgIDxhXG4gICAgICAgICAgICBzcHJrTGlua1xuICAgICAgICAgICAgaHJlZj1cIiNcIlxuICAgICAgICAgICAgdmFyaWFudD1cInBsYWluXCJcbiAgICAgICAgICAgIFtpc0Rpc2FibGVkXT1cImlzTGFzdFBhZ2UoKVwiXG4gICAgICAgICAgICAoY2xpY2spPVwiZ29Gb3J3YXJkKCRldmVudCwgY3VycmVudFBhZ2UpXCJcbiAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLVBhZ2luYXRpb25fX2ljb25cIlxuICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJhbmFseXRpY3NTdHJpbmdMaW5rTmV4dFwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiTmV4dCBQYWdlXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNwcmstdS1TY3JlZW5SZWFkZXJUZXh0XCI+e3sgbmV4dExpbmtUZXh0IH19PC9zcGFuPlxuICAgICAgICAgICAgPHNwcmstaWNvblxuICAgICAgICAgICAgICBhZGRpdGlvbmFsQ2xhc3Nlcz1cInNwcmstYy1JY29uLS1zdHJva2UtY3VycmVudC1jb2xvclwiXG4gICAgICAgICAgICAgIGljb25UeXBlPVwiY2hldnJvbi1yaWdodFwiXG4gICAgICAgICAgICA+PC9zcHJrLWljb24+XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L3NwcmstbGlzdC1pdGVtPlxuICAgICAgPC9zcHJrLXVub3JkZXJlZC1saXN0PlxuICAgIDwvbmF2PlxuICBgXG59KVxuZXhwb3J0IGNsYXNzIFNwcmtQYWdpbmF0aW9uQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIElmIHNldCB0byBgcGFnZXJgLCB0aGUgY29tcG9uZW50IHdpbGwgcmVuZGVyXG4gICAqIGluIHRoZSBQYWdlciB2YXJpYW50IHdpdGggbm8gdmlzaWJsZSBudW1iZXJcbiAgICogbGlua3MuIE90aGVyd2lzZSwgdGhlIGNvbXBvbmVudCB3aWxsIHJlbmRlciBpblxuICAgKiB0aGUgRGVmYXVsdCB2YXJpYW50IGlmIHRoZXJlIHRocmVlIG9yIGZld2VyXG4gICAqIHBhZ2VzIG9yIGluIHRoZSBMb25nIHZhcmlhbnQgaWYgdGhlcmUgYXJlXG4gICAqIG1vcmUgdGhhbiB0aHJlZSBwYWdlcy5cbiAgICovXG4gIEBJbnB1dCgpXG4gIHBhZ2luYXRpb25UeXBlID0gJ2RlZmF1bHQnO1xuICAvKipcbiAgICogVGhlIHRvdGFsIG51bWJlciBvZiBpdGVtcyBpbiB0aGVcbiAgICogcGFnZWQgZGF0YS4gVGhpcyBpcyB1c2VkIHRvIGNhbGN1bGF0ZVxuICAgKiB0aGUgbnVtYmVyIG9mIHBhZ2VzLlxuICAgKi9cbiAgQElucHV0KClcbiAgdG90YWxJdGVtczogbnVtYmVyO1xuICAvKipcbiAgICogVGhlIHRvdGFsIG51bWJlciBvZiBpdGVtc1xuICAgKiB0byByZW5kZXIgcGVyIHBhZ2UuIFRoaXMgaXNcbiAgICogdXNlZCB0byBjYWxjdWxhdGUgdGhlIG51bWJlciBvZiBwYWdlcy5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGl0ZW1zUGVyUGFnZTogbnVtYmVyO1xuICAvKipcbiAgICogRXhwZWN0cyBhIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmdcbiAgICogb2YgY2xhc3NlcyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICogY29tcG9uZW50LlxuICAgKi9cbiAgQElucHV0KClcbiAgYWRkaXRpb25hbENsYXNzZXM6IHN0cmluZztcbiAgLyoqXG4gICAqIFNjcmVlbiByZWFkZXIgdGV4dCBmb3IgdGhlIFwiTmV4dCBQYWdlXCIgaWNvbi5cbiAgICovXG4gIEBJbnB1dCgpXG4gIG5leHRMaW5rVGV4dCA9ICdOZXh0JztcbiAgLyoqXG4gICAqIFNjcmVlbiByZWFkZXIgdGV4dCBmb3IgdGhlIFwiUHJldmlvdXMgUGFnZVwiXG4gICAqIGljb24uXG4gICAqL1xuICBASW5wdXQoKVxuICBwcmV2TGlua1RleHQgPSAnUHJldic7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgc3VwcGxpZWQgd2lsbCBiZSBhc3NpZ25lZFxuICAgKiB0byB0aGUgYGRhdGEtYW5hbHl0aWNzYCBhdHRyaWJ1dGUgb25cbiAgICogdGhlIGZpcnN0IGxpbmsuIEludGVuZGVkIGZvciBhbiBvdXRzaWRlXG4gICAqIGxpYnJhcnkgdG8gY2FwdHVyZSBkYXRhLlxuICAgKi9cbiAgQElucHV0KClcbiAgYW5hbHl0aWNzU3RyaW5nRmlyc3RMaW5rOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgc3VwcGxpZWQgd2lsbCBiZSBhc3NpZ25lZFxuICAgKiB0byB0aGUgYGRhdGEtYW5hbHl0aWNzYCBhdHRyaWJ1dGUgb25cbiAgICogdGhlIHNlY29uZCBsaW5rLiBJbnRlbmRlZCBmb3IgYW4gb3V0c2lkZVxuICAgKiBsaWJyYXJ5IHRvIGNhcHR1cmUgZGF0YS5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGFuYWx5dGljc1N0cmluZ1NlY29uZExpbms6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBzdXBwbGllZCB3aWxsIGJlIGFzc2lnbmVkXG4gICAqIHRvIHRoZSBgZGF0YS1hbmFseXRpY3NgIGF0dHJpYnV0ZSBvblxuICAgKiB0aGUgdGhpcmQgbGluay4gSW50ZW5kZWQgZm9yIGFuIG91dHNpZGVcbiAgICogbGlicmFyeSB0byBjYXB0dXJlIGRhdGEuXG4gICAqL1xuICBASW5wdXQoKVxuICBhbmFseXRpY3NTdHJpbmdUaGlyZExpbms6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBzdXBwbGllZCB3aWxsIGJlIGFzc2lnbmVkXG4gICAqIHRvIHRoZSBgZGF0YS1hbmFseXRpY3NgIGF0dHJpYnV0ZSBvblxuICAgKiB0aGUgXCJOZXh0XCIgbGluay4gSW50ZW5kZWQgZm9yIGFuIG91dHNpZGVcbiAgICogbGlicmFyeSB0byBjYXB0dXJlIGRhdGEuXG4gICAqL1xuICBASW5wdXQoKVxuICBhbmFseXRpY3NTdHJpbmdMaW5rTmV4dDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHZhbHVlIHN1cHBsaWVkIHdpbGwgYmUgYXNzaWduZWRcbiAgICogdG8gdGhlIGBkYXRhLWFuYWx5dGljc2AgYXR0cmlidXRlIG9uXG4gICAqIHRoZSBcIlByZXZcIiBsaW5rLiBJbnRlbmRlZCBmb3IgYW4gb3V0c2lkZVxuICAgKiBsaWJyYXJ5IHRvIGNhcHR1cmUgZGF0YS5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGFuYWx5dGljc1N0cmluZ0xpbmtQcmV2OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgc3VwcGxpZWQgd2lsbCBiZSBhc3NpZ25lZFxuICAgKiB0byB0aGUgYGRhdGEtaWRgIGF0dHJpYnV0ZSBvbiB0aGVcbiAgICogY29tcG9uZW50LiBUaGlzIGlzIGludGVuZGVkIHRvIGJlXG4gICAqIHVzZWQgYXMgYSBzZWxlY3RvciBmb3IgYXV0b21hdGVkXG4gICAqIHRvb2xzLiBUaGlzIHZhbHVlIHNob3VsZCBiZSB1bmlxdWVcbiAgICogcGVyIHBhZ2UuXG4gICAqL1xuICBASW5wdXQoKVxuICBpZFN0cmluZzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBwcml2YXRlIF9jdXJyZW50UGFnZSA9IDE7XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHBhZ2UgbnVtYmVyLlxuICAgKiBJbiB0aGUgRGVmYXVsdCBhbmQgTG9uZyB2YXJpYW50cyxcbiAgICogdGhpcyB2YWx1ZSBjb3JyZXNwb25kcyB0byB0aGUgYWN0aXZlIHBhZ2UgbGluay5cbiAgICovXG4gIEBJbnB1dCgpXG4gIHNldCBjdXJyZW50UGFnZSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgaWYgKHZhbHVlID4gdGhpcy50b3RhbFBhZ2VzKCkpIHtcbiAgICAgIHZhbHVlID0gdGhpcy50b3RhbFBhZ2VzKCk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA8IDEpIHtcbiAgICAgIHZhbHVlID0gMTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50UGFnZSA9IHZhbHVlO1xuICB9XG4gIGdldCBjdXJyZW50UGFnZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50UGFnZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHRzIGEgZnVuY3Rpb24gdG8gcnVuIHdoZW4gdGhlXG4gICAqIHByZXZpb3VzIGxpbmsgaXMgY2xpY2tlZC5cbiAgICogT24gY2xpY2ssIGBwcmV2aW91c0NsaWNrYFxuICAgKiB3aWxsIGVtaXQgdGhlIGNsaWNrIGV2ZW50IGFuZCBjdXJyZW50IHBhZ2UuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgcHJldmlvdXNDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgLyoqXG4gICAqIEFjY2VwdHMgYSBmdW5jdGlvblxuICAgKiB0byBydW4gd2hlbiB0aGUgbmV4dCBsaW5rIGlzIGNsaWNrZWQuXG4gICAqIE9uIGNsaWNrLCBgbmV4dENsaWNrYCB3aWxsIGVtaXQgdGhlIGNsaWNrIGV2ZW50IGFuZCBjdXJyZW50IHBhZ2UuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgbmV4dENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAvKipcbiAgICogQWNjZXB0cyBhIGZ1bmN0aW9uIHRvIHJ1biB3aGVuIHRoZSBpbmRpdmlkdWFsIHBhZ2VcbiAgICogbGlua3MgYXJlIGNsaWNrZWQuIE9uIGNsaWNrLCBgcGFnZUNsaWNrYCB3aWxsXG4gICAqIGVtaXQgdGhlIGNsaWNrIGV2ZW50IGFuZCBjdXJyZW50IHBhZ2UuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgcGFnZUNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBnb1RvUGFnZShldmVudCwgcGFnZSk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2U7XG4gICAgdGhpcy5wYWdlQ2xpY2suZW1pdCh7IGV2ZW50LCBwYWdlIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGdvQmFjayhldmVudCwgcGFnZSk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IG5ld1BhZ2UgPSBwYWdlO1xuXG4gICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPiAxKSB7XG4gICAgICBuZXdQYWdlID0gdGhpcy5jdXJyZW50UGFnZSAtIDE7XG4gICAgICB0aGlzLmN1cnJlbnRQYWdlID0gbmV3UGFnZTtcbiAgICB9XG5cbiAgICAvLyBQYWdlIGlzIHN0aWxsIHJldHVybmluZyB0aGUgb2xkIHBhZ2UuIFRoaXMgYWxsb3dzIHVzIHRvXG4gICAgLy8gY2xvc2UgSXNzdWUgMTQwMSB3aXRob3V0IGludHJvZHVjaW5nIGEgYnJlYWtpbmcgY2hhbmdlLlxuICAgIHRoaXMucHJldmlvdXNDbGljay5lbWl0KHsgZXZlbnQsIHBhZ2UsIG5ld1BhZ2UgfSk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ29Gb3J3YXJkKGV2ZW50LCBwYWdlKTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgbmV3UGFnZSA9IHBhZ2U7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8IHRoaXMudG90YWxQYWdlcygpKSB7XG4gICAgICBuZXdQYWdlID0gdGhpcy5jdXJyZW50UGFnZSArIDE7XG4gICAgICB0aGlzLmN1cnJlbnRQYWdlID0gbmV3UGFnZTtcbiAgICB9XG5cbiAgICAvLyBQYWdlIGlzIHN0aWxsIHJldHVybmluZyB0aGUgb2xkIHBhZ2UuIFRoaXMgYWxsb3dzIHVzIHRvXG4gICAgLy8gY2xvc2UgSXNzdWUgMTQwMSB3aXRob3V0IGludHJvZHVjaW5nIGEgYnJlYWtpbmcgY2hhbmdlLlxuICAgIHRoaXMubmV4dENsaWNrLmVtaXQoeyBldmVudCwgcGFnZSwgbmV3UGFnZSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqIEByZXR1cm5zIHRvdGFsIG51bWJlciBvZiBwYWdlcyBiYXNlZCBvbiB0b3RhbFxuICAgKiBudW1iZXIgb2YgaXRlbXMgYW5kIHRoZSBkZXNpcmVkIG51bWJlciBvZlxuICAgKiBpdGVtcyB0byBzaG93IHBlciBwYWdlLlxuICAgKi9cbiAgdG90YWxQYWdlcygpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy50b3RhbEl0ZW1zIC8gdGhpcy5pdGVtc1BlclBhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICogQHJldHVybnMgdHJ1ZSBpZiBjdXJyZW50bHkgb24gdGhlIGxhc3QgcGFnZS5cbiAgICovXG4gIGlzTGFzdFBhZ2UoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFBhZ2UgPT09IHRoaXMudG90YWxQYWdlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgY29tcG9uZW50IGlzIGluXG4gICAqIGVpdGhlciB0aGUgZGVmYXVsdCBvciBsb25nIHZhcmlhbnQuXG4gICAqL1xuICBzaG93TnVtYmVycygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wYWdpbmF0aW9uVHlwZSAhPT0gJ3BhZ2VyJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBnZXRDbGFzc2VzKCk6IHN0cmluZyB7XG4gICAgY29uc3QgY2xhc3NBcnJheTogc3RyaW5nW10gPSBbJyddO1xuXG4gICAgaWYgKHRoaXMuYWRkaXRpb25hbENsYXNzZXMpIHtcbiAgICAgIHRoaXMuYWRkaXRpb25hbENsYXNzZXMuc3BsaXQoJyAnKS5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIGNsYXNzQXJyYXkucHVzaChjbGFzc05hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzQXJyYXkuam9pbignICcpO1xuICB9XG4gIGNvbnN0cnVjdG9yKCkge31cbn1cbiJdfQ==