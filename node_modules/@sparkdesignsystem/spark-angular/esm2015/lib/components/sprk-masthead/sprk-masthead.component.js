import { __decorate, __metadata } from "tslib";
import { Component, HostListener, Input, Renderer2, AfterContentInit } from '@angular/core';
import { Router, Event, NavigationEnd } from '@angular/router';
import * as _ from 'lodash';
let SprkMastheadComponent = class SprkMastheadComponent {
    /**
     * @ignore
     */
    constructor(renderer, router) {
        this.renderer = renderer;
        /**
         *  The `href` value of the logo.
         */
        this.logoHref = '/';
        /**
         * The value supplied will be used as
         * screen reader text that is visually hidden
         * for the link that wraps the logo.
         */
        this.logoLinkScreenReaderText = 'Go to the homepage';
        /**
         * Represents the initial state of the
         * narrow nav element of the Masthead component.
         */
        this.isNarrowNavOpen = false;
        /**
         * A string that is used to set the `id` on the narrow nav
         * and the `aria-controls` for the menu trigger button.
         */
        this.narrowNavId = _.uniqueId(`sprk_masthead_narrow_nav_`);
        /**
         * @ignore
         */
        this.iconType = 'chevron-down';
        /**
         * @ignore
         */
        this.componentID = _.uniqueId();
        /**
         * @ignore
         */
        this.controls_id = `sprk-narrow-navigation-item__${this.componentID}`;
        /**
         * @ignore
         */
        this.isScrolled = false;
        /**
         * @ignore
         */
        this.isNarrowLayout = false;
        /**
         * @ignore
         */
        this.scrollDirection = 'up';
        /**
         * @ignore
         */
        this.isHidden = false;
        /**
         * @ignore
         */
        this.isNarrowOnResize = false;
        /**
         * @ignore
         */
        this.scrollPosition = 0;
        /**
         * @ignore
         */
        this.throttledCheckScrollDirection = _.throttle(this.checkScrollDirection, 500);
        /**
         * @ignore
         */
        this.throttledUpdateLayoutState = _.throttle(this.updateLayoutState, 500);
        router.events.subscribe((event) => {
            if (event instanceof NavigationEnd) {
                this.closeNarrowNav();
            }
        });
    }
    /**
     * @ignore
     * Closes the narrow navigation menu
     * if it is left open when
     * the viewport is expanded.
     */
    handleResizeEvent() {
        this.closeNarrowNav();
    }
    /**
     * @ignore
     */
    onScroll(event) {
        window.scrollY >= 10 ? (this.isScrolled = true) : (this.isScrolled = false);
        if (this.isNarrowLayout) {
            this.throttledCheckScrollDirection();
        }
    }
    /**
     * @ignore
     * Handles when viewport size changes to
     * large while narrow nav is hidden.
     */
    onResize(event) {
        this.isNarrowOnResize = this.isElementVisible('.sprk-c-Masthead__menu');
        this.throttledUpdateLayoutState();
    }
    /**
     * @ignore
     */
    updateLayoutState() {
        if (this.isNarrowLayout !== this.isNarrowOnResize) {
            this.isNarrowLayout = this.isNarrowOnResize;
            // If is not narrow on resize update, make sure it's visible
            if (!this.isNarrowLayout) {
                this.isHidden = false;
            }
        }
    }
    /**
     * @ignore
     */
    ngAfterContentInit() {
        this.isNarrowLayout = this.isElementVisible('.sprk-c-Masthead__menu');
    }
    /**
     * @ignore
     */
    isElementVisible(selector) {
        if (typeof window === 'undefined') {
            return;
        }
        const element = document.querySelector(selector);
        if (!element) {
            return;
        }
        const elementDisplayValue = window.getComputedStyle(element).display;
        const elementVisibilityValue = window.getComputedStyle(element).visibility;
        const elementIsVisible = elementDisplayValue === 'none' || elementVisibilityValue === 'hidden'
            ? false
            : true;
        return elementIsVisible;
    }
    /**
     * @ignore
     */
    scrollYDirection() {
        if (typeof window !== 'undefined') {
            const newScrollPos = window.scrollY;
            if (newScrollPos < 0) {
                return;
            }
            const diff = newScrollPos - this.scrollPosition;
            const direction = diff > 0 ? 'down' : 'up';
            this.scrollPosition = newScrollPos;
            return direction;
        }
    }
    /**
     * @ignore
     */
    checkScrollDirection() {
        const newDirection = this.scrollYDirection();
        if (this.scrollDirection !== newDirection) {
            this.scrollDirection = newDirection;
            this.scrollDirection === 'down'
                ? (this.isHidden = true)
                : (this.isHidden = false);
        }
    }
    /**
     * @ignore
     */
    getClasses() {
        const classArray = ['sprk-c-Masthead', 'sprk-o-Stack'];
        if (this.additionalClasses) {
            this.additionalClasses.split(' ').forEach(className => {
                classArray.push(className);
            });
        }
        if (this.isNarrowNavOpen) {
            classArray.push('sprk-c-Masthead--open');
        }
        if (this.isScrolled) {
            classArray.push('sprk-c-Masthead--scroll');
        }
        if (this.isHidden) {
            classArray.push('sprk-c-Masthead--hidden');
        }
        return classArray.join(' ');
    }
    /**
     * @ignore
     */
    getNarrowNavClasses() {
        const classArray = [];
        if (this.additionalNarrowNavClasses) {
            this.additionalNarrowNavClasses.split(' ').forEach(className => {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    }
    /**
     * @ignore
     */
    getSecondaryNavClasses() {
        const classArray = [
            'sprk-c-Masthead__big-nav-items',
            'sprk-o-Stack',
            'sprk-o-Stack--misc-a',
            'sprk-o-Stack--center-row',
            'sprk-o-Stack--split@xxs',
            'sprk-b-List',
            'sprk-b-List--bare'
        ];
        if (this.additionalBigNavClasses) {
            this.additionalBigNavClasses.split(' ').forEach(className => {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    }
    /**
     * @ignore
     */
    toggleNarrowNav(event) {
        event.preventDefault();
        if (this.isNarrowNavOpen) {
            this.closeNarrowNav();
        }
        else {
            this.openNarrowNav();
        }
    }
    /**
     * @ignore
     */
    openNarrowNav() {
        this.renderer.addClass(document.body, 'sprk-u-Overflow--hidden');
        this.renderer.addClass(document.body.parentElement, 'sprk-u-Overflow--hidden');
        this.renderer.addClass(document.body, 'sprk-u-Height--100');
        this.renderer.addClass(document.body.parentElement, 'sprk-u-Height--100');
        this.isNarrowNavOpen = true;
    }
    /**
     * @ignore
     */
    closeNarrowNav() {
        this.renderer.removeClass(document.body, 'sprk-u-Overflow--hidden');
        this.renderer.removeClass(document.body.parentElement, 'sprk-u-Overflow--hidden');
        this.renderer.removeClass(document.body, 'sprk-u-Height--100');
        this.renderer.removeClass(document.body.parentElement, 'sprk-u-Height--100');
        this.isNarrowNavOpen = false;
    }
};
SprkMastheadComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: Router }
];
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkMastheadComponent.prototype, "logoHref", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkMastheadComponent.prototype, "logoLinkScreenReaderText", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkMastheadComponent.prototype, "additionalClasses", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkMastheadComponent.prototype, "additionalBigNavClasses", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkMastheadComponent.prototype, "additionalNarrowNavClasses", void 0);
__decorate([
    Input(),
    __metadata("design:type", Array)
], SprkMastheadComponent.prototype, "narrowNavLinks", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkMastheadComponent.prototype, "isNarrowNavOpen", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkMastheadComponent.prototype, "idString", void 0);
__decorate([
    Input(),
    __metadata("design:type", Array)
], SprkMastheadComponent.prototype, "bigNavLinks", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkMastheadComponent.prototype, "narrowSelector", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkMastheadComponent.prototype, "narrowNavId", void 0);
__decorate([
    HostListener('window:orientationchange'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], SprkMastheadComponent.prototype, "handleResizeEvent", null);
__decorate([
    HostListener('window:scroll', ['$event']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", void 0)
], SprkMastheadComponent.prototype, "onScroll", null);
__decorate([
    HostListener('window:resize', ['$event']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", void 0)
], SprkMastheadComponent.prototype, "onResize", null);
SprkMastheadComponent = __decorate([
    Component({
        selector: 'sprk-masthead',
        template: `
    <header [ngClass]="getClasses()" role="banner" [attr.data-id]="idString">
      <div
        class="sprk-c-Masthead__content sprk-o-Stack__item sprk-o-Stack sprk-o-Stack--split@xxs"
      >
        <div
          class="sprk-c-Masthead__menu sprk-o-Stack__item sprk-o-Stack__item--center-column@xxs"
        >
          <button
            class="sprk-c-Menu"
            type="button"
            [attr.aria-expanded]="isNarrowNavOpen ? true : false"
            (click)="toggleNarrowNav($event)"
            [attr.aria-controls]="narrowNavId"
          >
            <span class="sprk-u-ScreenReaderText">Toggle Navigation</span>
            <svg
              [ngClass]="{
                'sprk-c-Icon': true,
                'sprk-c-Icon--l': true,
                'sprk-c-Menu__icon': true,
                'sprk-c-Menu__icon--open': isNarrowNavOpen
              }"
              aria-hidden="true"
              viewBox="0 0 64 64"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g>
                <path
                  class="sprk-c-Menu__line sprk-c-Menu__line--two"
                  d="m8 32h48"
                />
                <path
                  class="sprk-c-Menu__line sprk-c-Menu__line--one"
                  d="m8 18.68h48"
                />
                <path
                  class="sprk-c-Menu__line sprk-c-Menu__line--three"
                  d="m8 45.32h48"
                />
              </g>
            </svg>
          </button>
        </div>

        <div
          class="sprk-c-Masthead__branding sprk-o-Stack__item sprk-o-Stack__item--center-column@xxs"
        >
          <a sprkLink [attr.href]="logoHref" variant="unstyled">
            <ng-content select="[logo-slot]"></ng-content>
            <span class="sprk-u-ScreenReaderText">{{
              logoLinkScreenReaderText
            }}</span>
          </a>
        </div>

        <div
          class="sprk-c-Masthead__nav-item sprk-o-Stack__item sprk-o-Stack__item--center-column@xxs"
        >
          <ng-content select="[navItem-slot]"></ng-content>
        </div>
        <nav
          class="
          sprk-c-Masthead__little-nav
          sprk-o-Stack__item
          sprk-o-Stack__item--flex@xxs
          sprk-o-Stack
          sprk-o-Stack--misc-a
          sprk-o-Stack--split@xxs
          sprk-o-Stack--end-row"
          role="navigation"
        >
          <ng-content select="[little-nav-slot]"></ng-content>

          <ng-content select="[utility-slot]"></ng-content>
        </nav>
      </div>

      <div class="sprk-o-Stack__item">
        <nav
          class="sprk-c-Masthead__big-nav"
          role="navigation"
          [attr.data-id]="idString"
          *ngIf="bigNavLinks"
        >
          <ul [ngClass]="getSecondaryNavClasses()">
            <li
              *ngFor="let link of bigNavLinks"
              [ngClass]="{
                'sprk-c-Masthead__big-nav-item': true,
                'sprk-o-Stack__item': true,
                'sprk-c-Masthead__big-nav-item--open':
                  link.focused && link.subNav
              }"
              routerLinkActive="sprk-c-Masthead__big-nav-item--active"
              [attr.aria-haspopup]="link.subNav ? 'true' : null"
            >
              <div *ngIf="link.subNav">
                <sprk-dropdown
                  [choices]="link.subNav"
                  additionalTriggerClasses="sprk-b-Link--plain sprk-c-Masthead__link sprk-c-Masthead__link--big-nav"
                  additionalClasses="sprk-u-TextAlign--left"
                  triggerIconType="chevron-down"
                  [analyticsString]="link.analyticsString"
                  [triggerText]="link.text"
                ></sprk-dropdown>
              </div>
              <div *ngIf="!link.subNav">
                <a
                  sprkLink
                  variant="plain"
                  [analyticsString]="link.analyticsString"
                  class="sprk-c-Masthead__link sprk-c-Masthead__link--big-nav"
                  [attr.href]="link.href"
                >
                  {{ link.text }}
                </a>
              </div>
            </li>
          </ul>
        </nav>
      </div>

      <nav
        *ngIf="isNarrowNavOpen"
        class="sprk-c-Masthead__narrow-nav"
        role="navigation"
        [id]="narrowNavId"
      >
        <sprk-dropdown
          *ngIf="narrowSelector"
          dropdownType="mastheadSelector"
          additionalClasses="sprk-c-Masthead__selector-dropdown"
          additionalTriggerClasses="
            sprk-c-Masthead__selector
            sprk-b-Link
            sprk-b-Link--plain
            sprk-o-Stack
            sprk-o-Stack--split@xxs
            sprk-o-Stack--center-column"
          additionalTriggerTextClasses="sprk-o-Stack__item sprk-o-Stack__item--flex@xxs"
          additionalIconClasses="sprk-Stack__item sprk-u-mrs"
          [triggerText]="narrowSelector['trigger'].text"
          selector="Select One"
          triggerIconType="chevron-down"
          [choices]="narrowSelector['choices']"
        >
          <div
            *ngIf="narrowSelector['footer']"
            class="sprk-c-Dropdown__footer sprk-u-TextAlign--center"
            sprkDropdownFooter
          >
            <a
              sprkLink
              variant="unstyled"
              [analyticsString]="narrowSelector['footer'].analyticsString"
              [attr.href]="narrowSelector['footer'].href"
              class="sprk-c-Button sprk-c-Button--tertiary"
            >
              {{ narrowSelector['footer'].text }}
            </a>
          </div>
        </sprk-dropdown>

        <sprk-masthead-accordion [additionalClasses]="getNarrowNavClasses()">
          <div *ngFor="let narrowLink of narrowNavLinks">
            <div *ngIf="narrowLink.subNav">
              <sprk-masthead-accordion-item
                iconTypeOpen="chevron-down"
                iconTypeClosed="chevron-down"
                [leadingIcon]="narrowLink.leadingIcon"
                [isActive]="narrowLink.active"
                [title]="narrowLink.text"
              >
                <ul
                  class="sprk-b-List sprk-b-List--bare sprk-c-MastheadAccordion__details"
                >
                  <li
                    class="sprk-c-MastheadAccordion__item"
                    *ngFor="let subNavLink of narrowLink.subNav"
                  >
                    <a
                      sprkLink
                      variant="unstyled"
                      class="sprk-c-MastheadAccordion__summary"
                      [attr.href]="subNavLink.href"
                      [analyticsString]="subNavLink.analyticsString"
                    >
                      <sprk-icon
                        [iconType]="subNavLink.leadingIcon"
                        additionalClasses="sprk-c-Icon--stroke-current-color sprk-u-mrs"
                        *ngIf="subNavLink.leadingIcon"
                      ></sprk-icon>
                      {{ subNavLink.text }}
                    </a>
                  </li>
                </ul>
              </sprk-masthead-accordion-item>
            </div>
            <div *ngIf="!narrowLink.subNav">
              <li
                [ngClass]="{
                  'sprk-c-MastheadAccordion__item': true,
                  'sprk-c-MastheadAccordion__item--active': narrowLink.active
                }"
              >
                <a
                  sprkLink
                  variant="unstyled"
                  class="sprk-c-MastheadAccordion__summary"
                  [attr.href]="narrowLink.href"
                  [analyticsString]="narrowLink.analyticsString"
                >
                  <span class="sprk-c-MastheadAccordion__heading">
                    <sprk-icon
                      [iconType]="narrowLink.leadingIcon"
                      additionalClasses="sprk-c-Icon--stroke-current-color sprk-u-mrs"
                      *ngIf="narrowLink.leadingIcon"
                    ></sprk-icon>
                    {{ narrowLink.text }}
                  </span>
                </a>
              </li>
            </div>
          </div>
        </sprk-masthead-accordion>
        <ng-content select="[narrowNavFooter]"></ng-content>
      </nav>
    </header>
  `
    }),
    __metadata("design:paramtypes", [Renderer2, Router])
], SprkMastheadComponent);
export { SprkMastheadComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Byay1tYXN0aGVhZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcmtkZXNpZ25zeXN0ZW0vc3BhcmstYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3NwcmstbWFzdGhlYWQvc3Byay1tYXN0aGVhZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFDTCxTQUFTLEVBQ1QsZ0JBQWdCLEVBQ2pCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9ELE9BQU8sS0FBSyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBZ1A1QixJQUFhLHFCQUFxQixHQUFsQyxNQUFhLHFCQUFxQjtJQUNoQzs7T0FFRztJQUNILFlBQW9CLFFBQW1CLEVBQUUsTUFBYztRQUFuQyxhQUFRLEdBQVIsUUFBUSxDQUFXO1FBUXhDOztXQUVHO1FBRUYsYUFBUSxHQUFHLEdBQUcsQ0FBQztRQUNmOzs7O1dBSUc7UUFFSCw2QkFBd0IsR0FBRyxvQkFBb0IsQ0FBQztRQStCaEQ7OztXQUdHO1FBRUgsb0JBQWUsR0FBRyxLQUFLLENBQUM7UUE0QnhCOzs7V0FHRztRQUVILGdCQUFXLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBRXREOztXQUVHO1FBQ0gsYUFBUSxHQUFHLGNBQWMsQ0FBQztRQUMxQjs7V0FFRztRQUNILGdCQUFXLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzNCOztXQUVHO1FBQ0gsZ0JBQVcsR0FBRyxnQ0FBZ0MsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2pFOztXQUVHO1FBQ0gsZUFBVSxHQUFHLEtBQUssQ0FBQztRQUNuQjs7V0FFRztRQUNILG1CQUFjLEdBQUcsS0FBSyxDQUFDO1FBQ3ZCOztX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cUJBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBIb3N0TGlzdGVuZXIsXG4gIElucHV0LFxuICBSZW5kZXJlcjIsXG4gIEFmdGVyQ29udGVudEluaXRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIsIEV2ZW50LCBOYXZpZ2F0aW9uRW5kIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7XG4gIElTcHJrTmFycm93TmF2TGluayxcbiAgSVNwcmtOYXJyb3dTZWxlY3RvcixcbiAgSVNwcmtCaWdOYXZMaW5rXG59IGZyb20gJy4vc3Byay1tYXN0aGVhZC5pbnRlcmZhY2VzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnc3Byay1tYXN0aGVhZCcsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGhlYWRlciBbbmdDbGFzc109XCJnZXRDbGFzc2VzKClcIiByb2xlPVwiYmFubmVyXCIgW2F0dHIuZGF0YS1pZF09XCJpZFN0cmluZ1wiPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cInNwcmstYy1NYXN0aGVhZF9fY29udGVudCBzcHJrLW8tU3RhY2tfX2l0ZW0gc3Byay1vLVN0YWNrIHNwcmstby1TdGFjay0tc3BsaXRAeHhzXCJcbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzPVwic3Byay1jLU1hc3RoZWFkX19tZW51IHNwcmstby1TdGFja19faXRlbSBzcHJrLW8tU3RhY2tfX2l0ZW0tLWNlbnRlci1jb2x1bW5AeHhzXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLU1lbnVcIlxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWV4cGFuZGVkXT1cImlzTmFycm93TmF2T3BlbiA/IHRydWUgOiBmYWxzZVwiXG4gICAgICAgICAgICAoY2xpY2spPVwidG9nZ2xlTmFycm93TmF2KCRldmVudClcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1jb250cm9sc109XCJuYXJyb3dOYXZJZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzcHJrLXUtU2NyZWVuUmVhZGVyVGV4dFwiPlRvZ2dsZSBOYXZpZ2F0aW9uPC9zcGFuPlxuICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICAgJ3NwcmstYy1JY29uJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAnc3Byay1jLUljb24tLWwnOiB0cnVlLFxuICAgICAgICAgICAgICAgICdzcHJrLWMtTWVudV9faWNvbic6IHRydWUsXG4gICAgICAgICAgICAgICAgJ3NwcmstYy1NZW51X19pY29uLS1vcGVuJzogaXNOYXJyb3dOYXZPcGVuXG4gICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDY0IDY0XCJcbiAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxnPlxuICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYy1NZW51X19saW5lIHNwcmstYy1NZW51X19saW5lLS10d29cIlxuICAgICAgICAgICAgICAgICAgZD1cIm04IDMyaDQ4XCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYy1NZW51X19saW5lIHNwcmstYy1NZW51X19saW5lLS1vbmVcIlxuICAgICAgICAgICAgICAgICAgZD1cIm04IDE4LjY4aDQ4XCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYy1NZW51X19saW5lIHNwcmstYy1NZW51X19saW5lLS10aHJlZVwiXG4gICAgICAgICAgICAgICAgICBkPVwibTggNDUuMzJoNDhcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRfX2JyYW5kaW5nIHNwcmstby1TdGFja19faXRlbSBzcHJrLW8tU3RhY2tfX2l0ZW0tLWNlbnRlci1jb2x1bW5AeHhzXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxhIHNwcmtMaW5rIFthdHRyLmhyZWZdPVwibG9nb0hyZWZcIiB2YXJpYW50PVwidW5zdHlsZWRcIj5cbiAgICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltsb2dvLXNsb3RdXCI+PC9uZy1jb250ZW50PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzcHJrLXUtU2NyZWVuUmVhZGVyVGV4dFwiPnt7XG4gICAgICAgICAgICAgIGxvZ29MaW5rU2NyZWVuUmVhZGVyVGV4dFxuICAgICAgICAgICAgfX08L3NwYW4+XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRfX25hdi1pdGVtIHNwcmstby1TdGFja19faXRlbSBzcHJrLW8tU3RhY2tfX2l0ZW0tLWNlbnRlci1jb2x1bW5AeHhzXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltuYXZJdGVtLXNsb3RdXCI+PC9uZy1jb250ZW50PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPG5hdlxuICAgICAgICAgIGNsYXNzPVwiXG4gICAgICAgICAgc3Byay1jLU1hc3RoZWFkX19saXR0bGUtbmF2XG4gICAgICAgICAgc3Byay1vLVN0YWNrX19pdGVtXG4gICAgICAgICAgc3Byay1vLVN0YWNrX19pdGVtLS1mbGV4QHh4c1xuICAgICAgICAgIHNwcmstby1TdGFja1xuICAgICAgICAgIHNwcmstby1TdGFjay0tbWlzYy1hXG4gICAgICAgICAgc3Byay1vLVN0YWNrLS1zcGxpdEB4eHNcbiAgICAgICAgICBzcHJrLW8tU3RhY2stLWVuZC1yb3dcIlxuICAgICAgICAgIHJvbGU9XCJuYXZpZ2F0aW9uXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltsaXR0bGUtbmF2LXNsb3RdXCI+PC9uZy1jb250ZW50PlxuXG4gICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW3V0aWxpdHktc2xvdF1cIj48L25nLWNvbnRlbnQ+XG4gICAgICAgIDwvbmF2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJzcHJrLW8tU3RhY2tfX2l0ZW1cIj5cbiAgICAgICAgPG5hdlxuICAgICAgICAgIGNsYXNzPVwic3Byay1jLU1hc3RoZWFkX19iaWctbmF2XCJcbiAgICAgICAgICByb2xlPVwibmF2aWdhdGlvblwiXG4gICAgICAgICAgW2F0dHIuZGF0YS1pZF09XCJpZFN0cmluZ1wiXG4gICAgICAgICAgKm5nSWY9XCJiaWdOYXZMaW5rc1wiXG4gICAgICAgID5cbiAgICAgICAgICA8dWwgW25nQ2xhc3NdPVwiZ2V0U2Vjb25kYXJ5TmF2Q2xhc3NlcygpXCI+XG4gICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGxpbmsgb2YgYmlnTmF2TGlua3NcIlxuICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICAgJ3NwcmstYy1NYXN0aGVhZF9fYmlnLW5hdi1pdGVtJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAnc3Byay1vLVN0YWNrX19pdGVtJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAnc3Byay1jLU1hc3RoZWFkX19iaWctbmF2LWl0ZW0tLW9wZW4nOlxuICAgICAgICAgICAgICAgICAgbGluay5mb2N1c2VkICYmIGxpbmsuc3ViTmF2XG4gICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICByb3V0ZXJMaW5rQWN0aXZlPVwic3Byay1jLU1hc3RoZWFkX19iaWctbmF2LWl0ZW0tLWFjdGl2ZVwiXG4gICAgICAgICAgICAgIFthdHRyLmFyaWEtaGFzcG9wdXBdPVwibGluay5zdWJOYXYgPyAndHJ1ZScgOiBudWxsXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cImxpbmsuc3ViTmF2XCI+XG4gICAgICAgICAgICAgICAgPHNwcmstZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgIFtjaG9pY2VzXT1cImxpbmsuc3ViTmF2XCJcbiAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxUcmlnZ2VyQ2xhc3Nlcz1cInNwcmstYi1MaW5rLS1wbGFpbiBzcHJrLWMtTWFzdGhlYWRfX2xpbmsgc3Byay1jLU1hc3RoZWFkX19saW5rLS1iaWctbmF2XCJcbiAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxDbGFzc2VzPVwic3Byay11LVRleHRBbGlnbi0tbGVmdFwiXG4gICAgICAgICAgICAgICAgICB0cmlnZ2VySWNvblR5cGU9XCJjaGV2cm9uLWRvd25cIlxuICAgICAgICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJsaW5rLmFuYWx5dGljc1N0cmluZ1wiXG4gICAgICAgICAgICAgICAgICBbdHJpZ2dlclRleHRdPVwibGluay50ZXh0XCJcbiAgICAgICAgICAgICAgICA+PC9zcHJrLWRyb3Bkb3duPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cIiFsaW5rLnN1Yk5hdlwiPlxuICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICBzcHJrTGlua1xuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInBsYWluXCJcbiAgICAgICAgICAgICAgICAgIFthbmFseXRpY3NTdHJpbmddPVwibGluay5hbmFseXRpY3NTdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRfX2xpbmsgc3Byay1jLU1hc3RoZWFkX19saW5rLS1iaWctbmF2XCJcbiAgICAgICAgICAgICAgICAgIFthdHRyLmhyZWZdPVwibGluay5ocmVmXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7eyBsaW5rLnRleHQgfX1cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICA8L25hdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8bmF2XG4gICAgICAgICpuZ0lmPVwiaXNOYXJyb3dOYXZPcGVuXCJcbiAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRfX25hcnJvdy1uYXZcIlxuICAgICAgICByb2xlPVwibmF2aWdhdGlvblwiXG4gICAgICAgIFtpZF09XCJuYXJyb3dOYXZJZFwiXG4gICAgICA+XG4gICAgICAgIDxzcHJrLWRyb3Bkb3duXG4gICAgICAgICAgKm5nSWY9XCJuYXJyb3dTZWxlY3RvclwiXG4gICAgICAgICAgZHJvcGRvd25UeXBlPVwibWFzdGhlYWRTZWxlY3RvclwiXG4gICAgICAgICAgYWRkaXRpb25hbENsYXNzZXM9XCJzcHJrLWMtTWFzdGhlYWRfX3NlbGVjdG9yLWRyb3Bkb3duXCJcbiAgICAgICAgICBhZGRpdGlvbmFsVHJpZ2dlckNsYXNzZXM9XCJcbiAgICAgICAgICAgIHNwcmstYy1NYXN0aGVhZF9fc2VsZWN0b3JcbiAgICAgICAgICAgIHNwcmstYi1MaW5rXG4gICAgICAgICAgICBzcHJrLWItTGluay0tcGxhaW5cbiAgICAgICAgICAgIHNwcmstby1TdGFja1xuICAgICAgICAgICAgc3Byay1vLVN0YWNrLS1zcGxpdEB4eHNcbiAgICAgICAgICAgIHNwcmstby1TdGFjay0tY2VudGVyLWNvbHVtblwiXG4gICAgICAgICAgYWRkaXRpb25hbFRyaWdnZXJUZXh0Q2xhc3Nlcz1cInNwcmstby1TdGFja19faXRlbSBzcHJrLW8tU3RhY2tfX2l0ZW0tLWZsZXhAeHhzXCJcbiAgICAgICAgICBhZGRpdGlvbmFsSWNvbkNsYXNzZXM9XCJzcHJrLVN0YWNrX19pdGVtIHNwcmstdS1tcnNcIlxuICAgICAgICAgIFt0cmlnZ2VyVGV4dF09XCJuYXJyb3dTZWxlY3RvclsndHJpZ2dlciddLnRleHRcIlxuICAgICAgICAgIHNlbGVjdG9yPVwiU2VsZWN0IE9uZVwiXG4gICAgICAgICAgdHJpZ2dlckljb25UeXBlPVwiY2hldnJvbi1kb3duXCJcbiAgICAgICAgICBbY2hvaWNlc109XCJuYXJyb3dTZWxlY3RvclsnY2hvaWNlcyddXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICpuZ0lmPVwibmFycm93U2VsZWN0b3JbJ2Zvb3RlciddXCJcbiAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLURyb3Bkb3duX19mb290ZXIgc3Byay11LVRleHRBbGlnbi0tY2VudGVyXCJcbiAgICAgICAgICAgIHNwcmtEcm9wZG93bkZvb3RlclxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgIHNwcmtMaW5rXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJ1bnN0eWxlZFwiXG4gICAgICAgICAgICAgIFthbmFseXRpY3NTdHJpbmddPVwibmFycm93U2VsZWN0b3JbJ2Zvb3RlciddLmFuYWx5dGljc1N0cmluZ1wiXG4gICAgICAgICAgICAgIFthdHRyLmhyZWZdPVwibmFycm93U2VsZWN0b3JbJ2Zvb3RlciddLmhyZWZcIlxuICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYy1CdXR0b24gc3Byay1jLUJ1dHRvbi0tdGVydGlhcnlcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7eyBuYXJyb3dTZWxlY3RvclsnZm9vdGVyJ10udGV4dCB9fVxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3NwcmstZHJvcGRvd24+XG5cbiAgICAgICAgPHNwcmstbWFzdGhlYWQtYWNjb3JkaW9uIFthZGRpdGlvbmFsQ2xhc3Nlc109XCJnZXROYXJyb3dOYXZDbGFzc2VzKClcIj5cbiAgICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCBuYXJyb3dMaW5rIG9mIG5hcnJvd05hdkxpbmtzXCI+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwibmFycm93TGluay5zdWJOYXZcIj5cbiAgICAgICAgICAgICAgPHNwcmstbWFzdGhlYWQtYWNjb3JkaW9uLWl0ZW1cbiAgICAgICAgICAgICAgICBpY29uVHlwZU9wZW49XCJjaGV2cm9uLWRvd25cIlxuICAgICAgICAgICAgICAgIGljb25UeXBlQ2xvc2VkPVwiY2hldnJvbi1kb3duXCJcbiAgICAgICAgICAgICAgICBbbGVhZGluZ0ljb25dPVwibmFycm93TGluay5sZWFkaW5nSWNvblwiXG4gICAgICAgICAgICAgICAgW2lzQWN0aXZlXT1cIm5hcnJvd0xpbmsuYWN0aXZlXCJcbiAgICAgICAgICAgICAgICBbdGl0bGVdPVwibmFycm93TGluay50ZXh0XCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDx1bFxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWItTGlzdCBzcHJrLWItTGlzdC0tYmFyZSBzcHJrLWMtTWFzdGhlYWRBY2NvcmRpb25fX2RldGFpbHNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYy1NYXN0aGVhZEFjY29yZGlvbl9faXRlbVwiXG4gICAgICAgICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBzdWJOYXZMaW5rIG9mIG5hcnJvd0xpbmsuc3ViTmF2XCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICBzcHJrTGlua1xuICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJ1bnN0eWxlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRBY2NvcmRpb25fX3N1bW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmhyZWZdPVwic3ViTmF2TGluay5ocmVmXCJcbiAgICAgICAgICAgICAgICAgICAgICBbYW5hbHl0aWNzU3RyaW5nXT1cInN1Yk5hdkxpbmsuYW5hbHl0aWNzU3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcHJrLWljb25cbiAgICAgICAgICAgICAgICAgICAgICAgIFtpY29uVHlwZV09XCJzdWJOYXZMaW5rLmxlYWRpbmdJY29uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxDbGFzc2VzPVwic3Byay1jLUljb24tLXN0cm9rZS1jdXJyZW50LWNvbG9yIHNwcmstdS1tcnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJzdWJOYXZMaW5rLmxlYWRpbmdJY29uXCJcbiAgICAgICAgICAgICAgICAgICAgICA+PC9zcHJrLWljb24+XG4gICAgICAgICAgICAgICAgICAgICAge3sgc3ViTmF2TGluay50ZXh0IH19XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgPC9zcHJrLW1hc3RoZWFkLWFjY29yZGlvbi1pdGVtPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIW5hcnJvd0xpbmsuc3ViTmF2XCI+XG4gICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAgICdzcHJrLWMtTWFzdGhlYWRBY2NvcmRpb25fX2l0ZW0nOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgJ3NwcmstYy1NYXN0aGVhZEFjY29yZGlvbl9faXRlbS0tYWN0aXZlJzogbmFycm93TGluay5hY3RpdmVcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICBzcHJrTGlua1xuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInVuc3R5bGVkXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLU1hc3RoZWFkQWNjb3JkaW9uX19zdW1tYXJ5XCJcbiAgICAgICAgICAgICAgICAgIFthdHRyLmhyZWZdPVwibmFycm93TGluay5ocmVmXCJcbiAgICAgICAgICAgICAgICAgIFthbmFseXRpY3NTdHJpbmddPVwibmFycm93TGluay5hbmFseXRpY3NTdHJpbmdcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3Byay1jLU1hc3RoZWFkQWNjb3JkaW9uX19oZWFkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcHJrLWljb25cbiAgICAgICAgICAgICAgICAgICAgICBbaWNvblR5cGVdPVwibmFycm93TGluay5sZWFkaW5nSWNvblwiXG4gICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbENsYXNzZXM9XCJzcHJrLWMtSWNvbi0tc3Ryb2tlLWN1cnJlbnQtY29sb3Igc3Byay11LW1yc1wiXG4gICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJuYXJyb3dMaW5rLmxlYWRpbmdJY29uXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvc3Byay1pY29uPlxuICAgICAgICAgICAgICAgICAgICB7eyBuYXJyb3dMaW5rLnRleHQgfX1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9zcHJrLW1hc3RoZWFkLWFjY29yZGlvbj5cbiAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW25hcnJvd05hdkZvb3Rlcl1cIj48L25nLWNvbnRlbnQ+XG4gICAgICA8L25hdj5cbiAgICA8L2hlYWRlcj5cbiAgYFxufSlcbmV4cG9ydCBjbGFzcyBTcHJrTWFzdGhlYWRDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRJbml0IHtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMiwgcm91dGVyOiBSb3V0ZXIpIHtcbiAgICByb3V0ZXIuZXZlbnRzLnN1YnNjcmliZSgoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kKSB7XG4gICAgICAgIHRoaXMuY2xvc2VOYXJyb3dOYXYoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gLyoqXG4gICogIFRoZSBgaHJlZmAgdmFsdWUgb2YgdGhlIGxvZ28uXG4gICovXG4gIEBJbnB1dCgpXG4gIGxvZ29IcmVmID0gJy8nO1xuICAvKipcbiAgICogVGhlIHZhbHVlIHN1cHBsaWVkIHdpbGwgYmUgdXNlZCBhc1xuICAgKiBzY3JlZW4gcmVhZGVyIHRleHQgdGhhdCBpcyB2aXN1YWxseSBoaWRkZW5cbiAgICogZm9yIHRoZSBsaW5rIHRoYXQgd3JhcHMgdGhlIGxvZ28uXG4gICAqL1xuICBASW5wdXQoKVxuICBsb2dvTGlua1NjcmVlblJlYWRlclRleHQgPSAnR28gdG8gdGhlIGhvbWVwYWdlJztcbiAgLyoqXG4gICAqIEV4cGVjdHMgYSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nXG4gICAqIG9mIGNsYXNzZXMgdG8gYmUgYWRkZWQgdG8gdGhlXG4gICAqIGNvbXBvbmVudC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGFkZGl0aW9uYWxDbGFzc2VzOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBFeHBlY3RzIGEgc3BhY2Ugc2VwYXJhdGVkIHN0cmluZ1xuICAgKiBvZiBjbGFzc2VzIHRvIGJlIGFkZGVkIHRvIHRoZVxuICAgKiBiaWcgbmF2aWdhdGlvbiBsaW5rIGNvbnRhaW5lci5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGFkZGl0aW9uYWxCaWdOYXZDbGFzc2VzOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBFeHBlY3RzIGEgc3BhY2Ugc2VwYXJhdGVkIHN0cmluZ1xuICAgKiBvZiBjbGFzc2VzIHRvIGJlIGFkZGVkIHRvIHRoZVxuICAgKiBuYXJyb3cgbmF2aWdhdGlvbiBjb250YWluZXIuXG4gICAqL1xuICBASW5wdXQoKVxuICBhZGRpdGlvbmFsTmFycm93TmF2Q2xhc3Nlczogc3RyaW5nO1xuICAvKipcbiAgICogRXhwZWN0cyBhbiBhcnJheSBvZlxuICAgKiBbSVNwcmtOYXJyb3dOYXZMaW5rXShodHRwczovL2dpdGh1Yi5jb20vc3BhcmtkZXNpZ25zeXN0ZW0vc3BhcmstZGVzaWduLXN5c3RlbS90cmVlL21hc3Rlci9zcmMvYW5ndWxhci9wcm9qZWN0cy9zcGFyay1hbmd1bGFyL3NyYy9saWIvY29tcG9uZW50cy9zcHJrLW1hc3RoZWFkL3NwcmstbWFzdGhlYWQuaW50ZXJmYWNlcy50cylcbiAgICogdG8gYmVcbiAgICogcmVwcmVzZW50ZWQgaW4gdGhlIG5hcnJvdyBuYXYgZWxlbWVudFxuICAgKiBvZiB0aGUgTWFzdGhlYWQgY29tcG9uZW50LlxuICAgKi9cbiAgQElucHV0KClcbiAgbmFycm93TmF2TGlua3M6IElTcHJrTmFycm93TmF2TGlua1tdO1xuICAvKipcbiAgICogUmVwcmVzZW50cyB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGVcbiAgICogbmFycm93IG5hdiBlbGVtZW50IG9mIHRoZSBNYXN0aGVhZCBjb21wb25lbnQuXG4gICAqL1xuICBASW5wdXQoKVxuICBpc05hcnJvd05hdk9wZW4gPSBmYWxzZTtcbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBzdXBwbGllZCB3aWxsIGJlIGFzc2lnbmVkXG4gICAqIHRvIHRoZSBgZGF0YS1pZGAgYXR0cmlidXRlIG9uIHRoZVxuICAgKiBjb21wb25lbnQuIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmVcbiAgICogdXNlZCBhcyBhIHNlbGVjdG9yIGZvciBhdXRvbWF0ZWRcbiAgICogdG9vbHMuIFRoaXMgdmFsdWUgc2hvdWxkIGJlIHVuaXF1ZVxuICAgKiBwZXIgcGFnZS5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGlkU3RyaW5nOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBFeHBlY3RzIGFuIGFycmF5IG9mXG4gICAqIFtJU3Bya0JpZ05hdkxpbmtdKGh0dHBzOi8vZ2l0aHViLmNvbS9zcGFya2Rlc2lnbnN5c3RlbS9zcGFyay1kZXNpZ24tc3lzdGVtL3RyZWUvbWFzdGVyL3NyYy9hbmd1bGFyL3Byb2plY3RzL3NwYXJrLWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL3NwcmstbWFzdGhlYWQvc3Byay1tYXN0aGVhZC5pbnRlcmZhY2VzLnRzKVxuICAgKiB0byBiZVxuICAgKiB1c2VkIHRvIGNyZWF0ZSB0aGUgQmlnIE5hdmlnYXRpb24gb2ZcbiAgICogdGhlIE1hc3RoZWFkIGNvbXBvbmVudC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGJpZ05hdkxpbmtzOiBJU3Bya0JpZ05hdkxpbmtbXTtcbiAgLyoqXG4gICAqIEV4cGVjdHMgYSBbSVNwcmtOYXJyb3dTZWxlY3Rvcl0oaHR0cHM6Ly9naXRodWIuY29tL3NwYXJrZGVzaWduc3lzdGVtL3NwYXJrLWRlc2lnbi1zeXN0ZW0vdHJlZS9tYXN0ZXIvc3JjL2FuZ3VsYXIvcHJvamVjdHMvc3BhcmstYW5ndWxhci9zcmMvbGliL2NvbXBvbmVudHMvc3Byay1tYXN0aGVhZC9zcHJrLW1hc3RoZWFkLmludGVyZmFjZXMudHMpXG4gICAqIG9iamVjdCB0aGF0XG4gICAqIHJlcHJlc2VudHMgZHJvcGRvd24gY2hvaWNlcyBpbnNpZGUgdGhlIGRyb3Bkb3duXG4gICAqIHJlbmRlcmVkIGluIHRoZSBOYXJyb3cgTmF2aWdhdGlvbi5cbiAgICovXG4gIEBJbnB1dCgpXG4gIG5hcnJvd1NlbGVjdG9yOiBJU3Bya05hcnJvd1NlbGVjdG9yO1xuICAvKipcbiAgICogQSBzdHJpbmcgdGhhdCBpcyB1c2VkIHRvIHNldCB0aGUgYGlkYCBvbiB0aGUgbmFycm93IG5hdlxuICAgKiBhbmQgdGhlIGBhcmlhLWNvbnRyb2xzYCBmb3IgdGhlIG1lbnUgdHJpZ2dlciBidXR0b24uXG4gICAqL1xuICBASW5wdXQoKVxuICBuYXJyb3dOYXZJZCA9IF8udW5pcXVlSWQoYHNwcmtfbWFzdGhlYWRfbmFycm93X25hdl9gKTtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaWNvblR5cGUgPSAnY2hldnJvbi1kb3duJztcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGNvbXBvbmVudElEID0gXy51bmlxdWVJZCgpO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgY29udHJvbHNfaWQgPSBgc3Byay1uYXJyb3ctbmF2aWdhdGlvbi1pdGVtX18ke3RoaXMuY29tcG9uZW50SUR9YDtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGlzU2Nyb2xsZWQgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGlzTmFycm93TGF5b3V0ID0gZmFsc2U7XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBzY3JvbGxEaXJlY3Rpb24gPSAndXAnO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaXNIaWRkZW4gPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGlzTmFycm93T25SZXNpemUgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHNjcm9sbFBvc2l0aW9uID0gMDtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHRocm90dGxlZENoZWNrU2Nyb2xsRGlyZWN0aW9uID0gXy50aHJvdHRsZSh0aGlzLmNoZWNrU2Nyb2xsRGlyZWN0aW9uLCA1MDApO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgdGhyb3R0bGVkVXBkYXRlTGF5b3V0U3RhdGUgPSBfLnRocm90dGxlKHRoaXMudXBkYXRlTGF5b3V0U3RhdGUsIDUwMCk7XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICogQ2xvc2VzIHRoZSBuYXJyb3cgbmF2aWdhdGlvbiBtZW51XG4gICAqIGlmIGl0IGlzIGxlZnQgb3BlbiB3aGVuXG4gICAqIHRoZSB2aWV3cG9ydCBpcyBleHBhbmRlZC5cbiAgICovXG4gIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpvcmllbnRhdGlvbmNoYW5nZScpXG4gIGhhbmRsZVJlc2l6ZUV2ZW50KCkge1xuICAgIHRoaXMuY2xvc2VOYXJyb3dOYXYoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6c2Nyb2xsJywgWyckZXZlbnQnXSlcbiAgb25TY3JvbGwoZXZlbnQpOiB2b2lkIHtcbiAgICB3aW5kb3cuc2Nyb2xsWSA+PSAxMCA/ICh0aGlzLmlzU2Nyb2xsZWQgPSB0cnVlKSA6ICh0aGlzLmlzU2Nyb2xsZWQgPSBmYWxzZSk7XG4gICAgaWYgKHRoaXMuaXNOYXJyb3dMYXlvdXQpIHtcbiAgICAgIHRoaXMudGhyb3R0bGVkQ2hlY2tTY3JvbGxEaXJlY3Rpb24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKiBIYW5kbGVzIHdoZW4gdmlld3BvcnQgc2l6ZSBjaGFuZ2VzIHRvXG4gICAqIGxhcmdlIHdoaWxlIG5hcnJvdyBuYXYgaXMgaGlkZGVuLlxuICAgKi9cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScsIFsnJGV2ZW50J10pXG4gIG9uUmVzaXplKGV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5pc05hcnJvd09uUmVzaXplID0gdGhpcy5pc0VsZW1lbnRWaXNpYmxlKCcuc3Byay1jLU1hc3RoZWFkX19tZW51Jyk7XG4gICAgdGhpcy50aHJvdHRsZWRVcGRhdGVMYXlvdXRTdGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHVwZGF0ZUxheW91dFN0YXRlKCkge1xuICAgIGlmICh0aGlzLmlzTmFycm93TGF5b3V0ICE9PSB0aGlzLmlzTmFycm93T25SZXNpemUpIHtcbiAgICAgIHRoaXMuaXNOYXJyb3dMYXlvdXQgPSB0aGlzLmlzTmFycm93T25SZXNpemU7XG5cbiAgICAgIC8vIElmIGlzIG5vdCBuYXJyb3cgb24gcmVzaXplIHVwZGF0ZSwgbWFrZSBzdXJlIGl0J3MgdmlzaWJsZVxuICAgICAgaWYgKCF0aGlzLmlzTmFycm93TGF5b3V0KSB7XG4gICAgICAgIHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgIHRoaXMuaXNOYXJyb3dMYXlvdXQgPSB0aGlzLmlzRWxlbWVudFZpc2libGUoJy5zcHJrLWMtTWFzdGhlYWRfX21lbnUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBpc0VsZW1lbnRWaXNpYmxlKHNlbGVjdG9yKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7IHJldHVybjsgfVxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZWxlbWVudERpc3BsYXlWYWx1ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmRpc3BsYXk7XG4gICAgY29uc3QgZWxlbWVudFZpc2liaWxpdHlWYWx1ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnZpc2liaWxpdHk7XG4gICAgY29uc3QgZWxlbWVudElzVmlzaWJsZSA9XG4gICAgICBlbGVtZW50RGlzcGxheVZhbHVlID09PSAnbm9uZScgfHwgZWxlbWVudFZpc2liaWxpdHlWYWx1ZSA9PT0gJ2hpZGRlbidcbiAgICAgICAgPyBmYWxzZVxuICAgICAgICA6IHRydWU7XG4gICAgcmV0dXJuIGVsZW1lbnRJc1Zpc2libGU7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgc2Nyb2xsWURpcmVjdGlvbigpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IG5ld1Njcm9sbFBvcyA9IHdpbmRvdy5zY3JvbGxZO1xuICAgICAgaWYgKG5ld1Njcm9sbFBvcyA8IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZGlmZiA9IG5ld1Njcm9sbFBvcyAtIHRoaXMuc2Nyb2xsUG9zaXRpb247XG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBkaWZmID4gMCA/ICdkb3duJyA6ICd1cCc7XG4gICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0gbmV3U2Nyb2xsUG9zO1xuICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgY2hlY2tTY3JvbGxEaXJlY3Rpb24oKSB7XG4gICAgY29uc3QgbmV3RGlyZWN0aW9uID0gdGhpcy5zY3JvbGxZRGlyZWN0aW9uKCk7XG4gICAgaWYgKHRoaXMuc2Nyb2xsRGlyZWN0aW9uICE9PSBuZXdEaXJlY3Rpb24pIHtcbiAgICAgIHRoaXMuc2Nyb2xsRGlyZWN0aW9uID0gbmV3RGlyZWN0aW9uO1xuICAgICAgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPT09ICdkb3duJ1xuICAgICAgICA/ICh0aGlzLmlzSGlkZGVuID0gdHJ1ZSlcbiAgICAgICAgOiAodGhpcy5pc0hpZGRlbiA9IGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ2V0Q2xhc3NlcygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNsYXNzQXJyYXk6IHN0cmluZ1tdID0gWydzcHJrLWMtTWFzdGhlYWQnLCAnc3Byay1vLVN0YWNrJ107XG5cbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsQ2xhc3Nlcykge1xuICAgICAgdGhpcy5hZGRpdGlvbmFsQ2xhc3Nlcy5zcGxpdCgnICcpLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgY2xhc3NBcnJheS5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc05hcnJvd05hdk9wZW4pIHtcbiAgICAgIGNsYXNzQXJyYXkucHVzaCgnc3Byay1jLU1hc3RoZWFkLS1vcGVuJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNTY3JvbGxlZCkge1xuICAgICAgY2xhc3NBcnJheS5wdXNoKCdzcHJrLWMtTWFzdGhlYWQtLXNjcm9sbCcpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzSGlkZGVuKSB7XG4gICAgICBjbGFzc0FycmF5LnB1c2goJ3NwcmstYy1NYXN0aGVhZC0taGlkZGVuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzQXJyYXkuam9pbignICcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGdldE5hcnJvd05hdkNsYXNzZXMoKTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGFzc0FycmF5OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuYWRkaXRpb25hbE5hcnJvd05hdkNsYXNzZXMpIHtcbiAgICAgIHRoaXMuYWRkaXRpb25hbE5hcnJvd05hdkNsYXNzZXMuc3BsaXQoJyAnKS5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIGNsYXNzQXJyYXkucHVzaChjbGFzc05hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzQXJyYXkuam9pbignICcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGdldFNlY29uZGFyeU5hdkNsYXNzZXMoKTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGFzc0FycmF5OiBzdHJpbmdbXSA9IFtcbiAgICAgICdzcHJrLWMtTWFzdGhlYWRfX2JpZy1uYXYtaXRlbXMnLFxuICAgICAgJ3Nwcmstby1TdGFjaycsXG4gICAgICAnc3Byay1vLVN0YWNrLS1taXNjLWEnLFxuICAgICAgJ3Nwcmstby1TdGFjay0tY2VudGVyLXJvdycsXG4gICAgICAnc3Byay1vLVN0YWNrLS1zcGxpdEB4eHMnLFxuICAgICAgJ3NwcmstYi1MaXN0JyxcbiAgICAgICdzcHJrLWItTGlzdC0tYmFyZSdcbiAgICBdO1xuXG4gICAgaWYgKHRoaXMuYWRkaXRpb25hbEJpZ05hdkNsYXNzZXMpIHtcbiAgICAgIHRoaXMuYWRkaXRpb25hbEJpZ05hdkNsYXNzZXMuc3BsaXQoJyAnKS5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIGNsYXNzQXJyYXkucHVzaChjbGFzc05hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzQXJyYXkuam9pbignICcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHRvZ2dsZU5hcnJvd05hdihldmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHRoaXMuaXNOYXJyb3dOYXZPcGVuKSB7XG4gICAgICB0aGlzLmNsb3NlTmFycm93TmF2KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3Blbk5hcnJvd05hdigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBvcGVuTmFycm93TmF2KCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ3NwcmstdS1PdmVyZmxvdy0taGlkZGVuJyk7XG4gICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhcbiAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudCxcbiAgICAgICdzcHJrLXUtT3ZlcmZsb3ctLWhpZGRlbidcbiAgICApO1xuICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ3NwcmstdS1IZWlnaHQtLTEwMCcpO1xuICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LCAnc3Byay11LUhlaWdodC0tMTAwJyk7XG4gICAgdGhpcy5pc05hcnJvd05hdk9wZW4gPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGNsb3NlTmFycm93TmF2KCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ3NwcmstdS1PdmVyZmxvdy0taGlkZGVuJyk7XG4gICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyhcbiAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudCxcbiAgICAgICdzcHJrLXUtT3ZlcmZsb3ctLWhpZGRlbidcbiAgICApO1xuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ3NwcmstdS1IZWlnaHQtLTEwMCcpO1xuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoXG4gICAgICBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQsXG4gICAgICAnc3Byay11LUhlaWdodC0tMTAwJ1xuICAgICk7XG4gICAgdGhpcy5pc05hcnJvd05hdk9wZW4gPSBmYWxzZTtcbiAgfVxufVxuIl19