import { __decorate, __metadata } from "tslib";
import { Component, Input, Output, ElementRef, HostListener, EventEmitter } from '@angular/core';
let SprkDropdownComponent = class SprkDropdownComponent {
    /**
     * @ignore
     */
    constructor(ref) {
        this.ref = ref;
        /**
         * The variant of the Dropdown to render.
         */
        this.dropdownType = 'base';
        /**
         * If `true`, the Dropdown will be open when rendered.
         */
        this.isOpen = false;
        /**
         * The event that is
         * emitted from the Dropdown when a choice
         * is clicked. The event contains the value
         * of the choice that was clicked.
         */
        this.choiceMade = new EventEmitter();
    }
    /**
     * @ignore
     */
    toggle(event) {
        event.preventDefault();
        this.isOpen = !this.isOpen;
    }
    onClick(event) {
        if (!this.ref.nativeElement.contains(event.target) ||
            event.target.classList.contains('sprk-c-MastheadMask')) {
            this.hideDropdown();
        }
    }
    onFocusin(event) {
        /* istanbul ignore else: angular focus event isnt setting e.target */
        if (!this.ref.nativeElement.contains(event.target) ||
            event.target.classList.contains('sprk-c-MastheadMask')) {
            this.hideDropdown();
        }
    }
    /**
     * @ignore
     */
    choiceClick(event) {
        this.clearActiveChoices();
        const choiceIndex = event.currentTarget.getAttribute('data-sprk-dropdown-choice-index');
        const clickedChoice = this.choices[choiceIndex];
        if (this.dropdownType === 'informational' ||
            this.dropdownType === 'mastheadSelector') {
            this.setActiveChoice(event);
            this.updateTriggerText(event);
        }
        this.hideDropdown();
        this.choiceMade.emit(clickedChoice['value']);
    }
    /**
     * @ignore
     */
    setActiveChoice(event) {
        const choiceIndex = event.currentTarget.getAttribute('data-sprk-dropdown-choice-index');
        this.choices[choiceIndex]['active'] = true;
    }
    /**
     * @ignore
     */
    updateTriggerText(event) {
        const choiceIndex = event.currentTarget.getAttribute('data-sprk-dropdown-choice-index');
        this.triggerText = this.choices[choiceIndex]['value'];
    }
    /**
     * @ignore
     */
    clearActiveChoices() {
        this.choices.forEach((choice) => {
            choice['active'] = false;
        });
    }
    /**
     * @ignore
     */
    hideDropdown() {
        this.isOpen = false;
    }
    /**
     * @ignore
     */
    getClasses() {
        const classArray = ['sprk-c-Dropdown'];
        if (this.additionalClasses) {
            this.additionalClasses.split(' ').forEach(className => {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    }
    /**
     * @ignore
     */
    getTriggerClasses() {
        const classArray = [];
        if (this.additionalTriggerClasses) {
            this.additionalTriggerClasses.split(' ').forEach(className => {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    }
    /**
     * @ignore
     */
    getTriggerTextClasses() {
        const classArray = [''];
        if (this.additionalTriggerTextClasses) {
            this.additionalTriggerTextClasses.split(' ').forEach(className => {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    }
};
SprkDropdownComponent.ctorParameters = () => [
    { type: ElementRef }
];
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkDropdownComponent.prototype, "dropdownType", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "additionalClasses", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "additionalIconClasses", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "additionalTriggerClasses", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "additionalTriggerTextClasses", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "idString", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "analyticsString", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], SprkDropdownComponent.prototype, "isOpen", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "title", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "selector", void 0);
__decorate([
    Input(),
    __metadata("design:type", Array)
], SprkDropdownComponent.prototype, "choices", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "triggerIconType", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "triggerText", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SprkDropdownComponent.prototype, "screenReaderText", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], SprkDropdownComponent.prototype, "choiceMade", void 0);
__decorate([
    HostListener('document:click', ['$event']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", void 0)
], SprkDropdownComponent.prototype, "onClick", null);
__decorate([
    HostListener('document:focusin', ['$event']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", void 0)
], SprkDropdownComponent.prototype, "onFocusin", null);
SprkDropdownComponent = __decorate([
    Component({
        selector: 'sprk-dropdown',
        template: `
    <div
      [ngClass]="{
        'sprk-c-MastheadMask': isOpen && dropdownType === 'mastheadSelector'
      }"
    >
      <div [ngClass]="{ 'sprk-o-Box': dropdownType === 'mastheadSelector' }">
        <a
          sprkLink
          [ngClass]="getTriggerClasses()"
          (click)="toggle($event)"
          [idString]="idString"
          [analyticsString]="analyticsString"
          aria-haspopup="listbox"
          href="#"
          [attr.aria-label]="triggerText ? triggerText : (screenReaderText || 'Choose One')"
        >
          <span [ngClass]="getTriggerTextClasses()">{{ triggerText }}</span>
          <span class="sprk-u-ScreenReaderText">{{ screenReaderText }}</span>
          <sprk-icon
            [iconType]="triggerIconType"
            additionalClasses="sprk-u-mls sprk-c-Icon--stroke-current-color {{
              additionalIconClasses
            }}"
          ></sprk-icon>
        </a>
      </div>

      <div [ngClass]="getClasses()" *ngIf="isOpen">
        <div
          class="sprk-c-Dropdown__header"
          *ngIf="dropdownType === 'mastheadSelector' || title || selector"
        >
          <h2 class="sprk-c-Dropdown__title sprk-b-TypeBodyTwo" *ngIf="title">
            {{ title }}
          </h2>

          <a
            sprkLink
            *ngIf="selector && !title"
            variant="plain"
            class="sprk-o-Stack sprk-o-Stack--split@xxs sprk-o-Stack--center-column sprk-u-Width-100"
            (click)="toggle($event)"
            [attr.aria-label]="title"
            href="#"
          >
            <span
              class="sprk-c-Dropdown__title sprk-b-TypeBodyTwo sprk-o-Stack__item sprk-o-Stack__item--flex@xxs"
              >{{ selector }}</span
            >
            <sprk-icon
              [iconType]="triggerIconType"
              additionalClasses="sprk-c-Icon--stroke-current-color sprk-u-mls sprk-c-Icon--toggle sprk-Stack__item {{
                additionalIconClasses
              }}"
            ></sprk-icon>
          </a>
        </div>

        <ul
          class="sprk-c-Dropdown__links"
          role="listbox"
          [attr.aria-label]="title ? title : (screenReaderText || 'My Choices')"
        >
          <li
            class="sprk-c-Dropdown__item"
            *ngFor="let choice of choices; let i = index"
            [attr.data-sprk-dropdown-choice-index]="i"
            (click)="choiceClick($event)"
            [attr.aria-selected]="choice.active"
            role="option"
          >
            <div *ngIf="choice.content; then content; else link"></div>
            <ng-template #link>
              <a
                sprkLink
                variant="unstyled"
                [attr.href]="choice.href"
                [analyticsString]="choice.analyticsString"
                [ngClass]="{
                  'sprk-c-Dropdown__link': true,
                  'sprk-c-Dropdown__link--active': choice.active
                }"
                [attr.aria-label]="choice.text"
                >{{ choice.text }}
              </a>
            </ng-template>
            <ng-template #content>
              <a
                sprkLink
                variant="unstyled"
                [attr.href]="choice.href"
                [analyticsString]="choice.analyticsString"
                [ngClass]="{
                  'sprk-c-Dropdown__link': true,
                  'sprk-c-Dropdown__link--active': choice.active
                }"
                [attr.aria-label]="choice.content.title"
              >
                <p class="sprk-b-TypeBodyOne">{{ choice.content.title }}</p>
                <p>{{ choice.content.infoLine1 }}</p>
                <p>{{ choice.content.infoLine2 }}</p>
              </a>
            </ng-template>
          </li>
        </ul>
        <ng-content select="[sprkDropdownFooter]"></ng-content>
      </div>
    </div>
  `
    }),
    __metadata("design:paramtypes", [ElementRef])
], SprkDropdownComponent);
export { SprkDropdownComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Byay1kcm9wZG93bi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcmtkZXNpZ25zeXN0ZW0vc3BhcmstYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3NwcmstZHJvcGRvd24vc3Byay1kcm9wZG93bi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixVQUFVLEVBQ1YsWUFBWSxFQUNaLFlBQVksRUFDYixNQUFNLGVBQWUsQ0FBQztBQW9IdkIsSUFBYSxxQkFBcUIsR0FBbEMsTUFBYSxxQkFBcUI7SUF1R2hDOztPQUVHO0lBQ0gsWUFBbUIsR0FBZTtRQUFmLFFBQUcsR0FBSCxHQUFHLENBQVk7UUF6R2xDOztXQUVHO1FBRUgsaUJBQVksR0FBRyxNQUFNLENBQUM7UUE2Q3RCOztXQUVHO1FBRUgsV0FBTSxHQUFHLEtBQUssQ0FBQztRQXlDZjs7Ozs7V0FLRztRQUVILGVBQVUsR0FBeUIsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQUlqQixDQUFDO0lBQ3RDOztPQUVHO0lBQ0gsTUFBTSxDQUFDLEtBQUs7UUFDVixLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDN0IsQ0FBQztJQUdELE9BQU8sQ0FBQyxLQUFLO1FBQ1gsSUFDRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1lBQzlDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxFQUN0RDtZQUNBLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztTQUNyQjtJQUNILENBQUM7SUFHRCxTQUFTLENBQUMsS0FBSztRQUNiLHFFQUFxRTtRQUNyRSxJQUNFLENBQUMsSUFBSSxD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U0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLGVBQWU7UUFDekIsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBNkdUO0tBQ0YsQ0FBQztxQ0EyR3dCLFVBQVU7R0ExR3ZCLHFCQUFxQixDQXlPakM7U0F6T1kscUJBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBFbGVtZW50UmVmLFxuICBIb3N0TGlzdGVuZXIsXG4gIEV2ZW50RW1pdHRlclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IElTcHJrRHJvcGRvd25DaG9pY2UgfSBmcm9tICcuL3NwcmstZHJvcGRvd24uaW50ZXJmYWNlcyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3NwcmstZHJvcGRvd24nLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxkaXZcbiAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgJ3NwcmstYy1NYXN0aGVhZE1hc2snOiBpc09wZW4gJiYgZHJvcGRvd25UeXBlID09PSAnbWFzdGhlYWRTZWxlY3RvcidcbiAgICAgIH1cIlxuICAgID5cbiAgICAgIDxkaXYgW25nQ2xhc3NdPVwieyAnc3Byay1vLUJveCc6IGRyb3Bkb3duVHlwZSA9PT0gJ21hc3RoZWFkU2VsZWN0b3InIH1cIj5cbiAgICAgICAgPGFcbiAgICAgICAgICBzcHJrTGlua1xuICAgICAgICAgIFtuZ0NsYXNzXT1cImdldFRyaWdnZXJDbGFzc2VzKClcIlxuICAgICAgICAgIChjbGljayk9XCJ0b2dnbGUoJGV2ZW50KVwiXG4gICAgICAgICAgW2lkU3RyaW5nXT1cImlkU3RyaW5nXCJcbiAgICAgICAgICBbYW5hbHl0aWNzU3RyaW5nXT1cImFuYWx5dGljc1N0cmluZ1wiXG4gICAgICAgICAgYXJpYS1oYXNwb3B1cD1cImxpc3Rib3hcIlxuICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cInRyaWdnZXJUZXh0ID8gdHJpZ2dlclRleHQgOiAoc2NyZWVuUmVhZGVyVGV4dCB8fCAnQ2hvb3NlIE9uZScpXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxzcGFuIFtuZ0NsYXNzXT1cImdldFRyaWdnZXJUZXh0Q2xhc3NlcygpXCI+e3sgdHJpZ2dlclRleHQgfX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzcHJrLXUtU2NyZWVuUmVhZGVyVGV4dFwiPnt7IHNjcmVlblJlYWRlclRleHQgfX08L3NwYW4+XG4gICAgICAgICAgPHNwcmstaWNvblxuICAgICAgICAgICAgW2ljb25UeXBlXT1cInRyaWdnZXJJY29uVHlwZVwiXG4gICAgICAgICAgICBhZGRpdGlvbmFsQ2xhc3Nlcz1cInNwcmstdS1tbHMgc3Byay1jLUljb24tLXN0cm9rZS1jdXJyZW50LWNvbG9yIHt7XG4gICAgICAgICAgICAgIGFkZGl0aW9uYWxJY29uQ2xhc3Nlc1xuICAgICAgICAgICAgfX1cIlxuICAgICAgICAgID48L3NwcmstaWNvbj5cbiAgICAgICAgPC9hPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgW25nQ2xhc3NdPVwiZ2V0Q2xhc3NlcygpXCIgKm5nSWY9XCJpc09wZW5cIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzPVwic3Byay1jLURyb3Bkb3duX19oZWFkZXJcIlxuICAgICAgICAgICpuZ0lmPVwiZHJvcGRvd25UeXBlID09PSAnbWFzdGhlYWRTZWxlY3RvcicgfHwgdGl0bGUgfHwgc2VsZWN0b3JcIlxuICAgICAgICA+XG4gICAgICAgICAgPGgyIGNsYXNzPVwic3Byay1jLURyb3Bkb3duX190aXRsZSBzcHJrLWItVHlwZUJvZHlUd29cIiAqbmdJZj1cInRpdGxlXCI+XG4gICAgICAgICAgICB7eyB0aXRsZSB9fVxuICAgICAgICAgIDwvaDI+XG5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgc3Bya0xpbmtcbiAgICAgICAgICAgICpuZ0lmPVwic2VsZWN0b3IgJiYgIXRpdGxlXCJcbiAgICAgICAgICAgIHZhcmlhbnQ9XCJwbGFpblwiXG4gICAgICAgICAgICBjbGFzcz1cInNwcmstby1TdGFjayBzcHJrLW8tU3RhY2stLXNwbGl0QHh4cyBzcHJrLW8tU3RhY2stLWNlbnRlci1jb2x1bW4gc3Byay11LVdpZHRoLTEwMFwiXG4gICAgICAgICAgICAoY2xpY2spPVwidG9nZ2xlKCRldmVudClcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJ0aXRsZVwiXG4gICAgICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWMtRHJvcGRvd25fX3RpdGxlIHNwcmstYi1UeXBlQm9keVR3byBzcHJrLW8tU3RhY2tfX2l0ZW0gc3Byay1vLVN0YWNrX19pdGVtLS1mbGV4QHh4c1wiXG4gICAgICAgICAgICAgID57eyBzZWxlY3RvciB9fTwvc3BhblxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPHNwcmstaWNvblxuICAgICAgICAgICAgICBbaWNvblR5cGVdPVwidHJpZ2dlckljb25UeXBlXCJcbiAgICAgICAgICAgICAgYWRkaXRpb25hbENsYXNzZXM9XCJzcHJrLWMtSWNvbi0tc3Ryb2tlLWN1cnJlbnQtY29sb3Igc3Byay11LW1scyBzcHJrLWMtSWNvbi0tdG9nZ2xlIHNwcmstU3RhY2tfX2l0ZW0ge3tcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsSWNvbkNsYXNzZXNcbiAgICAgICAgICAgICAgfX1cIlxuICAgICAgICAgICAgPjwvc3Byay1pY29uPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPHVsXG4gICAgICAgICAgY2xhc3M9XCJzcHJrLWMtRHJvcGRvd25fX2xpbmtzXCJcbiAgICAgICAgICByb2xlPVwibGlzdGJveFwiXG4gICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJ0aXRsZSA/IHRpdGxlIDogKHNjcmVlblJlYWRlclRleHQgfHwgJ015IENob2ljZXMnKVwiXG4gICAgICAgID5cbiAgICAgICAgICA8bGlcbiAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLURyb3Bkb3duX19pdGVtXCJcbiAgICAgICAgICAgICpuZ0Zvcj1cImxldCBjaG9pY2Ugb2YgY2hvaWNlczsgbGV0IGkgPSBpbmRleFwiXG4gICAgICAgICAgICBbYXR0ci5kYXRhLXNwcmstZHJvcGRvd24tY2hvaWNlLWluZGV4XT1cImlcIlxuICAgICAgICAgICAgKGNsaWNrKT1cImNob2ljZUNsaWNrKCRldmVudClcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1zZWxlY3RlZF09XCJjaG9pY2UuYWN0aXZlXCJcbiAgICAgICAgICAgIHJvbGU9XCJvcHRpb25cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJjaG9pY2UuY29udGVudDsgdGhlbiBjb250ZW50OyBlbHNlIGxpbmtcIj48L2Rpdj5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjbGluaz5cbiAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICBzcHJrTGlua1xuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJ1bnN0eWxlZFwiXG4gICAgICAgICAgICAgICAgW2F0dHIuaHJlZl09XCJjaG9pY2UuaHJlZlwiXG4gICAgICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJjaG9pY2UuYW5hbHl0aWNzU3RyaW5nXCJcbiAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICAgICAnc3Byay1jLURyb3Bkb3duX19saW5rJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICdzcHJrLWMtRHJvcGRvd25fX2xpbmstLWFjdGl2ZSc6IGNob2ljZS5hY3RpdmVcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImNob2ljZS50ZXh0XCJcbiAgICAgICAgICAgICAgICA+e3sgY2hvaWNlLnRleHQgfX1cbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjY29udGVudD5cbiAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICBzcHJrTGlua1xuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJ1bnN0eWxlZFwiXG4gICAgICAgICAgICAgICAgW2F0dHIuaHJlZl09XCJjaG9pY2UuaHJlZlwiXG4gICAgICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJjaG9pY2UuYW5hbHl0aWNzU3RyaW5nXCJcbiAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICAgICAnc3Byay1jLURyb3Bkb3duX19saW5rJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICdzcHJrLWMtRHJvcGRvd25fX2xpbmstLWFjdGl2ZSc6IGNob2ljZS5hY3RpdmVcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImNob2ljZS5jb250ZW50LnRpdGxlXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwic3Byay1iLVR5cGVCb2R5T25lXCI+e3sgY2hvaWNlLmNvbnRlbnQudGl0bGUgfX08L3A+XG4gICAgICAgICAgICAgICAgPHA+e3sgY2hvaWNlLmNvbnRlbnQuaW5mb0xpbmUxIH19PC9wPlxuICAgICAgICAgICAgICAgIDxwPnt7IGNob2ljZS5jb250ZW50LmluZm9MaW5lMiB9fTwvcD5cbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJbc3Bya0Ryb3Bkb3duRm9vdGVyXVwiPjwvbmctY29udGVudD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgXG59KVxuZXhwb3J0IGNsYXNzIFNwcmtEcm9wZG93bkNvbXBvbmVudCB7XG4gIC8qKlxuICAgKiBUaGUgdmFyaWFudCBvZiB0aGUgRHJvcGRvd24gdG8gcmVuZGVyLlxuICAgKi9cbiAgQElucHV0KClcbiAgZHJvcGRvd25UeXBlID0gJ2Jhc2UnO1xuICAvKipcbiAgICogRXhwZWN0cyBhIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmdcbiAgICogb2YgY2xhc3NlcyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICogY29tcG9uZW50LlxuICAgKi9cbiAgQElucHV0KClcbiAgYWRkaXRpb25hbENsYXNzZXM6IHN0cmluZztcbiAgLyoqXG4gICAqIEV4cGVjdHMgYSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nXG4gICAqIG9mIGNsYXNzZXMgdG8gYmUgYWRkZWQgdG8gdGhlXG4gICAqIGljb24uXG4gICAqL1xuICBASW5wdXQoKVxuICBhZGRpdGlvbmFsSWNvbkNsYXNzZXM6IHN0cmluZztcbiAgLyoqXG4gICAqIEV4cGVjdHMgYSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mXG4gICAqIGNsYXNzZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHRyaWdnZXIgbGluayBlbGVtZW50LlxuICAgKi9cbiAgQElucHV0KClcbiAgYWRkaXRpb25hbFRyaWdnZXJDbGFzc2VzOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBFeHBlY3RzIGEgc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZlxuICAgKiBjbGFzc2VzIHRvIGJlIGFkZGVkIHRvIHRoZSB0cmlnZ2VyIHRleHQuXG4gICAqL1xuICBASW5wdXQoKVxuICBhZGRpdGlvbmFsVHJpZ2dlclRleHRDbGFzc2VzOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgc3VwcGxpZWQgd2lsbCBiZSBhc3NpZ25lZFxuICAgKiB0byB0aGUgYGRhdGEtaWRgIGF0dHJpYnV0ZSBvbiB0aGVcbiAgICogY29tcG9uZW50LiBUaGlzIGlzIGludGVuZGVkIHRvIGJlXG4gICAqIHVzZWQgYXMgYSBzZWxlY3RvciBmb3IgYXV0b21hdGVkXG4gICAqIHRvb2xzLiBUaGlzIHZhbHVlIHNob3VsZCBiZSB1bmlxdWVcbiAgICogcGVyIHBhZ2UuXG4gICAqL1xuICBASW5wdXQoKVxuICBpZFN0cmluZzogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHZhbHVlIHN1cHBsaWVkIHdpbGwgYmUgYXNzaWduZWQgdG8gdGhlXG4gICAqIGBkYXRhLWFuYWx5dGljc2AgYXR0cmlidXRlIG9uIHRoZSBjb21wb25lbnQuXG4gICAqIEludGVuZGVkIGZvciBhbiBvdXRzaWRlXG4gICAqIGxpYnJhcnkgdG8gY2FwdHVyZSBkYXRhLlxuICAgKi9cbiAgQElucHV0KClcbiAgYW5hbHl0aWNzU3RyaW5nOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIHRoZSBEcm9wZG93biB3aWxsIGJlIG9wZW4gd2hlbiByZW5kZXJlZC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGlzT3BlbiA9IGZhbHNlO1xuICAvKipcbiAgICogVGhlIHZhbHVlIHN1cHBsaWVkIHdpbGwgYmUgZGlzcGxheWVkXG4gICAqIGluIGEgYm94IGFib3ZlIHRoZSBjaG9pY2VzLlxuICAgKi9cbiAgQElucHV0KClcbiAgdGl0bGU6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBzdXBwbGllZCB3aWxsIGJlIGFzc2lnbmVkIHRvXG4gICAqIHRoZSB0aXRsZSB0ZXh0LlxuICAgKi9cbiAgQElucHV0KClcbiAgc2VsZWN0b3I6IHN0cmluZztcbiAgLyoqXG4gICAqIEV4cGVjdHMgYW4gYXJyYXkgb2ZcbiAgICogW0lTcHJrRHJvcGRvd25DaG9pY2VdKGh0dHBzOi8vZ2l0aHViLmNvbS9zcGFya2Rlc2lnbnN5c3RlbS9zcGFyay1kZXNpZ24tc3lzdGVtL3RyZWUvbWFzdGVyL3NyYy9hbmd1bGFyL3Byb2plY3RzL3NwYXJrLWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL3NwcmstZHJvcGRvd24vc3Byay1kcm9wZG93bi5pbnRlcmZhY2VzLnRzKVxuICAgKiAgb2JqZWN0cy5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGNob2ljZXM6IElTcHJrRHJvcGRvd25DaG9pY2VbXTtcbiAgLyoqXG4gICAqIElmIHN1cHBsaWVkLCB3aWxsIHJlbmRlciB0aGUgaWNvblxuICAgKiB0byB0aGUgcmlnaHQgb2YgdGhlIHRyaWdnZXIgdGV4dC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIHRyaWdnZXJJY29uVHlwZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHRleHQgdGhhdCBpcyBpbml0aWFsbHkgcmVuZGVyZWQgdG8gdGhlIHRyaWdnZXIuXG4gICAqIElmIGBkcm9wZG93blR5cGVgIGlzIGBpbmZvcm1hdGlvbmFsYCxcbiAgICogY2xpY2tpbmcgb24gYSBjaG9pY2Ugd2lsbCBjaGFuZ2UgdGhlIHRyaWdnZXIgdGV4dC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIHRyaWdnZXJUZXh0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgc3VwcGxpZWQgd2lsbCBiZSB2aXN1YWxseSBoaWRkZW5cbiAgICogaW5zaWRlIHRoZSB0cmlnZ2VyLiBVc2VyZnVsXG4gICAqIGZvciB3aGVuIHRpdGxlIGlzIGVtcHR5LFxuICAgKiBhbmQgb25seSBgdHJpZ2dlckljb25UeXBlYCBpcyBzdXBwbGllZC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIHNjcmVlblJlYWRlclRleHQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBldmVudCB0aGF0IGlzXG4gICAqIGVtaXR0ZWQgZnJvbSB0aGUgRHJvcGRvd24gd2hlbiBhIGNob2ljZVxuICAgKiBpcyBjbGlja2VkLiBUaGUgZXZlbnQgY29udGFpbnMgdGhlIHZhbHVlXG4gICAqIG9mIHRoZSBjaG9pY2UgdGhhdCB3YXMgY2xpY2tlZC5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBjaG9pY2VNYWRlOiBFdmVudEVtaXR0ZXI8c3RyaW5nPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWY6IEVsZW1lbnRSZWYpIHt9XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICB0b2dnbGUoZXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuaXNPcGVuID0gIXRoaXMuaXNPcGVuO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6Y2xpY2snLCBbJyRldmVudCddKVxuICBvbkNsaWNrKGV2ZW50KTogdm9pZCB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMucmVmLm5hdGl2ZUVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSB8fFxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3Byay1jLU1hc3RoZWFkTWFzaycpXG4gICAgKSB7XG4gICAgICB0aGlzLmhpZGVEcm9wZG93bigpO1xuICAgIH1cbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ2RvY3VtZW50OmZvY3VzaW4nLCBbJyRldmVudCddKVxuICBvbkZvY3VzaW4oZXZlbnQpOiB2b2lkIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZTogYW5ndWxhciBmb2N1cyBldmVudCBpc250IHNldHRpbmcgZS50YXJnZXQgKi9cbiAgICBpZiAoXG4gICAgICAhdGhpcy5yZWYubmF0aXZlRWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzcHJrLWMtTWFzdGhlYWRNYXNrJylcbiAgICApIHtcbiAgICAgIHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBjaG9pY2VDbGljayhldmVudCkge1xuICAgIHRoaXMuY2xlYXJBY3RpdmVDaG9pY2VzKCk7XG4gICAgY29uc3QgY2hvaWNlSW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZShcbiAgICAgICdkYXRhLXNwcmstZHJvcGRvd24tY2hvaWNlLWluZGV4J1xuICAgICk7XG4gICAgY29uc3QgY2xpY2tlZENob2ljZSA9IHRoaXMuY2hvaWNlc1tjaG9pY2VJbmRleF07XG4gICAgaWYgKFxuICAgICAgdGhpcy5kcm9wZG93blR5cGUgPT09ICdpbmZvcm1hdGlvbmFsJyB8fFxuICAgICAgdGhpcy5kcm9wZG93blR5cGUgPT09ICdtYXN0aGVhZFNlbGVjdG9yJ1xuICAgICkge1xuICAgICAgdGhpcy5zZXRBY3RpdmVDaG9pY2UoZXZlbnQpO1xuICAgICAgdGhpcy51cGRhdGVUcmlnZ2VyVGV4dChldmVudCk7XG4gICAgfVxuICAgIHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gICAgdGhpcy5jaG9pY2VNYWRlLmVtaXQoY2xpY2tlZENob2ljZVsndmFsdWUnXSk7XG4gIH1cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHNldEFjdGl2ZUNob2ljZShldmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNob2ljZUluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoXG4gICAgICAnZGF0YS1zcHJrLWRyb3Bkb3duLWNob2ljZS1pbmRleCdcbiAgICApO1xuICAgIHRoaXMuY2hvaWNlc1tjaG9pY2VJbmRleF1bJ2FjdGl2ZSddID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgdXBkYXRlVHJpZ2dlclRleHQoZXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjaG9pY2VJbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKFxuICAgICAgJ2RhdGEtc3Byay1kcm9wZG93bi1jaG9pY2UtaW5kZXgnXG4gICAgKTtcbiAgICB0aGlzLnRyaWdnZXJUZXh0ID0gdGhpcy5jaG9pY2VzW2Nob2ljZUluZGV4XVsndmFsdWUnXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBjbGVhckFjdGl2ZUNob2ljZXMoKTogdm9pZCB7XG4gICAgdGhpcy5jaG9pY2VzLmZvckVhY2goKGNob2ljZTogSVNwcmtEcm9wZG93bkNob2ljZSkgPT4ge1xuICAgICAgY2hvaWNlWydhY3RpdmUnXSA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGhpZGVEcm9wZG93bigpOiB2b2lkIHtcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGdldENsYXNzZXMoKTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGFzc0FycmF5OiBzdHJpbmdbXSA9IFsnc3Byay1jLURyb3Bkb3duJ107XG5cbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsQ2xhc3Nlcykge1xuICAgICAgdGhpcy5hZGRpdGlvbmFsQ2xhc3Nlcy5zcGxpdCgnICcpLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgY2xhc3NBcnJheS5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NBcnJheS5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ2V0VHJpZ2dlckNsYXNzZXMoKTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGFzc0FycmF5OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuYWRkaXRpb25hbFRyaWdnZXJDbGFzc2VzKSB7XG4gICAgICB0aGlzLmFkZGl0aW9uYWxUcmlnZ2VyQ2xhc3Nlcy5zcGxpdCgnICcpLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgY2xhc3NBcnJheS5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NBcnJheS5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ2V0VHJpZ2dlclRleHRDbGFzc2VzKCk6IHN0cmluZyB7XG4gICAgY29uc3QgY2xhc3NBcnJheTogc3RyaW5nW10gPSBbJyddO1xuXG4gICAgaWYgKHRoaXMuYWRkaXRpb25hbFRyaWdnZXJUZXh0Q2xhc3Nlcykge1xuICAgICAgdGhpcy5hZGRpdGlvbmFsVHJpZ2dlclRleHRDbGFzc2VzLnNwbGl0KCcgJykuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICBjbGFzc0FycmF5LnB1c2goY2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBjbGFzc0FycmF5LmpvaW4oJyAnKTtcbiAgfVxufVxuIl19