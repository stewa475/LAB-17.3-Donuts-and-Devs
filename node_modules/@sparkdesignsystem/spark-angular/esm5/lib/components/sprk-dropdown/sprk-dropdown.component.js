import { __decorate, __metadata } from "tslib";
import { Component, Input, Output, ElementRef, HostListener, EventEmitter } from '@angular/core';
var SprkDropdownComponent = /** @class */ (function () {
    /**
     * @ignore
     */
    function SprkDropdownComponent(ref) {
        this.ref = ref;
        /**
         * The variant of the Dropdown to render.
         */
        this.dropdownType = 'base';
        /**
         * If `true`, the Dropdown will be open when rendered.
         */
        this.isOpen = false;
        /**
         * The event that is
         * emitted from the Dropdown when a choice
         * is clicked. The event contains the value
         * of the choice that was clicked.
         */
        this.choiceMade = new EventEmitter();
    }
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.toggle = function (event) {
        event.preventDefault();
        this.isOpen = !this.isOpen;
    };
    SprkDropdownComponent.prototype.onClick = function (event) {
        if (!this.ref.nativeElement.contains(event.target) ||
            event.target.classList.contains('sprk-c-MastheadMask')) {
            this.hideDropdown();
        }
    };
    SprkDropdownComponent.prototype.onFocusin = function (event) {
        /* istanbul ignore else: angular focus event isnt setting e.target */
        if (!this.ref.nativeElement.contains(event.target) ||
            event.target.classList.contains('sprk-c-MastheadMask')) {
            this.hideDropdown();
        }
    };
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.choiceClick = function (event) {
        this.clearActiveChoices();
        var choiceIndex = event.currentTarget.getAttribute('data-sprk-dropdown-choice-index');
        var clickedChoice = this.choices[choiceIndex];
        if (this.dropdownType === 'informational' ||
            this.dropdownType === 'mastheadSelector') {
            this.setActiveChoice(event);
            this.updateTriggerText(event);
        }
        this.hideDropdown();
        this.choiceMade.emit(clickedChoice['value']);
    };
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.setActiveChoice = function (event) {
        var choiceIndex = event.currentTarget.getAttribute('data-sprk-dropdown-choice-index');
        this.choices[choiceIndex]['active'] = true;
    };
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.updateTriggerText = function (event) {
        var choiceIndex = event.currentTarget.getAttribute('data-sprk-dropdown-choice-index');
        this.triggerText = this.choices[choiceIndex]['value'];
    };
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.clearActiveChoices = function () {
        this.choices.forEach(function (choice) {
            choice['active'] = false;
        });
    };
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.hideDropdown = function () {
        this.isOpen = false;
    };
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.getClasses = function () {
        var classArray = ['sprk-c-Dropdown'];
        if (this.additionalClasses) {
            this.additionalClasses.split(' ').forEach(function (className) {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    };
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.getTriggerClasses = function () {
        var classArray = [];
        if (this.additionalTriggerClasses) {
            this.additionalTriggerClasses.split(' ').forEach(function (className) {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    };
    /**
     * @ignore
     */
    SprkDropdownComponent.prototype.getTriggerTextClasses = function () {
        var classArray = [''];
        if (this.additionalTriggerTextClasses) {
            this.additionalTriggerTextClasses.split(' ').forEach(function (className) {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    };
    SprkDropdownComponent.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], SprkDropdownComponent.prototype, "dropdownType", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "additionalClasses", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "additionalIconClasses", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "additionalTriggerClasses", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "additionalTriggerTextClasses", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "idString", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "analyticsString", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], SprkDropdownComponent.prototype, "isOpen", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "title", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "selector", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], SprkDropdownComponent.prototype, "choices", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "triggerIconType", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "triggerText", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkDropdownComponent.prototype, "screenReaderText", void 0);
    __decorate([
        Output(),
        __metadata("design:type", EventEmitter)
    ], SprkDropdownComponent.prototype, "choiceMade", void 0);
    __decorate([
        HostListener('document:click', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], SprkDropdownComponent.prototype, "onClick", null);
    __decorate([
        HostListener('document:focusin', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], SprkDropdownComponent.prototype, "onFocusin", null);
    SprkDropdownComponent = __decorate([
        Component({
            selector: 'sprk-dropdown',
            template: "\n    <div\n      [ngClass]=\"{\n        'sprk-c-MastheadMask': isOpen && dropdownType === 'mastheadSelector'\n      }\"\n    >\n      <div [ngClass]=\"{ 'sprk-o-Box': dropdownType === 'mastheadSelector' }\">\n        <a\n          sprkLink\n          [ngClass]=\"getTriggerClasses()\"\n          (click)=\"toggle($event)\"\n          [idString]=\"idString\"\n          [analyticsString]=\"analyticsString\"\n          aria-haspopup=\"listbox\"\n          href=\"#\"\n          [attr.aria-label]=\"triggerText ? triggerText : (screenReaderText || 'Choose One')\"\n        >\n          <span [ngClass]=\"getTriggerTextClasses()\">{{ triggerText }}</span>\n          <span class=\"sprk-u-ScreenReaderText\">{{ screenReaderText }}</span>\n          <sprk-icon\n            [iconType]=\"triggerIconType\"\n            additionalClasses=\"sprk-u-mls sprk-c-Icon--stroke-current-color {{\n              additionalIconClasses\n            }}\"\n          ></sprk-icon>\n        </a>\n      </div>\n\n      <div [ngClass]=\"getClasses()\" *ngIf=\"isOpen\">\n        <div\n          class=\"sprk-c-Dropdown__header\"\n          *ngIf=\"dropdownType === 'mastheadSelector' || title || selector\"\n        >\n          <h2 class=\"sprk-c-Dropdown__title sprk-b-TypeBodyTwo\" *ngIf=\"title\">\n            {{ title }}\n          </h2>\n\n          <a\n            sprkLink\n            *ngIf=\"selector && !title\"\n            variant=\"plain\"\n            class=\"sprk-o-Stack sprk-o-Stack--split@xxs sprk-o-Stack--center-column sprk-u-Width-100\"\n            (click)=\"toggle($event)\"\n            [attr.aria-label]=\"title\"\n            href=\"#\"\n          >\n            <span\n              class=\"sprk-c-Dropdown__title sprk-b-TypeBodyTwo sprk-o-Stack__item sprk-o-Stack__item--flex@xxs\"\n              >{{ selector }}</span\n            >\n            <sprk-icon\n              [iconType]=\"triggerIconType\"\n              additionalClasses=\"sprk-c-Icon--stroke-current-color sprk-u-mls sprk-c-Icon--toggle sprk-Stack__item {{\n                additionalIconClasses\n              }}\"\n            ></sprk-icon>\n          </a>\n        </div>\n\n        <ul\n          class=\"sprk-c-Dropdown__links\"\n          role=\"listbox\"\n          [attr.aria-label]=\"title ? title : (screenReaderText || 'My Choices')\"\n        >\n          <li\n            class=\"sprk-c-Dropdown__item\"\n            *ngFor=\"let choice of choices; let i = index\"\n            [attr.data-sprk-dropdown-choice-index]=\"i\"\n            (click)=\"choiceClick($event)\"\n            [attr.aria-selected]=\"choice.active\"\n            role=\"option\"\n          >\n            <div *ngIf=\"choice.content; then content; else link\"></div>\n            <ng-template #link>\n              <a\n                sprkLink\n                variant=\"unstyled\"\n                [attr.href]=\"choice.href\"\n                [analyticsString]=\"choice.analyticsString\"\n                [ngClass]=\"{\n                  'sprk-c-Dropdown__link': true,\n                  'sprk-c-Dropdown__link--active': choice.active\n                }\"\n                [attr.aria-label]=\"choice.text\"\n                >{{ choice.text }}\n              </a>\n            </ng-template>\n            <ng-template #content>\n              <a\n                sprkLink\n                variant=\"unstyled\"\n                [attr.href]=\"choice.href\"\n                [analyticsString]=\"choice.analyticsString\"\n                [ngClass]=\"{\n                  'sprk-c-Dropdown__link': true,\n                  'sprk-c-Dropdown__link--active': choice.active\n                }\"\n                [attr.aria-label]=\"choice.content.title\"\n              >\n                <p class=\"sprk-b-TypeBodyOne\">{{ choice.content.title }}</p>\n                <p>{{ choice.content.infoLine1 }}</p>\n                <p>{{ choice.content.infoLine2 }}</p>\n              </a>\n            </ng-template>\n          </li>\n        </ul>\n        <ng-content select=\"[sprkDropdownFooter]\"></ng-content>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [ElementRef])
    ], SprkDropdownComponent);
    return SprkDropdownComponent;
}());
export { SprkDropdownComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Byay1kcm9wZG93bi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcmtkZXNpZ25zeXN0ZW0vc3BhcmstYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3NwcmstZHJvcGRvd24vc3Byay1kcm9wZG93bi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixVQUFVLEVBQ1YsWUFBWSxFQUNaLFlBQVksRUFDYixNQUFNLGVBQWUsQ0FBQztBQW9IdkI7SUF1R0U7O09BRUc7SUFDSCwrQkFBbUIsR0FBZTtRQUFmLFFBQUcsR0FBSCxHQUFHLENBQVk7UUF6R2xDOztXQUVHO1FBRUgsaUJBQVksR0FBRyxNQUFNLENBQUM7UUE2Q3RCOztXQUVHO1FBRUgsV0FBTSxHQUFHLEtBQUssQ0FBQztRQXlDZjs7Ozs7V0FLRztRQUVILGVBQVUsR0FBeUIsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQUlqQixDQUFDO0lBQ3RDOztPQUVHO0lBQ0gsc0NBQU0sR0FBTixVQUFPLEtBQUs7UUFDVixLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDN0IsQ0FBQztJQUdELHVDQUFPLEdBQVAsVUFBUSxLQUFLO1FBQ1gsSUFDRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1lBQzlDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxFQUN0RDtZQUNBLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztTQUNyQjtJQUNILENBQUM7SUFHRCx5Q0FBUyxHQUFULFVBQVUsS0FBSztRQUNiLHFFQUFxRTtRQUNyRSxJQUNFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FB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QyxTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsZUFBZTtZQUN6QixRQUFRLEVBQUUseS9IQTZHVDtTQUNGLENBQUM7eUNBMkd3QixVQUFVO09BMUd2QixxQkFBcUIsQ0F5T2pDO0lBQUQsNEJBQUM7Q0FBQSxBQXpPRCxJQXlPQztTQXpPWSxxQkFBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RMaXN0ZW5lcixcbiAgRXZlbnRFbWl0dGVyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSVNwcmtEcm9wZG93bkNob2ljZSB9IGZyb20gJy4vc3Byay1kcm9wZG93bi5pbnRlcmZhY2VzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnc3Byay1kcm9wZG93bicsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdlxuICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAnc3Byay1jLU1hc3RoZWFkTWFzayc6IGlzT3BlbiAmJiBkcm9wZG93blR5cGUgPT09ICdtYXN0aGVhZFNlbGVjdG9yJ1xuICAgICAgfVwiXG4gICAgPlxuICAgICAgPGRpdiBbbmdDbGFzc109XCJ7ICdzcHJrLW8tQm94JzogZHJvcGRvd25UeXBlID09PSAnbWFzdGhlYWRTZWxlY3RvcicgfVwiPlxuICAgICAgICA8YVxuICAgICAgICAgIHNwcmtMaW5rXG4gICAgICAgICAgW25nQ2xhc3NdPVwiZ2V0VHJpZ2dlckNsYXNzZXMoKVwiXG4gICAgICAgICAgKGNsaWNrKT1cInRvZ2dsZSgkZXZlbnQpXCJcbiAgICAgICAgICBbaWRTdHJpbmddPVwiaWRTdHJpbmdcIlxuICAgICAgICAgIFthbmFseXRpY3NTdHJpbmddPVwiYW5hbHl0aWNzU3RyaW5nXCJcbiAgICAgICAgICBhcmlhLWhhc3BvcHVwPVwibGlzdGJveFwiXG4gICAgICAgICAgaHJlZj1cIiNcIlxuICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwidHJpZ2dlclRleHQgPyB0cmlnZ2VyVGV4dCA6IChzY3JlZW5SZWFkZXJUZXh0IHx8ICdDaG9vc2UgT25lJylcIlxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gW25nQ2xhc3NdPVwiZ2V0VHJpZ2dlclRleHRDbGFzc2VzKClcIj57eyB0cmlnZ2VyVGV4dCB9fTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInNwcmstdS1TY3JlZW5SZWFkZXJUZXh0XCI+e3sgc2NyZWVuUmVhZGVyVGV4dCB9fTwvc3Bhbj5cbiAgICAgICAgICA8c3Byay1pY29uXG4gICAgICAgICAgICBbaWNvblR5cGVdPVwidHJpZ2dlckljb25UeXBlXCJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxDbGFzc2VzPVwic3Byay11LW1scyBzcHJrLWMtSWNvbi0tc3Ryb2tlLWN1cnJlbnQtY29sb3Ige3tcbiAgICAgICAgICAgICAgYWRkaXRpb25hbEljb25DbGFzc2VzXG4gICAgICAgICAgICB9fVwiXG4gICAgICAgICAgPjwvc3Byay1pY29uPlxuICAgICAgICA8L2E+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBbbmdDbGFzc109XCJnZXRDbGFzc2VzKClcIiAqbmdJZj1cImlzT3BlblwiPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJzcHJrLWMtRHJvcGRvd25fX2hlYWRlclwiXG4gICAgICAgICAgKm5nSWY9XCJkcm9wZG93blR5cGUgPT09ICdtYXN0aGVhZFNlbGVjdG9yJyB8fCB0aXRsZSB8fCBzZWxlY3RvclwiXG4gICAgICAgID5cbiAgICAgICAgICA8aDIgY2xhc3M9XCJzcHJrLWMtRHJvcGRvd25fX3RpdGxlIHNwcmstYi1UeXBlQm9keVR3b1wiICpuZ0lmPVwidGl0bGVcIj5cbiAgICAgICAgICAgIHt7IHRpdGxlIH19XG4gICAgICAgICAgPC9oMj5cblxuICAgICAgICAgIDxhXG4gICAgICAgICAgICBzcHJrTGlua1xuICAgICAgICAgICAgKm5nSWY9XCJzZWxlY3RvciAmJiAhdGl0bGVcIlxuICAgICAgICAgICAgdmFyaWFudD1cInBsYWluXCJcbiAgICAgICAgICAgIGNsYXNzPVwic3Byay1vLVN0YWNrIHNwcmstby1TdGFjay0tc3BsaXRAeHhzIHNwcmstby1TdGFjay0tY2VudGVyLWNvbHVtbiBzcHJrLXUtV2lkdGgtMTAwXCJcbiAgICAgICAgICAgIChjbGljayk9XCJ0b2dnbGUoJGV2ZW50KVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cInRpdGxlXCJcbiAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYy1Ecm9wZG93bl9fdGl0bGUgc3Byay1iLVR5cGVCb2R5VHdvIHNwcmstby1TdGFja19faXRlbSBzcHJrLW8tU3RhY2tfX2l0ZW0tLWZsZXhAeHhzXCJcbiAgICAgICAgICAgICAgPnt7IHNlbGVjdG9yIH19PC9zcGFuXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8c3Byay1pY29uXG4gICAgICAgICAgICAgIFtpY29uVHlwZV09XCJ0cmlnZ2VySWNvblR5cGVcIlxuICAgICAgICAgICAgICBhZGRpdGlvbmFsQ2xhc3Nlcz1cInNwcmstYy1JY29uLS1zdHJva2UtY3VycmVudC1jb2xvciBzcHJrLXUtbWxzIHNwcmstYy1JY29uLS10b2dnbGUgc3Byay1TdGFja19faXRlbSB7e1xuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxJY29uQ2xhc3Nlc1xuICAgICAgICAgICAgICB9fVwiXG4gICAgICAgICAgICA+PC9zcHJrLWljb24+XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8dWxcbiAgICAgICAgICBjbGFzcz1cInNwcmstYy1Ecm9wZG93bl9fbGlua3NcIlxuICAgICAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cInRpdGxlID8gdGl0bGUgOiAoc2NyZWVuUmVhZGVyVGV4dCB8fCAnTXkgQ2hvaWNlcycpXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxsaVxuICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWMtRHJvcGRvd25fX2l0ZW1cIlxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IGNob2ljZSBvZiBjaG9pY2VzOyBsZXQgaSA9IGluZGV4XCJcbiAgICAgICAgICAgIFthdHRyLmRhdGEtc3Byay1kcm9wZG93bi1jaG9pY2UtaW5kZXhdPVwiaVwiXG4gICAgICAgICAgICAoY2xpY2spPVwiY2hvaWNlQ2xpY2soJGV2ZW50KVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLXNlbGVjdGVkXT1cImNob2ljZS5hY3RpdmVcIlxuICAgICAgICAgICAgcm9sZT1cIm9wdGlvblwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiAqbmdJZj1cImNob2ljZS5jb250ZW50OyB0aGVuIGNvbnRlbnQ7IGVsc2UgbGlua1wiPjwvZGl2PlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNsaW5rPlxuICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgIHNwcmtMaW5rXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cInVuc3R5bGVkXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5ocmVmXT1cImNob2ljZS5ocmVmXCJcbiAgICAgICAgICAgICAgICBbYW5hbHl0aWNzU3RyaW5nXT1cImNob2ljZS5hbmFseXRpY3NTdHJpbmdcIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAgICdzcHJrLWMtRHJvcGRvd25fX2xpbmsnOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgJ3NwcmstYy1Ecm9wZG93bl9fbGluay0tYWN0aXZlJzogY2hvaWNlLmFjdGl2ZVxuICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiY2hvaWNlLnRleHRcIlxuICAgICAgICAgICAgICAgID57eyBjaG9pY2UudGV4dCB9fVxuICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNjb250ZW50PlxuICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgIHNwcmtMaW5rXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cInVuc3R5bGVkXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5ocmVmXT1cImNob2ljZS5ocmVmXCJcbiAgICAgICAgICAgICAgICBbYW5hbHl0aWNzU3RyaW5nXT1cImNob2ljZS5hbmFseXRpY3NTdHJpbmdcIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAgICdzcHJrLWMtRHJvcGRvd25fX2xpbmsnOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgJ3NwcmstYy1Ecm9wZG93bl9fbGluay0tYWN0aXZlJzogY2hvaWNlLmFjdGl2ZVxuICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiY2hvaWNlLmNvbnRlbnQudGl0bGVcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzcHJrLWItVHlwZUJvZHlPbmVcIj57eyBjaG9pY2UuY29udGVudC50aXRsZSB9fTwvcD5cbiAgICAgICAgICAgICAgICA8cD57eyBjaG9pY2UuY29udGVudC5pbmZvTGluZTEgfX08L3A+XG4gICAgICAgICAgICAgICAgPHA+e3sgY2hvaWNlLmNvbnRlbnQuaW5mb0xpbmUyIH19PC9wPlxuICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltzcHJrRHJvcGRvd25Gb290ZXJdXCI+PC9uZy1jb250ZW50PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGBcbn0pXG5leHBvcnQgY2xhc3MgU3Bya0Ryb3Bkb3duQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIFRoZSB2YXJpYW50IG9mIHRoZSBEcm9wZG93biB0byByZW5kZXIuXG4gICAqL1xuICBASW5wdXQoKVxuICBkcm9wZG93blR5cGUgPSAnYmFzZSc7XG4gIC8qKlxuICAgKiBFeHBlY3RzIGEgc3BhY2Ugc2VwYXJhdGVkIHN0cmluZ1xuICAgKiBvZiBjbGFzc2VzIHRvIGJlIGFkZGVkIHRvIHRoZVxuICAgKiBjb21wb25lbnQuXG4gICAqL1xuICBASW5wdXQoKVxuICBhZGRpdGlvbmFsQ2xhc3Nlczogc3RyaW5nO1xuICAvKipcbiAgICogRXhwZWN0cyBhIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmdcbiAgICogb2YgY2xhc3NlcyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICogaWNvbi5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGFkZGl0aW9uYWxJY29uQ2xhc3Nlczogc3RyaW5nO1xuICAvKipcbiAgICogRXhwZWN0cyBhIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2ZcbiAgICogY2xhc3NlcyB0byBiZSBhZGRlZCB0byB0aGUgdHJpZ2dlciBsaW5rIGVsZW1lbnQuXG4gICAqL1xuICBASW5wdXQoKVxuICBhZGRpdGlvbmFsVHJpZ2dlckNsYXNzZXM6IHN0cmluZztcbiAgLyoqXG4gICAqIEV4cGVjdHMgYSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mXG4gICAqIGNsYXNzZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHRyaWdnZXIgdGV4dC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGFkZGl0aW9uYWxUcmlnZ2VyVGV4dENsYXNzZXM6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBzdXBwbGllZCB3aWxsIGJlIGFzc2lnbmVkXG4gICAqIHRvIHRoZSBgZGF0YS1pZGAgYXR0cmlidXRlIG9uIHRoZVxuICAgKiBjb21wb25lbnQuIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmVcbiAgICogdXNlZCBhcyBhIHNlbGVjdG9yIGZvciBhdXRvbWF0ZWRcbiAgICogdG9vbHMuIFRoaXMgdmFsdWUgc2hvdWxkIGJlIHVuaXF1ZVxuICAgKiBwZXIgcGFnZS5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGlkU3RyaW5nOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgc3VwcGxpZWQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGVcbiAgICogYGRhdGEtYW5hbHl0aWNzYCBhdHRyaWJ1dGUgb24gdGhlIGNvbXBvbmVudC5cbiAgICogSW50ZW5kZWQgZm9yIGFuIG91dHNpZGVcbiAgICogbGlicmFyeSB0byBjYXB0dXJlIGRhdGEuXG4gICAqL1xuICBASW5wdXQoKVxuICBhbmFseXRpY3NTdHJpbmc6IHN0cmluZztcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgdGhlIERyb3Bkb3duIHdpbGwgYmUgb3BlbiB3aGVuIHJlbmRlcmVkLlxuICAgKi9cbiAgQElucHV0KClcbiAgaXNPcGVuID0gZmFsc2U7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgc3VwcGxpZWQgd2lsbCBiZSBkaXNwbGF5ZWRcbiAgICogaW4gYSBib3ggYWJvdmUgdGhlIGNob2ljZXMuXG4gICAqL1xuICBASW5wdXQoKVxuICB0aXRsZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHZhbHVlIHN1cHBsaWVkIHdpbGwgYmUgYXNzaWduZWQgdG9cbiAgICogdGhlIHRpdGxlIHRleHQuXG4gICAqL1xuICBASW5wdXQoKVxuICBzZWxlY3Rvcjogc3RyaW5nO1xuICAvKipcbiAgICogRXhwZWN0cyBhbiBhcnJheSBvZlxuICAgKiBbSVNwcmtEcm9wZG93bkNob2ljZV0oaHR0cHM6Ly9naXRodWIuY29tL3NwYXJrZGVzaWduc3lzdGVtL3NwYXJrLWRlc2lnbi1zeXN0ZW0vdHJlZS9tYXN0ZXIvc3JjL2FuZ3VsYXIvcHJvamVjdHMvc3BhcmstYW5ndWxhci9zcmMvbGliL2NvbXBvbmVudHMvc3Byay1kcm9wZG93bi9zcHJrLWRyb3Bkb3duLmludGVyZmFjZXMudHMpXG4gICAqICBvYmplY3RzLlxuICAgKi9cbiAgQElucHV0KClcbiAgY2hvaWNlczogSVNwcmtEcm9wZG93bkNob2ljZVtdO1xuICAvKipcbiAgICogSWYgc3VwcGxpZWQsIHdpbGwgcmVuZGVyIHRoZSBpY29uXG4gICAqIHRvIHRoZSByaWdodCBvZiB0aGUgdHJpZ2dlciB0ZXh0LlxuICAgKi9cbiAgQElucHV0KClcbiAgdHJpZ2dlckljb25UeXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdGV4dCB0aGF0IGlzIGluaXRpYWxseSByZW5kZXJlZCB0byB0aGUgdHJpZ2dlci5cbiAgICogSWYgYGRyb3Bkb3duVHlwZWAgaXMgYGluZm9ybWF0aW9uYWxgLFxuICAgKiBjbGlja2luZyBvbiBhIGNob2ljZSB3aWxsIGNoYW5nZSB0aGUgdHJpZ2dlciB0ZXh0LlxuICAgKi9cbiAgQElucHV0KClcbiAgdHJpZ2dlclRleHQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBzdXBwbGllZCB3aWxsIGJlIHZpc3VhbGx5IGhpZGRlblxuICAgKiBpbnNpZGUgdGhlIHRyaWdnZXIuIFVzZXJmdWxcbiAgICogZm9yIHdoZW4gdGl0bGUgaXMgZW1wdHksXG4gICAqIGFuZCBvbmx5IGB0cmlnZ2VySWNvblR5cGVgIGlzIHN1cHBsaWVkLlxuICAgKi9cbiAgQElucHV0KClcbiAgc2NyZWVuUmVhZGVyVGV4dDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGV2ZW50IHRoYXQgaXNcbiAgICogZW1pdHRlZCBmcm9tIHRoZSBEcm9wZG93biB3aGVuIGEgY2hvaWNlXG4gICAqIGlzIGNsaWNrZWQuIFRoZSBldmVudCBjb250YWlucyB0aGUgdmFsdWVcbiAgICogb2YgdGhlIGNob2ljZSB0aGF0IHdhcyBjbGlja2VkLlxuICAgKi9cbiAgQE91dHB1dCgpXG4gIGNob2ljZU1hZGU6IEV2ZW50RW1pdHRlcjxzdHJpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgY29uc3RydWN0b3IocHVibGljIHJlZjogRWxlbWVudFJlZikge31cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHRvZ2dsZShldmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDpjbGljaycsIFsnJGV2ZW50J10pXG4gIG9uQ2xpY2soZXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5yZWYubmF0aXZlRWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzcHJrLWMtTWFzdGhlYWRNYXNrJylcbiAgICApIHtcbiAgICAgIHRoaXMuaGlkZURyb3Bkb3duKCk7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6Zm9jdXNpbicsIFsnJGV2ZW50J10pXG4gIG9uRm9jdXNpbihldmVudCk6IHZvaWQge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlOiBhbmd1bGFyIGZvY3VzIGV2ZW50IGlzbnQgc2V0dGluZyBlLnRhcmdldCAqL1xuICAgIGlmIChcbiAgICAgICF0aGlzLnJlZi5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NwcmstYy1NYXN0aGVhZE1hc2snKVxuICAgICkge1xuICAgICAgdGhpcy5oaWRlRHJvcGRvd24oKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGNob2ljZUNsaWNrKGV2ZW50KSB7XG4gICAgdGhpcy5jbGVhckFjdGl2ZUNob2ljZXMoKTtcbiAgICBjb25zdCBjaG9pY2VJbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKFxuICAgICAgJ2RhdGEtc3Byay1kcm9wZG93bi1jaG9pY2UtaW5kZXgnXG4gICAgKTtcbiAgICBjb25zdCBjbGlja2VkQ2hvaWNlID0gdGhpcy5jaG9pY2VzW2Nob2ljZUluZGV4XTtcbiAgICBpZiAoXG4gICAgICB0aGlzLmRyb3Bkb3duVHlwZSA9PT0gJ2luZm9ybWF0aW9uYWwnIHx8XG4gICAgICB0aGlzLmRyb3Bkb3duVHlwZSA9PT0gJ21hc3RoZWFkU2VsZWN0b3InXG4gICAgKSB7XG4gICAgICB0aGlzLnNldEFjdGl2ZUNob2ljZShldmVudCk7XG4gICAgICB0aGlzLnVwZGF0ZVRyaWdnZXJUZXh0KGV2ZW50KTtcbiAgICB9XG4gICAgdGhpcy5oaWRlRHJvcGRvd24oKTtcbiAgICB0aGlzLmNob2ljZU1hZGUuZW1pdChjbGlja2VkQ2hvaWNlWyd2YWx1ZSddKTtcbiAgfVxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgc2V0QWN0aXZlQ2hvaWNlKGV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY2hvaWNlSW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZShcbiAgICAgICdkYXRhLXNwcmstZHJvcGRvd24tY2hvaWNlLWluZGV4J1xuICAgICk7XG4gICAgdGhpcy5jaG9pY2VzW2Nob2ljZUluZGV4XVsnYWN0aXZlJ10gPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICB1cGRhdGVUcmlnZ2VyVGV4dChldmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNob2ljZUluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoXG4gICAgICAnZGF0YS1zcHJrLWRyb3Bkb3duLWNob2ljZS1pbmRleCdcbiAgICApO1xuICAgIHRoaXMudHJpZ2dlclRleHQgPSB0aGlzLmNob2ljZXNbY2hvaWNlSW5kZXhdWyd2YWx1ZSddO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGNsZWFyQWN0aXZlQ2hvaWNlcygpOiB2b2lkIHtcbiAgICB0aGlzLmNob2ljZXMuZm9yRWFjaCgoY2hvaWNlOiBJU3Bya0Ryb3Bkb3duQ2hvaWNlKSA9PiB7XG4gICAgICBjaG9pY2VbJ2FjdGl2ZSddID0gZmFsc2U7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaGlkZURyb3Bkb3duKCk6IHZvaWQge1xuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ2V0Q2xhc3NlcygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNsYXNzQXJyYXk6IHN0cmluZ1tdID0gWydzcHJrLWMtRHJvcGRvd24nXTtcblxuICAgIGlmICh0aGlzLmFkZGl0aW9uYWxDbGFzc2VzKSB7XG4gICAgICB0aGlzLmFkZGl0aW9uYWxDbGFzc2VzLnNwbGl0KCcgJykuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICBjbGFzc0FycmF5LnB1c2goY2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBjbGFzc0FycmF5LmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBnZXRUcmlnZ2VyQ2xhc3NlcygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNsYXNzQXJyYXk6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsVHJpZ2dlckNsYXNzZXMpIHtcbiAgICAgIHRoaXMuYWRkaXRpb25hbFRyaWdnZXJDbGFzc2VzLnNwbGl0KCcgJykuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICBjbGFzc0FycmF5LnB1c2goY2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBjbGFzc0FycmF5LmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBnZXRUcmlnZ2VyVGV4dENsYXNzZXMoKTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGFzc0FycmF5OiBzdHJpbmdbXSA9IFsnJ107XG5cbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsVHJpZ2dlclRleHRDbGFzc2VzKSB7XG4gICAgICB0aGlzLmFkZGl0aW9uYWxUcmlnZ2VyVGV4dENsYXNzZXMuc3BsaXQoJyAnKS5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIGNsYXNzQXJyYXkucHVzaChjbGFzc05hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzQXJyYXkuam9pbignICcpO1xuICB9XG59XG4iXX0=