import { __decorate, __metadata } from "tslib";
import { Component, HostListener, Input, Renderer2, AfterContentInit } from '@angular/core';
import { Router, Event, NavigationEnd } from '@angular/router';
import * as _ from 'lodash';
var SprkMastheadComponent = /** @class */ (function () {
    /**
     * @ignore
     */
    function SprkMastheadComponent(renderer, router) {
        var _this = this;
        this.renderer = renderer;
        /**
         *  The `href` value of the logo.
         */
        this.logoHref = '/';
        /**
         * The value supplied will be used as
         * screen reader text that is visually hidden
         * for the link that wraps the logo.
         */
        this.logoLinkScreenReaderText = 'Go to the homepage';
        /**
         * Represents the initial state of the
         * narrow nav element of the Masthead component.
         */
        this.isNarrowNavOpen = false;
        /**
         * A string that is used to set the `id` on the narrow nav
         * and the `aria-controls` for the menu trigger button.
         */
        this.narrowNavId = _.uniqueId("sprk_masthead_narrow_nav_");
        /**
         * @ignore
         */
        this.iconType = 'chevron-down';
        /**
         * @ignore
         */
        this.componentID = _.uniqueId();
        /**
         * @ignore
         */
        this.controls_id = "sprk-narrow-navigation-item__" + this.componentID;
        /**
         * @ignore
         */
        this.isScrolled = false;
        /**
         * @ignore
         */
        this.isNarrowLayout = false;
        /**
         * @ignore
         */
        this.scrollDirection = 'up';
        /**
         * @ignore
         */
        this.isHidden = false;
        /**
         * @ignore
         */
        this.isNarrowOnResize = false;
        /**
         * @ignore
         */
        this.scrollPosition = 0;
        /**
         * @ignore
         */
        this.throttledCheckScrollDirection = _.throttle(this.checkScrollDirection, 500);
        /**
         * @ignore
         */
        this.throttledUpdateLayoutState = _.throttle(this.updateLayoutState, 500);
        router.events.subscribe(function (event) {
            if (event instanceof NavigationEnd) {
                _this.closeNarrowNav();
            }
        });
    }
    /**
     * @ignore
     * Closes the narrow navigation menu
     * if it is left open when
     * the viewport is expanded.
     */
    SprkMastheadComponent.prototype.handleResizeEvent = function () {
        this.closeNarrowNav();
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.onScroll = function (event) {
        window.scrollY >= 10 ? (this.isScrolled = true) : (this.isScrolled = false);
        if (this.isNarrowLayout) {
            this.throttledCheckScrollDirection();
        }
    };
    /**
     * @ignore
     * Handles when viewport size changes to
     * large while narrow nav is hidden.
     */
    SprkMastheadComponent.prototype.onResize = function (event) {
        this.isNarrowOnResize = this.isElementVisible('.sprk-c-Masthead__menu');
        this.throttledUpdateLayoutState();
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.updateLayoutState = function () {
        if (this.isNarrowLayout !== this.isNarrowOnResize) {
            this.isNarrowLayout = this.isNarrowOnResize;
            // If is not narrow on resize update, make sure it's visible
            if (!this.isNarrowLayout) {
                this.isHidden = false;
            }
        }
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.ngAfterContentInit = function () {
        this.isNarrowLayout = this.isElementVisible('.sprk-c-Masthead__menu');
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.isElementVisible = function (selector) {
        if (typeof window === 'undefined') {
            return;
        }
        var element = document.querySelector(selector);
        if (!element) {
            return;
        }
        var elementDisplayValue = window.getComputedStyle(element).display;
        var elementVisibilityValue = window.getComputedStyle(element).visibility;
        var elementIsVisible = elementDisplayValue === 'none' || elementVisibilityValue === 'hidden'
            ? false
            : true;
        return elementIsVisible;
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.scrollYDirection = function () {
        if (typeof window !== 'undefined') {
            var newScrollPos = window.scrollY;
            if (newScrollPos < 0) {
                return;
            }
            var diff = newScrollPos - this.scrollPosition;
            var direction = diff > 0 ? 'down' : 'up';
            this.scrollPosition = newScrollPos;
            return direction;
        }
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.checkScrollDirection = function () {
        var newDirection = this.scrollYDirection();
        if (this.scrollDirection !== newDirection) {
            this.scrollDirection = newDirection;
            this.scrollDirection === 'down'
                ? (this.isHidden = true)
                : (this.isHidden = false);
        }
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.getClasses = function () {
        var classArray = ['sprk-c-Masthead', 'sprk-o-Stack'];
        if (this.additionalClasses) {
            this.additionalClasses.split(' ').forEach(function (className) {
                classArray.push(className);
            });
        }
        if (this.isNarrowNavOpen) {
            classArray.push('sprk-c-Masthead--open');
        }
        if (this.isScrolled) {
            classArray.push('sprk-c-Masthead--scroll');
        }
        if (this.isHidden) {
            classArray.push('sprk-c-Masthead--hidden');
        }
        return classArray.join(' ');
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.getNarrowNavClasses = function () {
        var classArray = [];
        if (this.additionalNarrowNavClasses) {
            this.additionalNarrowNavClasses.split(' ').forEach(function (className) {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.getSecondaryNavClasses = function () {
        var classArray = [
            'sprk-c-Masthead__big-nav-items',
            'sprk-o-Stack',
            'sprk-o-Stack--misc-a',
            'sprk-o-Stack--center-row',
            'sprk-o-Stack--split@xxs',
            'sprk-b-List',
            'sprk-b-List--bare'
        ];
        if (this.additionalBigNavClasses) {
            this.additionalBigNavClasses.split(' ').forEach(function (className) {
                classArray.push(className);
            });
        }
        return classArray.join(' ');
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.toggleNarrowNav = function (event) {
        event.preventDefault();
        if (this.isNarrowNavOpen) {
            this.closeNarrowNav();
        }
        else {
            this.openNarrowNav();
        }
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.openNarrowNav = function () {
        this.renderer.addClass(document.body, 'sprk-u-Overflow--hidden');
        this.renderer.addClass(document.body.parentElement, 'sprk-u-Overflow--hidden');
        this.renderer.addClass(document.body, 'sprk-u-Height--100');
        this.renderer.addClass(document.body.parentElement, 'sprk-u-Height--100');
        this.isNarrowNavOpen = true;
    };
    /**
     * @ignore
     */
    SprkMastheadComponent.prototype.closeNarrowNav = function () {
        this.renderer.removeClass(document.body, 'sprk-u-Overflow--hidden');
        this.renderer.removeClass(document.body.parentElement, 'sprk-u-Overflow--hidden');
        this.renderer.removeClass(document.body, 'sprk-u-Height--100');
        this.renderer.removeClass(document.body.parentElement, 'sprk-u-Height--100');
        this.isNarrowNavOpen = false;
    };
    SprkMastheadComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: Router }
    ]; };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], SprkMastheadComponent.prototype, "logoHref", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], SprkMastheadComponent.prototype, "logoLinkScreenReaderText", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkMastheadComponent.prototype, "additionalClasses", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkMastheadComponent.prototype, "additionalBigNavClasses", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkMastheadComponent.prototype, "additionalNarrowNavClasses", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], SprkMastheadComponent.prototype, "narrowNavLinks", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], SprkMastheadComponent.prototype, "isNarrowNavOpen", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], SprkMastheadComponent.prototype, "idString", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], SprkMastheadComponent.prototype, "bigNavLinks", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], SprkMastheadComponent.prototype, "narrowSelector", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], SprkMastheadComponent.prototype, "narrowNavId", void 0);
    __decorate([
        HostListener('window:orientationchange'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], SprkMastheadComponent.prototype, "handleResizeEvent", null);
    __decorate([
        HostListener('window:scroll', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], SprkMastheadComponent.prototype, "onScroll", null);
    __decorate([
        HostListener('window:resize', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], SprkMastheadComponent.prototype, "onResize", null);
    SprkMastheadComponent = __decorate([
        Component({
            selector: 'sprk-masthead',
            template: "\n    <header [ngClass]=\"getClasses()\" role=\"banner\" [attr.data-id]=\"idString\">\n      <div\n        class=\"sprk-c-Masthead__content sprk-o-Stack__item sprk-o-Stack sprk-o-Stack--split@xxs\"\n      >\n        <div\n          class=\"sprk-c-Masthead__menu sprk-o-Stack__item sprk-o-Stack__item--center-column@xxs\"\n        >\n          <button\n            class=\"sprk-c-Menu\"\n            type=\"button\"\n            [attr.aria-expanded]=\"isNarrowNavOpen ? true : false\"\n            (click)=\"toggleNarrowNav($event)\"\n            [attr.aria-controls]=\"narrowNavId\"\n          >\n            <span class=\"sprk-u-ScreenReaderText\">Toggle Navigation</span>\n            <svg\n              [ngClass]=\"{\n                'sprk-c-Icon': true,\n                'sprk-c-Icon--l': true,\n                'sprk-c-Menu__icon': true,\n                'sprk-c-Menu__icon--open': isNarrowNavOpen\n              }\"\n              aria-hidden=\"true\"\n              viewBox=\"0 0 64 64\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <g>\n                <path\n                  class=\"sprk-c-Menu__line sprk-c-Menu__line--two\"\n                  d=\"m8 32h48\"\n                />\n                <path\n                  class=\"sprk-c-Menu__line sprk-c-Menu__line--one\"\n                  d=\"m8 18.68h48\"\n                />\n                <path\n                  class=\"sprk-c-Menu__line sprk-c-Menu__line--three\"\n                  d=\"m8 45.32h48\"\n                />\n              </g>\n            </svg>\n          </button>\n        </div>\n\n        <div\n          class=\"sprk-c-Masthead__branding sprk-o-Stack__item sprk-o-Stack__item--center-column@xxs\"\n        >\n          <a sprkLink [attr.href]=\"logoHref\" variant=\"unstyled\">\n            <ng-content select=\"[logo-slot]\"></ng-content>\n            <span class=\"sprk-u-ScreenReaderText\">{{\n              logoLinkScreenReaderText\n            }}</span>\n          </a>\n        </div>\n\n        <div\n          class=\"sprk-c-Masthead__nav-item sprk-o-Stack__item sprk-o-Stack__item--center-column@xxs\"\n        >\n          <ng-content select=\"[navItem-slot]\"></ng-content>\n        </div>\n        <nav\n          class=\"\n          sprk-c-Masthead__little-nav\n          sprk-o-Stack__item\n          sprk-o-Stack__item--flex@xxs\n          sprk-o-Stack\n          sprk-o-Stack--misc-a\n          sprk-o-Stack--split@xxs\n          sprk-o-Stack--end-row\"\n          role=\"navigation\"\n        >\n          <ng-content select=\"[little-nav-slot]\"></ng-content>\n\n          <ng-content select=\"[utility-slot]\"></ng-content>\n        </nav>\n      </div>\n\n      <div class=\"sprk-o-Stack__item\">\n        <nav\n          class=\"sprk-c-Masthead__big-nav\"\n          role=\"navigation\"\n          [attr.data-id]=\"idString\"\n          *ngIf=\"bigNavLinks\"\n        >\n          <ul [ngClass]=\"getSecondaryNavClasses()\">\n            <li\n              *ngFor=\"let link of bigNavLinks\"\n              [ngClass]=\"{\n                'sprk-c-Masthead__big-nav-item': true,\n                'sprk-o-Stack__item': true,\n                'sprk-c-Masthead__big-nav-item--open':\n                  link.focused && link.subNav\n              }\"\n              routerLinkActive=\"sprk-c-Masthead__big-nav-item--active\"\n              [attr.aria-haspopup]=\"link.subNav ? 'true' : null\"\n            >\n              <div *ngIf=\"link.subNav\">\n                <sprk-dropdown\n                  [choices]=\"link.subNav\"\n                  additionalTriggerClasses=\"sprk-b-Link--plain sprk-c-Masthead__link sprk-c-Masthead__link--big-nav\"\n                  additionalClasses=\"sprk-u-TextAlign--left\"\n                  triggerIconType=\"chevron-down\"\n                  [analyticsString]=\"link.analyticsString\"\n                  [triggerText]=\"link.text\"\n                ></sprk-dropdown>\n              </div>\n              <div *ngIf=\"!link.subNav\">\n                <a\n                  sprkLink\n                  variant=\"plain\"\n                  [analyticsString]=\"link.analyticsString\"\n                  class=\"sprk-c-Masthead__link sprk-c-Masthead__link--big-nav\"\n                  [attr.href]=\"link.href\"\n                >\n                  {{ link.text }}\n                </a>\n              </div>\n            </li>\n          </ul>\n        </nav>\n      </div>\n\n      <nav\n        *ngIf=\"isNarrowNavOpen\"\n        class=\"sprk-c-Masthead__narrow-nav\"\n        role=\"navigation\"\n        [id]=\"narrowNavId\"\n      >\n        <sprk-dropdown\n          *ngIf=\"narrowSelector\"\n          dropdownType=\"mastheadSelector\"\n          additionalClasses=\"sprk-c-Masthead__selector-dropdown\"\n          additionalTriggerClasses=\"\n            sprk-c-Masthead__selector\n            sprk-b-Link\n            sprk-b-Link--plain\n            sprk-o-Stack\n            sprk-o-Stack--split@xxs\n            sprk-o-Stack--center-column\"\n          additionalTriggerTextClasses=\"sprk-o-Stack__item sprk-o-Stack__item--flex@xxs\"\n          additionalIconClasses=\"sprk-Stack__item sprk-u-mrs\"\n          [triggerText]=\"narrowSelector['trigger'].text\"\n          selector=\"Select One\"\n          triggerIconType=\"chevron-down\"\n          [choices]=\"narrowSelector['choices']\"\n        >\n          <div\n            *ngIf=\"narrowSelector['footer']\"\n            class=\"sprk-c-Dropdown__footer sprk-u-TextAlign--center\"\n            sprkDropdownFooter\n          >\n            <a\n              sprkLink\n              variant=\"unstyled\"\n              [analyticsString]=\"narrowSelector['footer'].analyticsString\"\n              [attr.href]=\"narrowSelector['footer'].href\"\n              class=\"sprk-c-Button sprk-c-Button--tertiary\"\n            >\n              {{ narrowSelector['footer'].text }}\n            </a>\n          </div>\n        </sprk-dropdown>\n\n        <sprk-masthead-accordion [additionalClasses]=\"getNarrowNavClasses()\">\n          <div *ngFor=\"let narrowLink of narrowNavLinks\">\n            <div *ngIf=\"narrowLink.subNav\">\n              <sprk-masthead-accordion-item\n                iconTypeOpen=\"chevron-down\"\n                iconTypeClosed=\"chevron-down\"\n                [leadingIcon]=\"narrowLink.leadingIcon\"\n                [isActive]=\"narrowLink.active\"\n                [title]=\"narrowLink.text\"\n              >\n                <ul\n                  class=\"sprk-b-List sprk-b-List--bare sprk-c-MastheadAccordion__details\"\n                >\n                  <li\n                    class=\"sprk-c-MastheadAccordion__item\"\n                    *ngFor=\"let subNavLink of narrowLink.subNav\"\n                  >\n                    <a\n                      sprkLink\n                      variant=\"unstyled\"\n                      class=\"sprk-c-MastheadAccordion__summary\"\n                      [attr.href]=\"subNavLink.href\"\n                      [analyticsString]=\"subNavLink.analyticsString\"\n                    >\n                      <sprk-icon\n                        [iconType]=\"subNavLink.leadingIcon\"\n                        additionalClasses=\"sprk-c-Icon--stroke-current-color sprk-u-mrs\"\n                        *ngIf=\"subNavLink.leadingIcon\"\n                      ></sprk-icon>\n                      {{ subNavLink.text }}\n                    </a>\n                  </li>\n                </ul>\n              </sprk-masthead-accordion-item>\n            </div>\n            <div *ngIf=\"!narrowLink.subNav\">\n              <li\n                [ngClass]=\"{\n                  'sprk-c-MastheadAccordion__item': true,\n                  'sprk-c-MastheadAccordion__item--active': narrowLink.active\n                }\"\n              >\n                <a\n                  sprkLink\n                  variant=\"unstyled\"\n                  class=\"sprk-c-MastheadAccordion__summary\"\n                  [attr.href]=\"narrowLink.href\"\n                  [analyticsString]=\"narrowLink.analyticsString\"\n                >\n                  <span class=\"sprk-c-MastheadAccordion__heading\">\n                    <sprk-icon\n                      [iconType]=\"narrowLink.leadingIcon\"\n                      additionalClasses=\"sprk-c-Icon--stroke-current-color sprk-u-mrs\"\n                      *ngIf=\"narrowLink.leadingIcon\"\n                    ></sprk-icon>\n                    {{ narrowLink.text }}\n                  </span>\n                </a>\n              </li>\n            </div>\n          </div>\n        </sprk-masthead-accordion>\n        <ng-content select=\"[narrowNavFooter]\"></ng-content>\n      </nav>\n    </header>\n  "
        }),
        __metadata("design:paramtypes", [Renderer2, Router])
    ], SprkMastheadComponent);
    return SprkMastheadComponent;
}());
export { SprkMastheadComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Byay1tYXN0aGVhZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcmtkZXNpZ25zeXN0ZW0vc3BhcmstYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3NwcmstbWFzdGhlYWQvc3Byay1tYXN0aGVhZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFDTCxTQUFTLEVBQ1QsZ0JBQWdCLEVBQ2pCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9ELE9BQU8sS0FBSyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBZ1A1QjtJQUNFOztPQUVHO0lBQ0gsK0JBQW9CLFFBQW1CLEVBQUUsTUFBYztRQUF2RCxpQkFNQztRQU5tQixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBUXhDOztXQUVHO1FBRUYsYUFBUSxHQUFHLEdBQUcsQ0FBQztRQUNmOzs7O1dBSUc7UUFFSCw2QkFBd0IsR0FBRyxvQkFBb0IsQ0FBQztRQStCaEQ7OztXQUdHO1FBRUgsb0JBQWUsR0FBRyxLQUFLLENBQUM7UUE0QnhCOzs7V0FHRztRQUVILGdCQUFXLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBRXREOztXQUVHO1FBQ0gsYUFBUSxHQUFHLGNBQWMsQ0FBQztRQUMxQjs7V0FFRztRQUNILGdCQUFXLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzNCOztXQUVHO1FBQ0gsZ0JBQVcsR0FBRyxrQ0FBZ0MsSUFBSSxDQUFDLFdBQWEsQ0FBQztRQUNqRTs7V0FFRztRQUNILGVBQVUsR0FBRyxLQUFLLENBQUM7UUFDbkI7O1dBRUc7UUFDSCxtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUN2Qjs7V0FFRztRQUNILG9CQUFlLEdBQUcsSUFB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QUFvQixDQUNyQixDQUFDO1FBQ0YsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7SUFDL0IsQ0FBQzs7Z0JBdFY2QixTQUFTO2dCQUFVLE1BQU07O0lBWXZEO1FBREMsS0FBSyxFQUFFOzsyREFDTztJQU9mO1FBREMsS0FBSyxFQUFFOzsyRUFDd0M7SUFPaEQ7UUFEQyxLQUFLLEVBQUU7O29FQUNrQjtJQU8xQjtRQURDLEtBQUssRUFBRTs7MEVBQ3dCO0lBT2hDO1FBREMsS0FBSyxFQUFFOzs2RUFDMkI7SUFTbkM7UUFEQyxLQUFLLEVBQUU7O2lFQUM2QjtJQU1yQztRQURDLEtBQUssRUFBRTs7a0VBQ2dCO0lBVXhCO1FBREMsS0FBSyxFQUFFOzsyREFDUztJQVNqQjtRQURDLEtBQUssRUFBRTs7OERBQ3VCO0lBUS9CO1FBREMsS0FBSyxFQUFFOztpRUFDNEI7SUFNcEM7UUFEQyxLQUFLLEVBQUU7OzhEQUM4QztJQXNEdEQ7UUFEQyxZQUFZLENBQUMsMEJBQTBCLENBQUM7Ozs7a0VBR3hDO0lBTUQ7UUFEQyxZQUFZLENBQUMsZUFBZSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUM7Ozs7eURBTXpDO0lBUUQ7UUFEQyxZQUFZLENBQUMsZUFBZSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUM7Ozs7eURBSXpDO0lBMUtVLHFCQUFxQjtRQXpPakMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGVBQWU7WUFDekIsUUFBUSxFQUFFLGdrUkFxT1Q7U0FDRixDQUFDO3lDQUs4QixTQUFTLEVBQVUsTUFBTTtPQUo1QyxxQkFBcUIsQ0EyVmpDO0lBQUQsNEJBQUM7Q0FBQSxBQTNWRCxJQTJWQztTQTNWWSxxQkFBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEhvc3RMaXN0ZW5lcixcbiAgSW5wdXQsXG4gIFJlbmRlcmVyMixcbiAgQWZ0ZXJDb250ZW50SW5pdFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlciwgRXZlbnQsIE5hdmlnYXRpb25FbmQgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHtcbiAgSVNwcmtOYXJyb3dOYXZMaW5rLFxuICBJU3Bya05hcnJvd1NlbGVjdG9yLFxuICBJU3Bya0JpZ05hdkxpbmtcbn0gZnJvbSAnLi9zcHJrLW1hc3RoZWFkLmludGVyZmFjZXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzcHJrLW1hc3RoZWFkJyxcbiAgdGVtcGxhdGU6IGBcbiAgICA8aGVhZGVyIFtuZ0NsYXNzXT1cImdldENsYXNzZXMoKVwiIHJvbGU9XCJiYW5uZXJcIiBbYXR0ci5kYXRhLWlkXT1cImlkU3RyaW5nXCI+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwic3Byay1jLU1hc3RoZWFkX19jb250ZW50IHNwcmstby1TdGFja19faXRlbSBzcHJrLW8tU3RhY2sgc3Byay1vLVN0YWNrLS1zcGxpdEB4eHNcIlxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRfX21lbnUgc3Byay1vLVN0YWNrX19pdGVtIHNwcmstby1TdGFja19faXRlbS0tY2VudGVyLWNvbHVtbkB4eHNcIlxuICAgICAgICA+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWVudVwiXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwiaXNOYXJyb3dOYXZPcGVuID8gdHJ1ZSA6IGZhbHNlXCJcbiAgICAgICAgICAgIChjbGljayk9XCJ0b2dnbGVOYXJyb3dOYXYoJGV2ZW50KVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWNvbnRyb2xzXT1cIm5hcnJvd05hdklkXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNwcmstdS1TY3JlZW5SZWFkZXJUZXh0XCI+VG9nZ2xlIE5hdmlnYXRpb248L3NwYW4+XG4gICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAnc3Byay1jLUljb24nOiB0cnVlLFxuICAgICAgICAgICAgICAgICdzcHJrLWMtSWNvbi0tbCc6IHRydWUsXG4gICAgICAgICAgICAgICAgJ3NwcmstYy1NZW51X19pY29uJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAnc3Byay1jLU1lbnVfX2ljb24tLW9wZW4nOiBpc05hcnJvd05hdk9wZW5cbiAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgNjQgNjRcIlxuICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGc+XG4gICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLU1lbnVfX2xpbmUgc3Byay1jLU1lbnVfX2xpbmUtLXR3b1wiXG4gICAgICAgICAgICAgICAgICBkPVwibTggMzJoNDhcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLU1lbnVfX2xpbmUgc3Byay1jLU1lbnVfX2xpbmUtLW9uZVwiXG4gICAgICAgICAgICAgICAgICBkPVwibTggMTguNjhoNDhcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLU1lbnVfX2xpbmUgc3Byay1jLU1lbnVfX2xpbmUtLXRocmVlXCJcbiAgICAgICAgICAgICAgICAgIGQ9XCJtOCA0NS4zMmg0OFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9nPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cInNwcmstYy1NYXN0aGVhZF9fYnJhbmRpbmcgc3Byay1vLVN0YWNrX19pdGVtIHNwcmstby1TdGFja19faXRlbS0tY2VudGVyLWNvbHVtbkB4eHNcIlxuICAgICAgICA+XG4gICAgICAgICAgPGEgc3Bya0xpbmsgW2F0dHIuaHJlZl09XCJsb2dvSHJlZlwiIHZhcmlhbnQ9XCJ1bnN0eWxlZFwiPlxuICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW2xvZ28tc2xvdF1cIj48L25nLWNvbnRlbnQ+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNwcmstdS1TY3JlZW5SZWFkZXJUZXh0XCI+e3tcbiAgICAgICAgICAgICAgbG9nb0xpbmtTY3JlZW5SZWFkZXJUZXh0XG4gICAgICAgICAgICB9fTwvc3Bhbj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cInNwcmstYy1NYXN0aGVhZF9fbmF2LWl0ZW0gc3Byay1vLVN0YWNrX19pdGVtIHNwcmstby1TdGFja19faXRlbS0tY2VudGVyLWNvbHVtbkB4eHNcIlxuICAgICAgICA+XG4gICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW25hdkl0ZW0tc2xvdF1cIj48L25nLWNvbnRlbnQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8bmF2XG4gICAgICAgICAgY2xhc3M9XCJcbiAgICAgICAgICBzcHJrLWMtTWFzdGhlYWRfX2xpdHRsZS1uYXZcbiAgICAgICAgICBzcHJrLW8tU3RhY2tfX2l0ZW1cbiAgICAgICAgICBzcHJrLW8tU3RhY2tfX2l0ZW0tLWZsZXhAeHhzXG4gICAgICAgICAgc3Byay1vLVN0YWNrXG4gICAgICAgICAgc3Byay1vLVN0YWNrLS1taXNjLWFcbiAgICAgICAgICBzcHJrLW8tU3RhY2stLXNwbGl0QHh4c1xuICAgICAgICAgIHNwcmstby1TdGFjay0tZW5kLXJvd1wiXG4gICAgICAgICAgcm9sZT1cIm5hdmlnYXRpb25cIlxuICAgICAgICA+XG4gICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW2xpdHRsZS1uYXYtc2xvdF1cIj48L25nLWNvbnRlbnQ+XG5cbiAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJbdXRpbGl0eS1zbG90XVwiPjwvbmctY29udGVudD5cbiAgICAgICAgPC9uYXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cInNwcmstby1TdGFja19faXRlbVwiPlxuICAgICAgICA8bmF2XG4gICAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRfX2JpZy1uYXZcIlxuICAgICAgICAgIHJvbGU9XCJuYXZpZ2F0aW9uXCJcbiAgICAgICAgICBbYXR0ci5kYXRhLWlkXT1cImlkU3RyaW5nXCJcbiAgICAgICAgICAqbmdJZj1cImJpZ05hdkxpbmtzXCJcbiAgICAgICAgPlxuICAgICAgICAgIDx1bCBbbmdDbGFzc109XCJnZXRTZWNvbmRhcnlOYXZDbGFzc2VzKClcIj5cbiAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgbGluayBvZiBiaWdOYXZMaW5rc1wiXG4gICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAnc3Byay1jLU1hc3RoZWFkX19iaWctbmF2LWl0ZW0nOiB0cnVlLFxuICAgICAgICAgICAgICAgICdzcHJrLW8tU3RhY2tfX2l0ZW0nOiB0cnVlLFxuICAgICAgICAgICAgICAgICdzcHJrLWMtTWFzdGhlYWRfX2JpZy1uYXYtaXRlbS0tb3Blbic6XG4gICAgICAgICAgICAgICAgICBsaW5rLmZvY3VzZWQgJiYgbGluay5zdWJOYXZcbiAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgIHJvdXRlckxpbmtBY3RpdmU9XCJzcHJrLWMtTWFzdGhlYWRfX2JpZy1uYXYtaXRlbS0tYWN0aXZlXCJcbiAgICAgICAgICAgICAgW2F0dHIuYXJpYS1oYXNwb3B1cF09XCJsaW5rLnN1Yk5hdiA/ICd0cnVlJyA6IG51bGxcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwibGluay5zdWJOYXZcIj5cbiAgICAgICAgICAgICAgICA8c3Byay1kcm9wZG93blxuICAgICAgICAgICAgICAgICAgW2Nob2ljZXNdPVwibGluay5zdWJOYXZcIlxuICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFRyaWdnZXJDbGFzc2VzPVwic3Byay1iLUxpbmstLXBsYWluIHNwcmstYy1NYXN0aGVhZF9fbGluayBzcHJrLWMtTWFzdGhlYWRfX2xpbmstLWJpZy1uYXZcIlxuICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbENsYXNzZXM9XCJzcHJrLXUtVGV4dEFsaWduLS1sZWZ0XCJcbiAgICAgICAgICAgICAgICAgIHRyaWdnZXJJY29uVHlwZT1cImNoZXZyb24tZG93blwiXG4gICAgICAgICAgICAgICAgICBbYW5hbHl0aWNzU3RyaW5nXT1cImxpbmsuYW5hbHl0aWNzU3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgIFt0cmlnZ2VyVGV4dF09XCJsaW5rLnRleHRcIlxuICAgICAgICAgICAgICAgID48L3NwcmstZHJvcGRvd24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIWxpbmsuc3ViTmF2XCI+XG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgIHNwcmtMaW5rXG4gICAgICAgICAgICAgICAgICB2YXJpYW50PVwicGxhaW5cIlxuICAgICAgICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJsaW5rLmFuYWx5dGljc1N0cmluZ1wiXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYy1NYXN0aGVhZF9fbGluayBzcHJrLWMtTWFzdGhlYWRfX2xpbmstLWJpZy1uYXZcIlxuICAgICAgICAgICAgICAgICAgW2F0dHIuaHJlZl09XCJsaW5rLmhyZWZcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHt7IGxpbmsudGV4dCB9fVxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvbmF2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxuYXZcbiAgICAgICAgKm5nSWY9XCJpc05hcnJvd05hdk9wZW5cIlxuICAgICAgICBjbGFzcz1cInNwcmstYy1NYXN0aGVhZF9fbmFycm93LW5hdlwiXG4gICAgICAgIHJvbGU9XCJuYXZpZ2F0aW9uXCJcbiAgICAgICAgW2lkXT1cIm5hcnJvd05hdklkXCJcbiAgICAgID5cbiAgICAgICAgPHNwcmstZHJvcGRvd25cbiAgICAgICAgICAqbmdJZj1cIm5hcnJvd1NlbGVjdG9yXCJcbiAgICAgICAgICBkcm9wZG93blR5cGU9XCJtYXN0aGVhZFNlbGVjdG9yXCJcbiAgICAgICAgICBhZGRpdGlvbmFsQ2xhc3Nlcz1cInNwcmstYy1NYXN0aGVhZF9fc2VsZWN0b3ItZHJvcGRvd25cIlxuICAgICAgICAgIGFkZGl0aW9uYWxUcmlnZ2VyQ2xhc3Nlcz1cIlxuICAgICAgICAgICAgc3Byay1jLU1hc3RoZWFkX19zZWxlY3RvclxuICAgICAgICAgICAgc3Byay1iLUxpbmtcbiAgICAgICAgICAgIHNwcmstYi1MaW5rLS1wbGFpblxuICAgICAgICAgICAgc3Byay1vLVN0YWNrXG4gICAgICAgICAgICBzcHJrLW8tU3RhY2stLXNwbGl0QHh4c1xuICAgICAgICAgICAgc3Byay1vLVN0YWNrLS1jZW50ZXItY29sdW1uXCJcbiAgICAgICAgICBhZGRpdGlvbmFsVHJpZ2dlclRleHRDbGFzc2VzPVwic3Byay1vLVN0YWNrX19pdGVtIHNwcmstby1TdGFja19faXRlbS0tZmxleEB4eHNcIlxuICAgICAgICAgIGFkZGl0aW9uYWxJY29uQ2xhc3Nlcz1cInNwcmstU3RhY2tfX2l0ZW0gc3Byay11LW1yc1wiXG4gICAgICAgICAgW3RyaWdnZXJUZXh0XT1cIm5hcnJvd1NlbGVjdG9yWyd0cmlnZ2VyJ10udGV4dFwiXG4gICAgICAgICAgc2VsZWN0b3I9XCJTZWxlY3QgT25lXCJcbiAgICAgICAgICB0cmlnZ2VySWNvblR5cGU9XCJjaGV2cm9uLWRvd25cIlxuICAgICAgICAgIFtjaG9pY2VzXT1cIm5hcnJvd1NlbGVjdG9yWydjaG9pY2VzJ11cIlxuICAgICAgICA+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgKm5nSWY9XCJuYXJyb3dTZWxlY3RvclsnZm9vdGVyJ11cIlxuICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWMtRHJvcGRvd25fX2Zvb3RlciBzcHJrLXUtVGV4dEFsaWduLS1jZW50ZXJcIlxuICAgICAgICAgICAgc3Bya0Ryb3Bkb3duRm9vdGVyXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgc3Bya0xpbmtcbiAgICAgICAgICAgICAgdmFyaWFudD1cInVuc3R5bGVkXCJcbiAgICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJuYXJyb3dTZWxlY3RvclsnZm9vdGVyJ10uYW5hbHl0aWNzU3RyaW5nXCJcbiAgICAgICAgICAgICAgW2F0dHIuaHJlZl09XCJuYXJyb3dTZWxlY3RvclsnZm9vdGVyJ10uaHJlZlwiXG4gICAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLUJ1dHRvbiBzcHJrLWMtQnV0dG9uLS10ZXJ0aWFyeVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt7IG5hcnJvd1NlbGVjdG9yWydmb290ZXInXS50ZXh0IH19XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvc3Byay1kcm9wZG93bj5cblxuICAgICAgICA8c3Byay1tYXN0aGVhZC1hY2NvcmRpb24gW2FkZGl0aW9uYWxDbGFzc2VzXT1cImdldE5hcnJvd05hdkNsYXNzZXMoKVwiPlxuICAgICAgICAgIDxkaXYgKm5nRm9yPVwibGV0IG5hcnJvd0xpbmsgb2YgbmFycm93TmF2TGlua3NcIj5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJuYXJyb3dMaW5rLnN1Yk5hdlwiPlxuICAgICAgICAgICAgICA8c3Byay1tYXN0aGVhZC1hY2NvcmRpb24taXRlbVxuICAgICAgICAgICAgICAgIGljb25UeXBlT3Blbj1cImNoZXZyb24tZG93blwiXG4gICAgICAgICAgICAgICAgaWNvblR5cGVDbG9zZWQ9XCJjaGV2cm9uLWRvd25cIlxuICAgICAgICAgICAgICAgIFtsZWFkaW5nSWNvbl09XCJuYXJyb3dMaW5rLmxlYWRpbmdJY29uXCJcbiAgICAgICAgICAgICAgICBbaXNBY3RpdmVdPVwibmFycm93TGluay5hY3RpdmVcIlxuICAgICAgICAgICAgICAgIFt0aXRsZV09XCJuYXJyb3dMaW5rLnRleHRcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHVsXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYi1MaXN0IHNwcmstYi1MaXN0LS1iYXJlIHNwcmstYy1NYXN0aGVhZEFjY29yZGlvbl9fZGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Byay1jLU1hc3RoZWFkQWNjb3JkaW9uX19pdGVtXCJcbiAgICAgICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IHN1Yk5hdkxpbmsgb2YgbmFycm93TGluay5zdWJOYXZcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgIHNwcmtMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInVuc3R5bGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInNwcmstYy1NYXN0aGVhZEFjY29yZGlvbl9fc3VtbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgW2F0dHIuaHJlZl09XCJzdWJOYXZMaW5rLmhyZWZcIlxuICAgICAgICAgICAgICAgICAgICAgIFthbmFseXRpY3NTdHJpbmddPVwic3ViTmF2TGluay5hbmFseXRpY3NTdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwcmstaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgW2ljb25UeXBlXT1cInN1Yk5hdkxpbmsubGVhZGluZ0ljb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbENsYXNzZXM9XCJzcHJrLWMtSWNvbi0tc3Ryb2tlLWN1cnJlbnQtY29sb3Igc3Byay11LW1yc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cInN1Yk5hdkxpbmsubGVhZGluZ0ljb25cIlxuICAgICAgICAgICAgICAgICAgICAgID48L3NwcmstaWNvbj5cbiAgICAgICAgICAgICAgICAgICAgICB7eyBzdWJOYXZMaW5rLnRleHQgfX1cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICA8L3NwcmstbWFzdGhlYWQtYWNjb3JkaW9uLWl0ZW0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCIhbmFycm93TGluay5zdWJOYXZcIj5cbiAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICAgICAgICAgJ3NwcmstYy1NYXN0aGVhZEFjY29yZGlvbl9faXRlbSc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAnc3Byay1jLU1hc3RoZWFkQWNjb3JkaW9uX19pdGVtLS1hY3RpdmUnOiBuYXJyb3dMaW5rLmFjdGl2ZVxuICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgIHNwcmtMaW5rXG4gICAgICAgICAgICAgICAgICB2YXJpYW50PVwidW5zdHlsZWRcIlxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRBY2NvcmRpb25fX3N1bW1hcnlcIlxuICAgICAgICAgICAgICAgICAgW2F0dHIuaHJlZl09XCJuYXJyb3dMaW5rLmhyZWZcIlxuICAgICAgICAgICAgICAgICAgW2FuYWx5dGljc1N0cmluZ109XCJuYXJyb3dMaW5rLmFuYWx5dGljc1N0cmluZ1wiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzcHJrLWMtTWFzdGhlYWRBY2NvcmRpb25fX2hlYWRpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwcmstaWNvblxuICAgICAgICAgICAgICAgICAgICAgIFtpY29uVHlwZV09XCJuYXJyb3dMaW5rLmxlYWRpbmdJY29uXCJcbiAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQ2xhc3Nlcz1cInNwcmstYy1JY29uLS1zdHJva2UtY3VycmVudC1jb2xvciBzcHJrLXUtbXJzXCJcbiAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cIm5hcnJvd0xpbmsubGVhZGluZ0ljb25cIlxuICAgICAgICAgICAgICAgICAgICA+PC9zcHJrLWljb24+XG4gICAgICAgICAgICAgICAgICAgIHt7IG5hcnJvd0xpbmsudGV4dCB9fVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3NwcmstbWFzdGhlYWQtYWNjb3JkaW9uPlxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJbbmFycm93TmF2Rm9vdGVyXVwiPjwvbmctY29udGVudD5cbiAgICAgIDwvbmF2PlxuICAgIDwvaGVhZGVyPlxuICBgXG59KVxuZXhwb3J0IGNsYXNzIFNwcmtNYXN0aGVhZENvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQge1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLCByb3V0ZXI6IFJvdXRlcikge1xuICAgIHJvdXRlci5ldmVudHMuc3Vic2NyaWJlKChldmVudDogRXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQpIHtcbiAgICAgICAgdGhpcy5jbG9zZU5hcnJvd05hdigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAvKipcbiAgKiAgVGhlIGBocmVmYCB2YWx1ZSBvZiB0aGUgbG9nby5cbiAgKi9cbiAgQElucHV0KClcbiAgbG9nb0hyZWYgPSAnLyc7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgc3VwcGxpZWQgd2lsbCBiZSB1c2VkIGFzXG4gICAqIHNjcmVlbiByZWFkZXIgdGV4dCB0aGF0IGlzIHZpc3VhbGx5IGhpZGRlblxuICAgKiBmb3IgdGhlIGxpbmsgdGhhdCB3cmFwcyB0aGUgbG9nby5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGxvZ29MaW5rU2NyZWVuUmVhZGVyVGV4dCA9ICdHbyB0byB0aGUgaG9tZXBhZ2UnO1xuICAvKipcbiAgICogRXhwZWN0cyBhIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmdcbiAgICogb2YgY2xhc3NlcyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICogY29tcG9uZW50LlxuICAgKi9cbiAgQElucHV0KClcbiAgYWRkaXRpb25hbENsYXNzZXM6IHN0cmluZztcbiAgLyoqXG4gICAqIEV4cGVjdHMgYSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nXG4gICAqIG9mIGNsYXNzZXMgdG8gYmUgYWRkZWQgdG8gdGhlXG4gICAqIGJpZyBuYXZpZ2F0aW9uIGxpbmsgY29udGFpbmVyLlxuICAgKi9cbiAgQElucHV0KClcbiAgYWRkaXRpb25hbEJpZ05hdkNsYXNzZXM6IHN0cmluZztcbiAgLyoqXG4gICAqIEV4cGVjdHMgYSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nXG4gICAqIG9mIGNsYXNzZXMgdG8gYmUgYWRkZWQgdG8gdGhlXG4gICAqIG5hcnJvdyBuYXZpZ2F0aW9uIGNvbnRhaW5lci5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGFkZGl0aW9uYWxOYXJyb3dOYXZDbGFzc2VzOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBFeHBlY3RzIGFuIGFycmF5IG9mXG4gICAqIFtJU3Bya05hcnJvd05hdkxpbmtdKGh0dHBzOi8vZ2l0aHViLmNvbS9zcGFya2Rlc2lnbnN5c3RlbS9zcGFyay1kZXNpZ24tc3lzdGVtL3RyZWUvbWFzdGVyL3NyYy9hbmd1bGFyL3Byb2plY3RzL3NwYXJrLWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL3NwcmstbWFzdGhlYWQvc3Byay1tYXN0aGVhZC5pbnRlcmZhY2VzLnRzKVxuICAgKiB0byBiZVxuICAgKiByZXByZXNlbnRlZCBpbiB0aGUgbmFycm93IG5hdiBlbGVtZW50XG4gICAqIG9mIHRoZSBNYXN0aGVhZCBjb21wb25lbnQuXG4gICAqL1xuICBASW5wdXQoKVxuICBuYXJyb3dOYXZMaW5rczogSVNwcmtOYXJyb3dOYXZMaW5rW107XG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZVxuICAgKiBuYXJyb3cgbmF2IGVsZW1lbnQgb2YgdGhlIE1hc3RoZWFkIGNvbXBvbmVudC5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGlzTmFycm93TmF2T3BlbiA9IGZhbHNlO1xuICAvKipcbiAgICogVGhlIHZhbHVlIHN1cHBsaWVkIHdpbGwgYmUgYXNzaWduZWRcbiAgICogdG8gdGhlIGBkYXRhLWlkYCBhdHRyaWJ1dGUgb24gdGhlXG4gICAqIGNvbXBvbmVudC4gVGhpcyBpcyBpbnRlbmRlZCB0byBiZVxuICAgKiB1c2VkIGFzIGEgc2VsZWN0b3IgZm9yIGF1dG9tYXRlZFxuICAgKiB0b29scy4gVGhpcyB2YWx1ZSBzaG91bGQgYmUgdW5pcXVlXG4gICAqIHBlciBwYWdlLlxuICAgKi9cbiAgQElucHV0KClcbiAgaWRTdHJpbmc6IHN0cmluZztcbiAgLyoqXG4gICAqIEV4cGVjdHMgYW4gYXJyYXkgb2ZcbiAgICogW0lTcHJrQmlnTmF2TGlua10oaHR0cHM6Ly9naXRodWIuY29tL3NwYXJrZGVzaWduc3lzdGVtL3NwYXJrLWRlc2lnbi1zeXN0ZW0vdHJlZS9tYXN0ZXIvc3JjL2FuZ3VsYXIvcHJvamVjdHMvc3BhcmstYW5ndWxhci9zcmMvbGliL2NvbXBvbmVudHMvc3Byay1tYXN0aGVhZC9zcHJrLW1hc3RoZWFkLmludGVyZmFjZXMudHMpXG4gICAqIHRvIGJlXG4gICAqIHVzZWQgdG8gY3JlYXRlIHRoZSBCaWcgTmF2aWdhdGlvbiBvZlxuICAgKiB0aGUgTWFzdGhlYWQgY29tcG9uZW50LlxuICAgKi9cbiAgQElucHV0KClcbiAgYmlnTmF2TGlua3M6IElTcHJrQmlnTmF2TGlua1tdO1xuICAvKipcbiAgICogRXhwZWN0cyBhIFtJU3Bya05hcnJvd1NlbGVjdG9yXShodHRwczovL2dpdGh1Yi5jb20vc3BhcmtkZXNpZ25zeXN0ZW0vc3BhcmstZGVzaWduLXN5c3RlbS90cmVlL21hc3Rlci9zcmMvYW5ndWxhci9wcm9qZWN0cy9zcGFyay1hbmd1bGFyL3NyYy9saWIvY29tcG9uZW50cy9zcHJrLW1hc3RoZWFkL3NwcmstbWFzdGhlYWQuaW50ZXJmYWNlcy50cylcbiAgICogb2JqZWN0IHRoYXRcbiAgICogcmVwcmVzZW50cyBkcm9wZG93biBjaG9pY2VzIGluc2lkZSB0aGUgZHJvcGRvd25cbiAgICogcmVuZGVyZWQgaW4gdGhlIE5hcnJvdyBOYXZpZ2F0aW9uLlxuICAgKi9cbiAgQElucHV0KClcbiAgbmFycm93U2VsZWN0b3I6IElTcHJrTmFycm93U2VsZWN0b3I7XG4gIC8qKlxuICAgKiBBIHN0cmluZyB0aGF0IGlzIHVzZWQgdG8gc2V0IHRoZSBgaWRgIG9uIHRoZSBuYXJyb3cgbmF2XG4gICAqIGFuZCB0aGUgYGFyaWEtY29udHJvbHNgIGZvciB0aGUgbWVudSB0cmlnZ2VyIGJ1dHRvbi5cbiAgICovXG4gIEBJbnB1dCgpXG4gIG5hcnJvd05hdklkID0gXy51bmlxdWVJZChgc3Bya19tYXN0aGVhZF9uYXJyb3dfbmF2X2ApO1xuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBpY29uVHlwZSA9ICdjaGV2cm9uLWRvd24nO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgY29tcG9uZW50SUQgPSBfLnVuaXF1ZUlkKCk7XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBjb250cm9sc19pZCA9IGBzcHJrLW5hcnJvdy1uYXZpZ2F0aW9uLWl0ZW1fXyR7dGhpcy5jb21wb25lbnRJRH1gO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaXNTY3JvbGxlZCA9IGZhbHNlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaXNOYXJyb3dMYXlvdXQgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHNjcm9sbERpcmVjdGlvbiA9ICd1cCc7XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBpc0hpZGRlbiA9IGZhbHNlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaXNOYXJyb3dPblJlc2l6ZSA9IGZhbHNlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgc2Nyb2xsUG9zaXRpb24gPSAwO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgdGhyb3R0bGVkQ2hlY2tTY3JvbGxEaXJlY3Rpb24gPSBfLnRocm90dGxlKHRoaXMuY2hlY2tTY3JvbGxEaXJlY3Rpb24sIDUwMCk7XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICB0aHJvdHRsZWRVcGRhdGVMYXlvdXRTdGF0ZSA9IF8udGhyb3R0bGUodGhpcy51cGRhdGVMYXlvdXRTdGF0ZSwgNTAwKTtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKiBDbG9zZXMgdGhlIG5hcnJvdyBuYXZpZ2F0aW9uIG1lbnVcbiAgICogaWYgaXQgaXMgbGVmdCBvcGVuIHdoZW5cbiAgICogdGhlIHZpZXdwb3J0IGlzIGV4cGFuZGVkLlxuICAgKi9cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93Om9yaWVudGF0aW9uY2hhbmdlJylcbiAgaGFuZGxlUmVzaXplRXZlbnQoKSB7XG4gICAgdGhpcy5jbG9zZU5hcnJvd05hdigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpzY3JvbGwnLCBbJyRldmVudCddKVxuICBvblNjcm9sbChldmVudCk6IHZvaWQge1xuICAgIHdpbmRvdy5zY3JvbGxZID49IDEwID8gKHRoaXMuaXNTY3JvbGxlZCA9IHRydWUpIDogKHRoaXMuaXNTY3JvbGxlZCA9IGZhbHNlKTtcbiAgICBpZiAodGhpcy5pc05hcnJvd0xheW91dCkge1xuICAgICAgdGhpcy50aHJvdHRsZWRDaGVja1Njcm9sbERpcmVjdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqIEhhbmRsZXMgd2hlbiB2aWV3cG9ydCBzaXplIGNoYW5nZXMgdG9cbiAgICogbGFyZ2Ugd2hpbGUgbmFycm93IG5hdiBpcyBoaWRkZW4uXG4gICAqL1xuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcbiAgb25SZXNpemUoZXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLmlzTmFycm93T25SZXNpemUgPSB0aGlzLmlzRWxlbWVudFZpc2libGUoJy5zcHJrLWMtTWFzdGhlYWRfX21lbnUnKTtcbiAgICB0aGlzLnRocm90dGxlZFVwZGF0ZUxheW91dFN0YXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgdXBkYXRlTGF5b3V0U3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuaXNOYXJyb3dMYXlvdXQgIT09IHRoaXMuaXNOYXJyb3dPblJlc2l6ZSkge1xuICAgICAgdGhpcy5pc05hcnJvd0xheW91dCA9IHRoaXMuaXNOYXJyb3dPblJlc2l6ZTtcblxuICAgICAgLy8gSWYgaXMgbm90IG5hcnJvdyBvbiByZXNpemUgdXBkYXRlLCBtYWtlIHN1cmUgaXQncyB2aXNpYmxlXG4gICAgICBpZiAoIXRoaXMuaXNOYXJyb3dMYXlvdXQpIHtcbiAgICAgICAgdGhpcy5pc0hpZGRlbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgdGhpcy5pc05hcnJvd0xheW91dCA9IHRoaXMuaXNFbGVtZW50VmlzaWJsZSgnLnNwcmstYy1NYXN0aGVhZF9fbWVudScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGlzRWxlbWVudFZpc2libGUoc2VsZWN0b3IpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuOyB9XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50RGlzcGxheVZhbHVlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkuZGlzcGxheTtcbiAgICBjb25zdCBlbGVtZW50VmlzaWJpbGl0eVZhbHVlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkudmlzaWJpbGl0eTtcbiAgICBjb25zdCBlbGVtZW50SXNWaXNpYmxlID1cbiAgICAgIGVsZW1lbnREaXNwbGF5VmFsdWUgPT09ICdub25lJyB8fCBlbGVtZW50VmlzaWJpbGl0eVZhbHVlID09PSAnaGlkZGVuJ1xuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDogdHJ1ZTtcbiAgICByZXR1cm4gZWxlbWVudElzVmlzaWJsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBzY3JvbGxZRGlyZWN0aW9uKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgbmV3U2Nyb2xsUG9zID0gd2luZG93LnNjcm9sbFk7XG4gICAgICBpZiAobmV3U2Nyb2xsUG9zIDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBkaWZmID0gbmV3U2Nyb2xsUG9zIC0gdGhpcy5zY3JvbGxQb3NpdGlvbjtcbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGRpZmYgPiAwID8gJ2Rvd24nIDogJ3VwJztcbiAgICAgIHRoaXMuc2Nyb2xsUG9zaXRpb24gPSBuZXdTY3JvbGxQb3M7XG4gICAgICByZXR1cm4gZGlyZWN0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBjaGVja1Njcm9sbERpcmVjdGlvbigpIHtcbiAgICBjb25zdCBuZXdEaXJlY3Rpb24gPSB0aGlzLnNjcm9sbFlEaXJlY3Rpb24oKTtcbiAgICBpZiAodGhpcy5zY3JvbGxEaXJlY3Rpb24gIT09IG5ld0RpcmVjdGlvbikge1xuICAgICAgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPSBuZXdEaXJlY3Rpb247XG4gICAgICB0aGlzLnNjcm9sbERpcmVjdGlvbiA9PT0gJ2Rvd24nXG4gICAgICAgID8gKHRoaXMuaXNIaWRkZW4gPSB0cnVlKVxuICAgICAgICA6ICh0aGlzLmlzSGlkZGVuID0gZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBnZXRDbGFzc2VzKCk6IHN0cmluZyB7XG4gICAgY29uc3QgY2xhc3NBcnJheTogc3RyaW5nW10gPSBbJ3NwcmstYy1NYXN0aGVhZCcsICdzcHJrLW8tU3RhY2snXTtcblxuICAgIGlmICh0aGlzLmFkZGl0aW9uYWxDbGFzc2VzKSB7XG4gICAgICB0aGlzLmFkZGl0aW9uYWxDbGFzc2VzLnNwbGl0KCcgJykuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICBjbGFzc0FycmF5LnB1c2goY2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzTmFycm93TmF2T3Blbikge1xuICAgICAgY2xhc3NBcnJheS5wdXNoKCdzcHJrLWMtTWFzdGhlYWQtLW9wZW4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1Njcm9sbGVkKSB7XG4gICAgICBjbGFzc0FycmF5LnB1c2goJ3NwcmstYy1NYXN0aGVhZC0tc2Nyb2xsJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNIaWRkZW4pIHtcbiAgICAgIGNsYXNzQXJyYXkucHVzaCgnc3Byay1jLU1hc3RoZWFkLS1oaWRkZW4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NBcnJheS5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ2V0TmFycm93TmF2Q2xhc3NlcygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNsYXNzQXJyYXk6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsTmFycm93TmF2Q2xhc3Nlcykge1xuICAgICAgdGhpcy5hZGRpdGlvbmFsTmFycm93TmF2Q2xhc3Nlcy5zcGxpdCgnICcpLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgY2xhc3NBcnJheS5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NBcnJheS5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ2V0U2Vjb25kYXJ5TmF2Q2xhc3NlcygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNsYXNzQXJyYXk6IHN0cmluZ1tdID0gW1xuICAgICAgJ3NwcmstYy1NYXN0aGVhZF9fYmlnLW5hdi1pdGVtcycsXG4gICAgICAnc3Byay1vLVN0YWNrJyxcbiAgICAgICdzcHJrLW8tU3RhY2stLW1pc2MtYScsXG4gICAgICAnc3Byay1vLVN0YWNrLS1jZW50ZXItcm93JyxcbiAgICAgICdzcHJrLW8tU3RhY2stLXNwbGl0QHh4cycsXG4gICAgICAnc3Byay1iLUxpc3QnLFxuICAgICAgJ3NwcmstYi1MaXN0LS1iYXJlJ1xuICAgIF07XG5cbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsQmlnTmF2Q2xhc3Nlcykge1xuICAgICAgdGhpcy5hZGRpdGlvbmFsQmlnTmF2Q2xhc3Nlcy5zcGxpdCgnICcpLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgY2xhc3NBcnJheS5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NBcnJheS5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgdG9nZ2xlTmFycm93TmF2KGV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAodGhpcy5pc05hcnJvd05hdk9wZW4pIHtcbiAgICAgIHRoaXMuY2xvc2VOYXJyb3dOYXYoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vcGVuTmFycm93TmF2KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIG9wZW5OYXJyb3dOYXYoKTogdm9pZCB7XG4gICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhkb2N1bWVudC5ib2R5LCAnc3Byay11LU92ZXJmbG93LS1oaWRkZW4nKTtcbiAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKFxuICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LFxuICAgICAgJ3NwcmstdS1PdmVyZmxvdy0taGlkZGVuJ1xuICAgICk7XG4gICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhkb2N1bWVudC5ib2R5LCAnc3Byay11LUhlaWdodC0tMTAwJyk7XG4gICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQsICdzcHJrLXUtSGVpZ2h0LS0xMDAnKTtcbiAgICB0aGlzLmlzTmFycm93TmF2T3BlbiA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgY2xvc2VOYXJyb3dOYXYoKTogdm9pZCB7XG4gICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyhkb2N1bWVudC5ib2R5LCAnc3Byay11LU92ZXJmbG93LS1oaWRkZW4nKTtcbiAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKFxuICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LFxuICAgICAgJ3NwcmstdS1PdmVyZmxvdy0taGlkZGVuJ1xuICAgICk7XG4gICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyhkb2N1bWVudC5ib2R5LCAnc3Byay11LUhlaWdodC0tMTAwJyk7XG4gICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyhcbiAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudCxcbiAgICAgICdzcHJrLXUtSGVpZ2h0LS0xMDAnXG4gICAgKTtcbiAgICB0aGlzLmlzTmFycm93TmF2T3BlbiA9IGZhbHNlO1xuICB9XG59XG4iXX0=